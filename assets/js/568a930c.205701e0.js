"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[9393],{88183:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>Qe,contentTitle:()=>Ze,default:()=>Ke,frontMatter:()=>We,metadata:()=>Je,toc:()=>Ge});var n=r(85893),o=r(11151),i=r(67294),s=(r(20745),r(33545)),a=r(24613),l=r.n(a),u=r(8977),c=r(24009),d=r(78918),f=r(29221),p=r(94526),h=r(13863),y=r(41990),g=r(25108);const m="undefined"!=typeof window&&window.devicePixelRatio||1;class w extends d.Z{initializeState(){this.setState({tileSource:null})}updateState(e){let{props:t,changeFlags:r}=e;this.setState({tileSource:t.tileSource})}renderLayers(){const{tileSource:e,showTileBorders:t,metadata:r,onTilesLoad:n}=this.props,o=(null==r?void 0:r.minZoom)||0,i=(null==r?void 0:r.maxZoom)||30;return[new f.Z({id:String(e.url),getTileData:e.getTileData,maxRequests:20,pickable:!0,onViewportLoad:n,autoHighlight:t,highlightColor:[60,60,60,40],minZoom:o,maxZoom:i,tileSize:256,zoomOffset:1===m?-1:0,renderSubLayers:b,tileSource:e,showTileBorders:t})]}}function b(e){const{tileSource:t,showTileBorders:r,minZoom:n,maxZoom:o,tile:{index:{z:i},bbox:{west:s,south:a,east:l,north:u}}}=e,c=[],d=i<=n||i>=o?[255,0,0,255]:[0,0,255,255];switch(t.mimeType){case"application/vnd.mapbox-vector-tile":c.push(new p.Z({id:e.id+"-geojson",data:e.data,pickable:!0,getFillColor:[0,190,80,255],lineWidthScale:500,lineWidthMinPixels:.5}));break;case"image/png":case"image/jpeg":case"image/webp":case"image/avif":c.push(new h.Z(e,{data:null,image:e.data,bounds:[s,a,l,u],pickable:!0}));break;default:g.error("Unknown tile mimeType",null==t?void 0:t.mimeType)}return r&&c.push(new y.Z({id:e.id+"-border",data:[[[s,u],[s,a],[l,a],[l,u],[s,u]]],getPath:e=>e,getColor:d,widthMinPixels:4})),c}w.layerName="TileSourceLayer",w.defaultProps={...f.Z.defaultProps,showTileBorders:!0};var v=r(21970),x=r(92730),_=r(48093),T=r(12057),k=r(3614),P=r.n(k);function A(e){let t=0;for(let r,n,o=0,i=e.length-1;o<e.length;i=o++)r=e[o],n=e[i],t+=(n[0]-r[0])*(r[1]+n[1]);return t}function S(e,t,r){t&&r&&(1===e?t.id=r.readVarint():2===e?function(e,t){const r=e.readVarint()+e.pos;for(;e.pos<r;){const r=t._keys[e.readVarint()],n=t._values[e.readVarint()];t.properties[r]=n}}(r,t):3===e?t.type=r.readVarint():4===e&&(t._geometry=r.pos))}class j{static get types(){return["Unknown","Point","LineString","Polygon"]}constructor(e,t,r,n,o){this.properties={},this.extent=r,this.type=0,this.id=null,this._pbf=e,this._geometry=-1,this._keys=n,this._values=o,e.readFields(S,this,t)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const t=e.readVarint()+e.pos;let r=1,n=0,o=0,i=0;const s=[];let a;for(;e.pos<t;){if(n<=0){const t=e.readVarint();r=7&t,n=t>>3}if(n--,1===r||2===r)o+=e.readSVarint(),i+=e.readSVarint(),1===r&&(a&&s.push(a),a=[]),a&&a.push([o,i]);else{if(7!==r)throw new Error("unknown command "+r);a&&a.push(a[0].slice())}}return a&&s.push(a),s}bbox(){const e=this._pbf;e.pos=this._geometry;const t=e.readVarint()+e.pos;let r=1,n=0,o=0,i=0,s=1/0,a=-1/0,l=1/0,u=-1/0;for(;e.pos<t;){if(n<=0){const t=e.readVarint();r=7&t,n=t>>3}if(n--,1===r||2===r)o+=e.readSVarint(),i+=e.readSVarint(),o<s&&(s=o),o>a&&(a=o),i<l&&(l=i),i>u&&(u=i);else if(7!==r)throw new Error("unknown command "+r)}return[s,l,a,u]}_toGeoJSON(e){let t,r,n=this.loadGeometry(),o=j.types[this.type];switch(this.type){case 1:const o=[];for(t=0;t<n.length;t++)o[t]=n[t][0];n=o,e(n,this);break;case 2:for(t=0;t<n.length;t++)e(n[t],this);break;case 3:for(n=function(e){const t=e.length;if(t<=1)return[e];const r=[];let n,o;for(let i=0;i<t;i++){const t=A(e[i]);0!==t&&(void 0===o&&(o=t<0),o===t<0?(n&&r.push(n),n=[e[i]]):n&&n.push(e[i]))}return n&&r.push(n),r}(n),t=0;t<n.length;t++)for(r=0;r<n[t].length;r++)e(n[t][r],this)}1===n.length?n=n[0]:o="Multi"+o;const i={type:"Feature",geometry:{type:o,coordinates:n},properties:this.properties};return null!==this.id&&(i.id=this.id),i}toGeoJSON(e){if("function"==typeof e)return this._toGeoJSON(e);const{x:t,y:r,z:n}=e,o=this.extent*Math.pow(2,n),i=this.extent*t,s=this.extent*r;return this._toGeoJSON((function(e){for(let t=0;t<e.length;t++){const r=e[t];r[0]=360*(r[0]+i)/o-180;const n=180-360*(r[1]+s)/o;r[1]=360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90}}))}}class I{constructor(e,t){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(C,this,t),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const t=this._pbf.readVarint()+this._pbf.pos;return new j(this._pbf,t,this.extent,this._keys,this._values)}}function C(e,t,r){t&&r&&(15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){let t=null;const r=e.readVarint()+e.pos;for(;e.pos<r;){const r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(r)))}class M{constructor(e,t){this.layers=e.readFields(E,{},t)}}function E(e,t,r){if(3===e&&r){const e=new I(r,r.readVarint()+r.pos);e.length&&t&&(t[e.name]=e)}}var U=r(89513);function R(e){const t=e.indices.length,r="Polygon";if(t<=1)return{type:r,data:e.data,areas:[[(0,U.ap)(e.data)]],indices:[e.indices]};const n=[],o=[];let i,s=[],a=[],l=0;for(let u,c,d=0;d<t;d++){c=e.indices[d]-l,u=e.indices[d+1]-l||e.data.length;const t=e.data.slice(c,u),r=(0,U.ap)(t);if(0!==r)void 0===i&&(i=r<0),i===r<0?(a.length&&(n.push(s),o.push(a)),a=[c],s=[r]):(s.push(r),a.push(c));else{const t=e.data.slice(0,c),r=e.data.slice(u);e.data=t.concat(r),l+=u-c}}return s&&n.push(s),a.length&&o.push(a),{type:r,areas:n,indices:o,data:e.data}}function L(e,t,r){t&&r&&(1===e?t.id=r.readVarint():2===e?function(e,t){const r=e.readVarint()+e.pos;for(;e.pos<r;){const r=t._keys[e.readVarint()],n=t._values[e.readVarint()];t.properties[r]=n}}(r,t):3===e?t.type=r.readVarint():4===e&&(t._geometry=r.pos))}let V,O,F,B,N,z,D;class q{constructor(e,t,r,n,o,i){this.properties={},this.extent=r,this.type=0,this.id=null,this._pbf=e,this._geometry=-1,this._keys=n,this._values=o,this._geometryInfo=i,e.readFields(L,this,t)}loadGeometry(){const e=this._pbf;e.pos=this._geometry,V=e.readVarint()+e.pos,O=1,B=0,N=0,z=0,D=0;const t=[],r=[];for(;e.pos<V;)if(B<=0&&(F=e.readVarint(),O=7&F,B=F>>3),B--,1===O||2===O)N+=e.readSVarint(),z+=e.readSVarint(),1===O&&t.push(D),r.push(N,z),D+=2;else{if(7!==O)throw new Error("unknown command "+O);if(D>0){const e=t[t.length-1];r.push(r[e],r[e+1]),D+=2}}return{data:r,indices:t}}_toBinaryCoordinates(e){const t=this.loadGeometry();let r;e(t.data,this);switch(this.type){case 1:this._geometryInfo.pointFeaturesCount++,this._geometryInfo.pointPositionsCount+=t.indices.length,r={type:"Point",...t};break;case 2:this._geometryInfo.lineFeaturesCount++,this._geometryInfo.linePathsCount+=t.indices.length,this._geometryInfo.linePositionsCount+=t.data.length/2,r={type:"LineString",...t};break;case 3:r=R(t),this._geometryInfo.polygonFeaturesCount++,this._geometryInfo.polygonObjectsCount+=r.indices.length;for(const e of r.indices)this._geometryInfo.polygonRingsCount+=e.length;this._geometryInfo.polygonPositionsCount+=r.data.length/2;break;default:throw new Error("Invalid geometry type: "+this.type)}const n={type:"Feature",geometry:r,properties:this.properties};return null!==this.id&&(n.id=this.id),n}toBinaryCoordinates(e){if("function"==typeof e)return this._toBinaryCoordinates(e);const{x:t,y:r,z:n}=e,o=this.extent*Math.pow(2,n),i=this.extent*t,s=this.extent*r;return this._toBinaryCoordinates((e=>function(e,t,r,n){for(let o=0,i=e.length;o<i;o+=2){e[o]=360*(e[o]+t)/n-180;const i=180-360*(e[o+1]+r)/n;e[o+1]=360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90}}(e,i,s,o)))}}class W{constructor(e,t){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Z,this,t),this.length=this._features.length}feature(e,t){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const r=this._pbf.readVarint()+this._pbf.pos;return new q(this._pbf,r,this.extent,this._keys,this._values,t)}}function Z(e,t,r){t&&r&&(15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){let t=null;const r=e.readVarint()+e.pos;for(;e.pos<r;){const r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(r)))}class J{constructor(e,t){this.layers=e.readFields(Q,{},t)}}function Q(e,t,r){if(3===e&&r){const e=new W(r,r.readVarint()+r.pos);e.length&&t&&(t[e.name]=e)}}function G(e,t){var r,n;const o=function(e){var t;if(null==e||!e.mvt)throw new Error("mvt options required");const r="wgs84"===(null==(t=e.mvt)?void 0:t.coordinates),{tileIndex:n}=e.mvt,o=n&&Number.isFinite(n.x)&&Number.isFinite(n.y)&&Number.isFinite(n.z);if(r&&!o)throw new Error("MVT Loader: WGS84 coordinates need tileIndex property");return e.mvt}(t),i=(null==t||null==(r=t.gis)?void 0:r.format)||(null==t||null==(n=t.mvt)?void 0:n.shape)||(null==t?void 0:t.shape);switch(i){case"columnar-table":return{shape:"columnar-table",data:H(e,o)};case"geojson-table":return{shape:"geojson-table",type:"FeatureCollection",features:K(e,o)};case"geojson":return K(e,o);case"binary-geometry":case"binary":return H(e,o);default:throw new Error(i||"undefined shape")}}function H(e,t){const[r,n]=function(e,t){const r=[],n={coordLength:2,pointPositionsCount:0,pointFeaturesCount:0,linePositionsCount:0,linePathsCount:0,lineFeaturesCount:0,polygonPositionsCount:0,polygonObjectsCount:0,polygonRingsCount:0,polygonFeaturesCount:0};if(e.byteLength<=0)return[r,n];const o=new J(new(P())(e)),i=t&&Array.isArray(t.layers)?t.layers:Object.keys(o.layers);return i.forEach((e=>{const i=o.layers[e];if(i)for(let o=0;o<i.length;o++){const s=$(i.feature(o,n),t,e);r.push(s)}})),[r,n]}(e,t),o=(0,T.E)(r,n);return o.byteLength=e.byteLength,o}function K(e,t){if(e.byteLength<=0)return[];const r=[],n=new M(new(P())(e));return(Array.isArray(t.layers)?t.layers:Object.keys(n.layers)).forEach((e=>{const o=n.layers[e];if(o)for(let n=0;n<o.length;n++){const i=X(o.feature(n),t,e);r.push(i)}})),r}function X(e,t,r){const n=e.toGeoJSON("wgs84"===t.coordinates?t.tileIndex:Y);return t.layerProperty&&(n.properties[t.layerProperty]=r),n}function $(e,t,r){const n=e.toBinaryCoordinates("wgs84"===t.coordinates?t.tileIndex:ee);return t.layerProperty&&n.properties&&(n.properties[t.layerProperty]=r),n}function Y(e,t){const{extent:r}=t;for(let n=0;n<e.length;n++){const t=e[n];t[0]/=r,t[1]/=r}}function ee(e,t){const{extent:r}=t;for(let n=0,o=e.length;n<o;++n)e[n]/=r}const te={...{name:"Mapbox Vector Tile",id:"mvt",module:"mvt",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",extensions:["mvt","pbf"],mimeTypes:["application/vnd.mapbox-vector-tile","application/x-protobuf"],worker:!0,category:"geometry",options:{mvt:{shape:"geojson",coordinates:"local",layerProperty:"layerName",layers:void 0,tileIndex:null}}},parse:async(e,t)=>G(e,t),parseSync:G,binary:!0};var re=r(7725),ne=r(25108);const oe=e=>null!==e&&"object"==typeof e;function ie(e,t){var r;if(!e||!oe(e))return null;let n={name:e.name||"",description:e.description||""};if("string"==typeof e.generator&&(n.generator=e.generator),"string"==typeof e.generator_options&&(n.generatorOptions=e.generator_options),n.boundingBox=se(e.bounds)||se(e.antimeridian_adjusted_bounds),n.center=function(e){const t=ce(e);if(Array.isArray(t)&&3===t.length&&ue(t[0])&&le(t[1])&&(r=t[2],Number.isFinite(r)&&r>=0&&r<=22))return t;var r;return null}(e.center),n.maxZoom=ae(e.maxzoom),n.minZoom=ae(e.minzoom),"string"==typeof(null==e?void 0:e.json))try{n.metaJson=JSON.parse(e.json)}catch(a){ne.warn("Failed to parse tilejson.json field",a)}const o=function(e,t){if(oe(e)&&Array.isArray(e.layers))return e.layers.map((e=>function(e,t){const r=[],n={},o=e.attributes||[];for(const i of o){const e=i.attribute;if("string"==typeof e)if(e.split("|").length>1){const t=e.split("|")[0];n[t]=n[t]||[],n[t].push(i),ne.warn("ignoring tilestats indexed field",t)}else r[e]||r.push(fe(i,t))}return{name:e.layer||"",dominantGeometry:e.geometry,fields:r}}(e,t)));return[]}(e.tilestats||(null==(r=n.metaJson)?void 0:r.tilestats),t),i=function(e){if(!Array.isArray(e))return[];return e.map((e=>function(e){const t=Object.entries(e.fields||[]).map((e=>{let[t,r]=e;return{name:t,...pe(String(r))}})),r={...e};return delete r.fields,{name:e.id||"",...r,fields:t}}(e)))}(e.vector_layers),s=function(e,t){return e.map((e=>{const r=t.find((t=>t.name===e.name)),n=(null==r?void 0:r.fields)||[],o={...e};return delete o.fields,{...o,...r,fields:n}}))}(i,o);return n={...n,layers:s},null===n.maxZoom&&s.length>0&&(n.maxZoom=s[0].maxZoom||null),null===n.minZoom&&s.length>0&&(n.minZoom=s[0].minZoom||null),n}function se(e){const t=ce(e);if(Array.isArray(t)&&4===t.length&&[t[0],t[2]].every(ue)&&[t[1],t[3]].every(le))return[[t[0],t[1]],[t[2],t[3]]]}function ae(e){const t="string"==typeof e?parseFloat(e):"number"==typeof e?e:null;return null===t||isNaN(t)?null:t}function le(e){return Number.isFinite(e)&&e<=90&&e>=-90}function ue(e){return Number.isFinite(e)&&e<=180&&e>=-180}function ce(e){return"string"==typeof e?e.split(",").map(parseFloat):Array.isArray(e)?e:null}const de={number:{type:"float32"},numeric:{type:"float32"},string:{type:"utf8"},vachar:{type:"utf8"},float:{type:"float32"},int:{type:"int32"},int4:{type:"int32"},boolean:{type:"boolean"},bool:{type:"boolean"}};function fe(e,t){void 0===e&&(e={});const r=pe(e.type),n={name:e.attribute,...r};var o;("number"==typeof e.min&&(n.min=e.min),"number"==typeof e.max&&(n.max=e.max),"number"==typeof e.count&&(n.uniqueValueCount=e.count),e.values&&(n.values=e.values),n.values&&"number"==typeof t.maxValues)&&(n.values=null==(o=n.values)?void 0:o.slice(0,t.maxValues));return n}function pe(e){const t=e.toLowerCase();return!t||de[t],de[t]||{type:"string"}}const he={name:"TileJSON",id:"tilejson",module:"pmtiles",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",worker:!0,extensions:["json"],mimeTypes:["application/json"],text:!0,options:{tilejson:{maxValues:void 0}},parse:async(e,t)=>{const r=(new TextDecoder).decode(e);return ie(JSON.parse(r),{...he.options.tilejson,...null==t?void 0:t.tilejson})},parseTextSync:(e,t)=>ie(JSON.parse(e),{...he.options.tilejson,...null==t?void 0:t.tilejson})};var ye=r(25108);const{TileType:ge}=re;function me(e){switch(e){case ge.Mvt:return"application/vnd.mapbox-vector-tile";case ge.Png:return"image/png";case ge.Jpeg:return"image/jpeg";case ge.Webp:return"image/webp";case ge.Avif:return"image/avif";default:return"application/octet-stream"}}class we{constructor(e,t){this.blob=e,this.key=t}getKey(){return this.blob.url||""}async getBytes(e,t,r){const n=this.blob.slice(e,e+t);return{data:await n.arrayBuffer()}}}const{PMTiles:be}=re;class ve extends v.o{constructor(e){super(e),this.mimeType=null,this.props=e;const t="string"==typeof e.url?(0,x.i3)(e.url):new we(e.url,"pmtiles");this.data=e.url,this.pmtiles=new be(t),this.getTileData=this.getTileData.bind(this),this.metadata=this.getMetadata()}async getMetadata(){const e=function(e,t,r,n){var o,i;let s=null;if(t)try{const e=JSON.stringify(t);s=(null==he.parseTextSync?void 0:he.parseTextSync(e,n))||null}catch(u){ye.warn("PMTiles metadata could not be interpreted as TileJSON",u)}const a={};"string"==typeof(null==(o=s)?void 0:o.name)&&(a.name=s.name),"string"==typeof(null==(i=s)?void 0:i.htmlAttribution)&&(a.attributions=[s.htmlAttribution]);const l={...a,format:"pmtiles",formatVersion:e.specVersion,attributions:[],tileMIMEType:me(e.tileType),minZoom:e.minZoom,maxZoom:e.maxZoom,boundingBox:[[e.minLon,e.minLat],[e.maxLon,e.maxLat]],center:[e.centerLon,e.centerLat],centerZoom:e.centerZoom,etag:e.etag};return s&&(l.tilejson=s),null!=r&&r.includeFormatHeader&&(l.formatHeader=e,l.formatMetadata=l),l}(await this.pmtiles.getHeader(),await this.pmtiles.getMetadata(),{includeFormatHeader:!1},this.loadOptions);return this.props.attributions&&(e.attributions=[...this.props.attributions,...e.attributions||[]]),null!=e&&e.tileMIMEType&&(this.mimeType=null==e?void 0:e.tileMIMEType),e}async getTile(e){const{x:t,y:r,zoom:n}=e,o=await this.pmtiles.getZxy(n,t,r),i=null==o?void 0:o.data;return i||null}async getTileData(e){const{x:t,y:r,z:n}=e.index;return"application/vnd.mapbox-vector-tile"===(await this.metadata).tileMIMEType?await this.getVectorTile({x:t,y:r,zoom:n,layers:[]}):await this.getImageTile({x:t,y:r,zoom:n,layers:[]})}async getImageTile(e){const t=await this.getTile(e);return t?await _.S.parse(t,this.loadOptions):null}async getVectorTile(e){var t;const r=await this.getTile(e),n={shape:"geojson-table",mvt:{coordinates:"wgs84",tileIndex:{x:e.x,y:e.y,z:e.zoom},...null==(t=this.loadOptions)?void 0:t.mvt},...this.loadOptions};return r?await te.parse(r,n):null}}var xe=r(98746),_e=r(25108);class Te extends v.o{constructor(e){var t;super(e),this.metadataUrl=null,this.schema="tms",this.mimeType=null,this.props=e,this.url=(0,x.i3)(e.url),this.metadataUrl=void 0===e.metadataUrl?this.url+"/tilejson.json":e.metadataUrl,this.extension=e.extension||".png",this.data=this.url,this.getTileData=this.getTileData.bind(this),this.metadata=this.getMetadata(),t=this.url,/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))|(?=.*{x})(?=.*({y}|{-y})(?=.*{z}))/.test(t)&&(this.schema="template")}async getMetadata(){if(!this.metadataUrl)return null;let e;try{e=await this.fetch(this.metadataUrl)}catch(r){return _e.error(r.message),null}if(!e.ok)return _e.error(e.statusText),null;const t=await e.text();return(null==he.parseTextSync?void 0:he.parseTextSync(t))||null}getTileMIMEType(){return this.mimeType}async getTile(e){const{x:t,y:r,zoom:n}=e,o=this.getTileURL(t,r,n),i=await this.fetch(o);if(!i.ok)return null;return await i.arrayBuffer()}async getTileData(e){const{x:t,y:r,z:n}=e.index,o=await this.getTile({x:t,y:r,zoom:n,layers:[]});if(null===o)return null;const i=(0,xe.I)(o);return this.mimeType=this.mimeType||(null==i?void 0:i.mimeType)||"application/vnd.mapbox-vector-tile","application/vnd.mapbox-vector-tile"===this.mimeType?await this._parseVectorTile(o,{x:t,y:r,zoom:n,layers:[]}):await this._parseImageTile(o)}async getImageTile(e){const t=await this.getTile(e);return t?this._parseImageTile(t):null}async _parseImageTile(e){return await _.S.parse(e,this.loadOptions)}async getVectorTile(e){const t=await this.getTile(e);return t?this._parseVectorTile(t,e):null}async _parseVectorTile(e,t){var r;const n={shape:"geojson-table",mvt:{coordinates:"wgs84",tileIndex:{x:t.x,y:t.y,z:t.zoom},...null==(r=this.loadOptions)?void 0:r.mvt},...this.loadOptions};return await te.parse(e,n)}getMetadataUrl(){return this.metadataUrl}getTileURL(e,t,r){switch(this.schema){case"xyz":return this.url+"/"+e+"/"+t+"/"+r+this.extension;case"tms":return this.url+"/"+r+"/"+e+"/"+t+this.extension;case"template":return function(e,t,r,n,o){void 0===o&&(o="0");if(Array.isArray(e)){e=e[(i=o,Math.abs(i.split("").reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)|0),0))%e.length)]}var i;let s=e;s=s.replace(ke,String(t)),s=s.replace(Pe,String(r)),s=s.replace(Ae,String(n)),Number.isInteger(r)&&Number.isInteger(n)&&(s=s.replace(/\{-y\}/g,String(Math.pow(2,n)-r-1)));return s}(this.url,e,t,r,"0");default:throw new Error(this.schema)}}}const ke=new RegExp("{x}","g"),Pe=new RegExp("{y}","g"),Ae=new RegExp("{z}","g");var Se=r(19521),je=r(63764);const Ie=Se.ZP.div.withConfig({displayName:"control-panel__Container",componentId:"sc-uyxo6u-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;background:#fff;color:#121212;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px 24px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;height:calc(100vh - 105px);width:500px;h2{margin:0 0 0.5rem 0;}.loading-indicator{margin:0;text-align:center;transition:opacity 300ms ease-out;}> .monaco-editor{height:calc(100vh - 200px) !important;width:700px !important;}"]),Ce=Se.ZP.select.withConfig({displayName:"control-panel__DropDown",componentId:"sc-uyxo6u-1"})(["margin:0.5rem 0;font-size:16px;"]),Me={examples:{},droppedFile:null,selectedCategory:void 0,selectedExample:void 0,onExampleChange:()=>{}};class Ee extends i.PureComponent{constructor(e){super(e)}componentDidMount(){const{examples:e={},onExampleChange:t}=this.props;let r=this.props.selectedCategory,n=this.props.selectedExample;if(r&&n&&r&&n){var o,i;const t=e[r][n];null==(o=(i=this.props).onExampleChange)||o.call(i,{selectedCategory:r,selectedExample:n,example:t})}}_renderDropDown(){const{examples:e={},selectedCategory:t,selectedExample:r}=this.props;if(!t||!r)return!1;const o=t+"."+r;return(0,n.jsx)(Ce,{value:o,onChange:t=>{var r,n;const o=t.target.value.split("."),i=o[0],s=o[1],a=e[i][s];null==(r=(n=this.props).onExampleChange)||r.call(n,{selectedCategory:i,selectedExample:s,example:a})},children:Object.keys(e).map(((t,r)=>{const o=e[t];return(0,n.jsx)("optgroup",{label:t,children:Object.keys(o).map(((e,r)=>{const o=t+"."+e;return(0,n.jsx)("option",{value:o,children:e+" ("+t+")"},r)}))},r)}))})}render(){const e=this.props;return(0,n.jsxs)(Ie,{children:[this._renderDropDown(),e.error&&(0,n.jsx)("pre",{children:e.error.message}),(0,n.jsx)("pre",{className:"loading-indicator",style:{opacity:e.loading?1:0},children:"loading tile..."}),(0,n.jsx)("h2",{children:e.title}),(0,n.jsx)(je.ZP,{language:"json",options:{readOnly:!0},theme:"vs-dark",value:e.metadata})]})}}Ee.defaultProps=Me;const Ue="PMTILES",Re="FSQ Tiles",Le="https://basemaps.cartocdn.com/gl/positron-nolabels-gl-style/style.json",Ve={longitude:-122.4,latitude:37.74,zoom:9,minZoom:1,maxZoom:20,pitch:0,bearing:0},Oe={MVT:{"OpenStreetMap Tiles":{format:"mvt",data:"https://c.tile.openstreetmap.org",viewState:{...Ve,longitude:40,latitude:57,zoom:5}}},PMTILES:{"FSQ Tiles":{format:"pmtiles",data:"https://4sq-studio-public.s3.us-west-2.amazonaws.com/pmtiles-test/161727fe-7952-4e57-aa05-850b3086b0b2.pmtiles",attributions:["\xa9 Foursquare"],viewState:{...Ve}},"NZ Buildings":{format:"pmtiles",data:"https://r2-public.protomaps.com/protomaps-sample-datasets/nz-buildings-v3.pmtiles",attributions:["\xa9 Land Information New Zealand"],viewState:{...Ve}},Terrarium:{format:"pmtiles",data:"https://r2-public.protomaps.com/protomaps-sample-datasets/terrarium_z9.pmtiles",tileSize:[512,512]}}};var Fe=r(25108);const Be={latitude:47.65,longitude:7,zoom:4.5,maxZoom:20,maxPitch:89,bearing:0},Ne={position:"absolute",right:0,bottom:0,backgroundColor:"hsla(0,0%,100%,.5)",padding:"0 5px",font:"12px/20px Helvetica Neue,Arial,Helvetica,sans-serif"};function ze(e){var t;let{showBorder:r=!1,onTilesLoad:o=null}=e;const[a,d]=(0,i.useState)(Ue),[f,p]=(0,i.useState)(Re),[h,y]=(0,i.useState)(Oe[a][f]),[g,m]=(0,i.useState)(null),[b,v]=(0,i.useState)(null);(0,i.useEffect)((()=>{let e=function(e){switch(e.format){case"pmtiles":return new ve({url:e.data,attributions:e.attributions,loadOptions:{tilejson:{maxValues:10}}});case"mvt":return new Te({url:e.data});default:throw new Error("Unknown source format "+e.format)}}(h);m(e),v(null),(async()=>{const t=await e.metadata;v(t)})()}),[h]);const x=Be;b&&(x.zoom=(b.maxZoom+b.minZoom)/2,0!==b.center[0]&&0!==b.center[1]&&(x.longitude=b.center[0],x.latitude=b.center[1]),Fe.log("initialViewState",x));const _=g&&new w({tileSource:g,showBorder:r,metadata:b,onTilesLoad:o});return(0,n.jsxs)("div",{style:{position:"relative",height:"100%"},children:[De({metadata:b,selectedCategory:a,selectedExample:f,onExampleChange(e){let{selectedCategory:t,selectedExample:r,example:n}=e;d(t),p(r),y(n)}}),(0,n.jsxs)(u.Z,{layers:[_],views:new c.Z({repeat:!0}),initialViewState:x,controller:!0,getTooltip:qe,children:[(0,n.jsx)(s.D5,{mapLib:l(),mapStyle:Le}),(0,n.jsx)("div",{style:Ne,children:null==b||null==(t=b.attributions)?void 0:t.map((e=>(0,n.jsx)("div",{children:e},e)))})]})]})}function De(e){const{selectedExample:t,selectedCategory:r,onExampleChange:o,loading:i,metadata:s,error:a,viewState:l}=e;return(0,n.jsxs)(Ee,{title:"Tileset Metadata",metadata:s?JSON.stringify(s,null,2):"",examples:Oe,selectedExample:t,selectedCategory:r,onExampleChange:o,loading:i,children:[a?(0,n.jsx)("div",{style:{color:"red"},children:a}):"",(0,n.jsx)("pre",{style:{textAlign:"center",margin:0}})]})}function qe(e){if(e.tile){const{x:t,y:r,z:n}=e.tile.index;return"tile: x: "+t+", y: "+r+", z: "+n}return null}const We={},Ze="PMTiles",Je={id:"pmtiles",title:"PMTiles",description:"",source:"@site/src/examples/pmtiles.mdx",sourceDirName:".",slug:"/pmtiles",permalink:"/examples/pmtiles",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"examplesSidebar",previous:{title:"GeoPackage",permalink:"/examples/geopackage"},next:{title:"WMS",permalink:"/examples/wms"}},Qe={},Ge=[];function He(e){const t={h1:"h1",...(0,o.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"pmtiles",children:"PMTiles"}),"\n","\n","\n",(0,n.jsx)("div",{style:{height:"100vh"},children:(0,n.jsx)(ze,{})})]})}function Ke(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(He,{...e})}):He(e)}},54361:(e,t,r)=>{r.d(t,{D0:()=>l,Ew:()=>u,Kn:()=>i,Lj:()=>c,Os:()=>f,Ss:()=>s,TW:()=>a,zH:()=>d});const n=e=>"boolean"==typeof e,o=e=>"function"==typeof e,i=e=>null!==e&&"object"==typeof e,s=e=>i(e)&&e.constructor==={}.constructor,a=e=>Boolean(e)&&"function"==typeof e[Symbol.iterator],l=e=>e&&"function"==typeof e[Symbol.asyncIterator],u=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,c=e=>"undefined"!=typeof Blob&&e instanceof Blob,d=e=>e&&"object"==typeof e&&e.isBuffer,f=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||i(e)&&o(e.tee)&&o(e.cancel)&&o(e.getReader))(e)||(e=>i(e)&&o(e.read)&&o(e.pipe)&&n(e.readable))(e)},35889:(e,t,r)=>{r.d(t,{z:()=>a});var n=r(54361),o=r(7386),i=r(61727),s=r(52291);async function a(e,t,r,a){let l,u;Array.isArray(t)||(0,o.C)(t)?(l=t,u=r):(l=[],u=t);const c=(0,i.b)(u);let d=e;return"string"==typeof e&&(d=await c(e)),(0,n.Lj)(e)&&(d=await c(e)),Array.isArray(l),await(0,s.Q)(d,l,u)}},52291:(e,t,r)=>{r.d(t,{Q:()=>q});var n=r(56369);class o{terminate(){}}var i=r(67625);const s=new Map;function a(e){(0,i.h)(e.source&&!e.url||!e.source&&e.url);let t=s.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return l((t=e,"try {\n  importScripts('"+t+"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}"));var t}(e.url),s.set(e.url,t)),e.source&&(t=l(e.source),s.set(e.source,t))),(0,i.h)(t),t}function l(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function u(e,t,r){void 0===t&&(t=!0);const n=r||new Set;if(e){if(c(e))n.add(e);else if(c(e.buffer))n.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"==typeof e)for(const o in e)u(e[o],t,n)}else;return void 0===r?Array.from(n):[]}function c(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}var d=r(25108);const f=()=>{};class p{static isSupported(){return"undefined"!=typeof Worker&&n.jU||void 0!==o&&!n.jU}constructor(e){this.terminated=!1,this._loadableURL="";const{name:t,source:r,url:o}=e;(0,i.h)(r||o),this.name=t,this.source=r,this.url=o,this.onMessage=f,this.onError=e=>d.log(e),this.worker=n.jU?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=f,this.onError=f,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||u(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker "+this.name+" from "+this.url+". ",e.message&&(t+=e.message+" in "),e.lineno&&(t+=":"+e.lineno+":"+e.colno),new Error(t)}_createBrowserWorker(){this._loadableURL=a({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>d.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./"+this.url;e=new o(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new o(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class h{constructor(e,t){this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){(0,i.h)(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){(0,i.h)(this.isRunning),this.isRunning=!1,this._reject(e)}}var y=r(25108);class g{static isSupported(){return p.isSupported()}constructor(e){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=()=>{},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e,t,r){void 0===t&&(t=(e,t,r)=>e.done(r)),void 0===r&&(r=(e,t)=>e.error(t));const n=new Promise((n=>(this.jobQueue.push({name:e,onMessage:t,onError:r,onStart:n}),this)));return this._startQueuedJob(),await n}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const n=new h(t.name,e);e.onMessage=e=>t.onMessage(n,e.type,e.payload),e.onError=e=>t.onError(n,e),t.onStart(n);try{await n.result}catch(r){y.error("Worker exception: "+r)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!n.jU||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new p({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return n.tq?this.maxMobileConcurrency:this.maxConcurrency}}const m={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class w{static isSupported(){return p.isSupported()}static getWorkerFarm(e){return void 0===e&&(e={}),w._workerFarm=w._workerFarm||new w({}),w._workerFarm.setProps(e),w._workerFarm}constructor(e){this.workerPools=new Map,this.props={...m},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:r,url:n}=e;let o=this.workerPools.get(t);return o||(o=new g({name:t,source:r,url:n}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}var b=r(34329);var v=r(25108);async function x(e,t,r,o,s){const a=e.id,l=function(e,t){void 0===t&&(t={});const r=t[e.id]||{},o=n.jU?e.id+"-worker.js":e.id+"-worker-node.js";let s=r.workerUrl;if(s||"compression"!==e.id||(s=t.workerUrl),"test"===t._workerType&&(s=n.jU?"modules/"+e.module+"/dist/"+o:"modules/"+e.module+"/src/workers/"+e.id+"-worker-node.ts"),!s){let t=e.version;"latest"===t&&(t=b.e);const r=t?"@"+t:"";s="https://unpkg.com/@loaders.gl/"+e.module+r+"/dist/"+o}return(0,i.h)(s),s}(e,r),u=w.getWorkerFarm(r).getWorkerPool({name:a,url:l});r=JSON.parse(JSON.stringify(r)),o=JSON.parse(JSON.stringify(o||{}));const c=await u.startJob("process-on-worker",_.bind(null,s));c.postMessage("process",{input:t,options:r,context:o});const d=await c.result;return await d.result}async function _(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:s,options:a}=n;try{const r=await e(s,a);t.postMessage("done",{id:i,result:r})}catch(o){const e=o instanceof Error?o.message:"unknown error";t.postMessage("error",{id:i,error:e})}break;default:v.warn("parse-with-worker unknown message "+r)}}var T=r(7386),k=r(54361),P=r(488),A=r(56525),S=r(78346);const j=262144;const I=262144;const C=1048576;var M=r(82282),E=r(7598);function U(e,t){return M.jU?async function*(e,t){const r=e.getReader();let n;try{for(;;){const e=n||r.read();null!=t&&t._streamReadAhead&&(n=r.read());const{done:o,value:i}=await e;if(o)return;yield(0,E.rJ)(i)}}catch(o){r.releaseLock()}}(e,t):async function*(e,t){for await(const r of e)yield(0,E.rJ)(r)}(e)}function R(e,t){if("string"==typeof e)return function*(e,t){const r=(null==t?void 0:t.chunkSize)||j;let n=0;const o=new TextEncoder;for(;n<e.length;){const t=Math.min(e.length-n,r),i=e.slice(n,n+t);n+=t,yield o.encode(i)}}(e,t);if(e instanceof ArrayBuffer)return function(e,t){return void 0===t&&(t={}),function*(){const{chunkSize:r=I}=t;let n=0;for(;n<e.byteLength;){const t=Math.min(e.byteLength-n,r),o=new ArrayBuffer(t),i=new Uint8Array(e,n,t);new Uint8Array(o).set(i),n+=t,yield o}}()}(e,t);if((0,k.Lj)(e))return async function*(e,t){const r=(null==t?void 0:t.chunkSize)||C;let n=0;for(;n<e.size;){const t=n+r,o=await e.slice(n,t).arrayBuffer();n=t,yield o}}(e,t);if((0,k.Os)(e))return U(e,t);if((0,k.Ew)(e)){return U(e.body,t)}throw new Error("makeIterator")}var L=r(46832);const V="Cannot convert supplied data type";async function O(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||n)return function(e,t,r){if(t.text&&"string"==typeof e)return e;if((0,k.zH)(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const n=e.byteLength||e.length;return 0===e.byteOffset&&n===r.byteLength||(r=r.slice(e.byteOffset,e.byteOffset+n)),r}throw new Error(V)}(e,t);if((0,k.Lj)(e)&&(e=await(0,L.L1)(e)),(0,k.Ew)(e)){const r=e;return await(0,L.mm)(r),t.binary?await r.arrayBuffer():await r.text()}if((0,k.Os)(e)&&(e=R(e,r)),(0,k.TW)(e)||(0,k.D0)(e))return(0,S.GZ)(e);throw new Error(V)}var F=r(61727),B=r(27346),N=r(80072);var z=r(86865),D=r(25939);async function q(e,t,r,o){!t||Array.isArray(t)||(0,T.C)(t)||(o=void 0,r=t,t=void 0),e=await e,r=r||{};const s=(0,z.vM)(e),a=function(e,t){if(e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...e]:e}return r&&r.length?r:void 0}(t,o),l=await(0,D.A)(e,a,r);return l?(o=function(e,t,r){if(r)return r;const n={fetch:(0,F.b)(t,e),...e};if(n.url){const e=(0,B.k)(n.url);n.baseUrl=e,n.queryString=(0,B.S)(n.url),n.filename=N.vB(e),n.baseUrl=N.XX(e)}return Array.isArray(n.loaders)||(n.loaders=null),n}({url:s,_parse:q,loaders:a},r=(0,P.GR)(r,l,a,s),o||null),await async function(e,t,r,o){if(function(e,t){void 0===t&&(t=b.q),(0,i.h)(e,"no worker provided");const r=e.version}(e),r=(0,A.N)(e.options,r),(0,k.Ew)(t)){const e=t,{ok:r,redirected:n,status:i,statusText:s,type:a,url:l}=e,u=Object.fromEntries(e.headers.entries());o.response={headers:u,ok:r,redirected:n,status:i,statusText:s,type:a,url:l}}t=await O(t,e,r);const s=e;if(s.parseTextSync&&"string"==typeof t)return s.parseTextSync(t,r,o);if(function(e,t){return!!w.isSupported()&&!!(n.jU||null!=t&&t._nodeWorkers)&&e.worker&&(null==t?void 0:t.worker)}(e,r))return await x(e,t,r,o,q);if(s.parseText&&"string"==typeof t)return await s.parseText(t,r,o);if(s.parse)return await s.parse(t,r,o);throw(0,i.h)(!s.parseSync),new Error(e.id+" loader - no parser found and worker is disabled")}(l,e,r,o)):null}},92859:(e,t,r)=>{r.d(t,{fh:()=>s,kO:()=>a});var n=r(7386),o=r(488);const i=()=>{const e=(0,o.rx)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function s(e){const t=i();e=Array.isArray(e)?e:[e];for(const r of e){const e=(0,n.T)(r);t.find((t=>e===t))||t.unshift(e)}}function a(){return i()}},25939:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(80072),o=r(28490),i=r(7386);const s=new(r(18686).Z)({id:"loaders.gl"});var a=r(86865),l=r(92859),u=r(54361),c=r(27346);const d=/\.([^.]+)$/;async function f(e,t,r,n){if(void 0===t&&(t=[]),!h(e))return null;let o=p(e,t,{...r,nothrow:!0},n);if(o)return o;if((0,u.Lj)(e)&&(o=p(e=await e.slice(0,10).arrayBuffer(),t,r,n)),!(o||null!=r&&r.nothrow))throw new Error(y(e));return o}function p(e,t,r,n){if(void 0===t&&(t=[]),!h(e))return null;if(t&&!Array.isArray(t))return(0,i.T)(t);let o=[];t&&(o=o.concat(t)),null!=r&&r.ignoreRegisteredLoaders||o.push(...(0,l.kO)()),function(e){for(const t of e)(0,i.T)(t)}(o);const u=function(e,t,r,n){const o=(0,a.vM)(e),i=(0,a.Ry)(e),l=(0,c.k)(o)||(null==n?void 0:n.url);let u=null,f="";null!=r&&r.mimeType&&(u=g(t,null==r?void 0:r.mimeType),f="match forced by supplied MIME type "+(null==r?void 0:r.mimeType));u=u||function(e,t){const r=t&&d.exec(t),n=r&&r[1];return n?function(e,t){t=t.toLowerCase();for(const r of e)for(const e of r.extensions)if(e.toLowerCase()===t)return r;return null}(e,n):null}(t,l),f=f||(u?"matched url "+l:""),u=u||g(t,i),f=f||(u?"matched MIME type "+i:""),u=u||function(e,t){if(!t)return null;for(const r of e)if("string"==typeof t){if(m(t,r))return r}else if(ArrayBuffer.isView(t)){if(w(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer){if(w(t,0,r))return r}return null}(t,e),f=f||(u?"matched initial data "+b(e):""),null!=r&&r.fallbackMimeType&&(u=u||g(t,null==r?void 0:r.fallbackMimeType),f=f||(u?"matched fallback MIME type "+i:""));var p;f&&s.log(1,"selectLoader selected "+(null==(p=u)?void 0:p.name)+": "+f+".");return u}(e,o,r,n);if(!(u||null!=r&&r.nothrow))throw new Error(y(e));return u}function h(e){return!(e instanceof Response&&204===e.status)}function y(e){const t=(0,a.vM)(e),r=(0,a.Ry)(e);let o="No valid loader found (";o+=t?n.vB(t)+", ":"no url provided, ",o+="MIME type: "+(r?'"'+r+'"':"not provided")+", ";const i=e?b(e):"";return o+=i?' first bytes: "'+i+'"':"first bytes: not available",o+=")",o}function g(e,t){for(const r of e){if(r.mimeTypes&&r.mimeTypes.includes(t))return r;if(t==="application/x."+r.id)return r}return null}function m(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function w(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some((r=>function(e,t,r,n){if(n instanceof ArrayBuffer)return(0,o.Xq)(n,e,n.byteLength);switch(typeof n){case"function":return n(e);case"string":return n===v(e,t,n.length);default:return!1}}(e,t,0,r)))}function b(e,t){if(void 0===t&&(t=5),"string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return v(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return v(e,0,t)}return""}function v(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let o="";for(let i=0;i<r;i++)o+=String.fromCharCode(n.getUint8(t+i));return o}},97737:(e,t,r)=>{r.d(t,{dc:()=>i});var n=r(92730),o=r(46832);async function i(e,t){if("string"==typeof e){const o=(0,n.i3)(e);var r,i;if(function(e){return!function(e){return e.startsWith("http:")||e.startsWith("https:")}(e)&&!function(e){return e.startsWith("data:")}(e)}(o))if(null!=(r=globalThis.loaders)&&r.fetchNode)return null==(i=globalThis.loaders)?void 0:i.fetchNode(o,t);return await fetch(o,t)}return await(0,o.L1)(e)}},61727:(e,t,r)=>{r.d(t,{b:()=>s});var n=r(54361),o=r(97737),i=r(488);function s(e,t){const r=(0,i.pm)(),s=e||r;return"function"==typeof s.fetch?s.fetch:(0,n.Kn)(s.fetch)?e=>(0,o.dc)(e,s.fetch):null!=t&&t.fetch?null==t?void 0:t.fetch:o.dc}},7386:(e,t,r)=>{r.d(t,{C:()=>o,T:()=>i});var n=r(61573);function o(e){var t;if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(null==(t=e)?void 0:t.extensions)}function i(e){var t,r;let i;return(0,n.h)(e,"null loader"),(0,n.h)(o(e),"invalid loader"),Array.isArray(e)&&(i=e[1],e=e[0],e={...e,options:{...e.options,...i}}),(null!=(t=e)&&t.parseTextSync||null!=(r=e)&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}},488:(e,t,r)=>{r.d(t,{pm:()=>f,rx:()=>d,GR:()=>p});var n=r(54361),o=r(18686),i=r(25108);const s=new o.Z({id:"loaders.gl"});class a{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var l=r(82282);const u={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){this.console=i}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.error.bind(this.console,...t)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:l.jU,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},c={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function d(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}function f(){const e=d();return e.globalOptions=e.globalOptions||{...u},e.globalOptions}function p(e,t,r,n){return r=r||[],function(e,t){h(e,null,u,c,t);for(const r of t){const n=e&&e[r.id]||{},o=r.options&&r.options[r.id]||{},i=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};h(n,r.id,o,i,t)}}(e,r=Array.isArray(r)?r:[r]),g(t,e,n)}function h(e,t,r,o,i){const a=t||"Top level",l=t?t+".":"";for(const u in e){const c=!t&&(0,n.Kn)(e[u]);if(!(u in r)&&!("baseUri"===u&&!t)&&!("workerUrl"===u&&t))if(u in o)s.warn(a+" loader option '"+l+u+"' no longer supported, use '"+o[u]+"'")();else if(!c){const e=y(u,i);s.warn(a+" loader option '"+l+u+"' not recognized. "+e)()}}}function y(e,t){const r=e.toLowerCase();let n="";for(const o of t)for(const t in o.options){if(e===t)return"Did you mean '"+o.id+"."+t+"'?";const i=t.toLowerCase();(r.startsWith(i)||i.startsWith(r))&&(n=n||"Did you mean '"+o.id+"."+t+"'?")}return n}function g(e,t,r){const n={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(n,r),null===n.log&&(n.log=new a),m(n,f()),m(n,t),n}function m(e,t){for(const r in t)if(r in t){const o=t[r];(0,n.Ss)(o)&&(0,n.Ss)(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}},86865:(e,t,r)=>{r.d(t,{Cu:()=>c,Ry:()=>u,vM:()=>l});var n=r(54361);const o=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,i=/^([-\w.]+\/[-\w.+]+)/;function s(e){const t=o.exec(e);return t?t[1]:""}var a=r(27346);function l(e){if((0,n.Ew)(e)){return e.url}if((0,n.Lj)(e)){return e.name||""}return"string"==typeof e?e:""}function u(e){if((0,n.Ew)(e)){const t=e,r=t.headers.get("content-type")||"",n=(0,a.k)(t.url);return function(e){const t=i.exec(e);return t?t[1]:e}(r)||s(n)}if((0,n.Lj)(e)){return e.type||""}return"string"==typeof e?s(e):""}function c(e){if((0,n.Ew)(e)){return e.headers["content-length"]||-1}if((0,n.Lj)(e)){return e.size}return"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}},46832:(e,t,r)=>{r.d(t,{L1:()=>i,mm:()=>s});var n=r(54361),o=r(86865);async function i(e){if((0,n.Ew)(e))return e;const t={},r=(0,o.Cu)(e);r>=0&&(t["content-length"]=String(r));const i=(0,o.vM)(e),s=(0,o.Ry)(e);s&&(t["content-type"]=s);const a=await async function(e){const t=5;if("string"==typeof e)return"data:,"+e.slice(0,t);if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const r=new FileReader;r.onload=t=>{var r;return e(null==t||null==(r=t.target)?void 0:r.result)},r.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){return"data:base64,"+function(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}(e.slice(0,t))}return null}(e);a&&(t["x-first-bytes"]=a),"string"==typeof e&&(e=(new TextEncoder).encode(e));const l=new Response(e,{headers:t});return Object.defineProperty(l,"url",{value:i}),l}async function s(e){if(!e.ok){const t=await async function(e){let t="Failed to fetch resource "+e.url+" ("+e.status+"): ";try{const r=e.headers.get("Content-Type");let n=e.statusText;null!=r&&r.includes("application/json")&&(n+=" "+await e.text()),t+=n,t=t.length>60?t.slice(0,60)+"...":t}catch(r){}return t}(e);throw new Error(t)}}},27346:(e,t,r)=>{r.d(t,{S:()=>o,k:()=>i});const n=/\?.*/;function o(e){const t=e.match(n);return t&&t[0]}function i(e){return e.replace(n,"")}},12057:(e,t,r)=>{r.d(t,{E:()=>o});var n=r(89513);function o(e,t,r){const n=i(e),o=Object.keys(n).filter((e=>n[e]!==Array));return function(e,t,r){const{pointPositionsCount:n,pointFeaturesCount:o,linePositionsCount:i,linePathsCount:u,lineFeaturesCount:d,polygonPositionsCount:p,polygonObjectsCount:h,polygonRingsCount:y,polygonFeaturesCount:g,propArrayTypes:m,coordLength:w}=t,{numericPropKeys:b=[],PositionDataType:v=Float32Array,triangulate:x=!0}=r,_=e[0]&&"id"in e[0],T=e.length>65535?Uint32Array:Uint16Array,k={type:"Point",positions:new v(n*w),globalFeatureIds:new T(n),featureIds:o>65535?new Uint32Array(n):new Uint16Array(n),numericProps:{},properties:[],fields:[]},P={type:"LineString",pathIndices:i>65535?new Uint32Array(u+1):new Uint16Array(u+1),positions:new v(i*w),globalFeatureIds:new T(i),featureIds:d>65535?new Uint32Array(i):new Uint16Array(i),numericProps:{},properties:[],fields:[]},A={type:"Polygon",polygonIndices:p>65535?new Uint32Array(h+1):new Uint16Array(h+1),primitivePolygonIndices:p>65535?new Uint32Array(y+1):new Uint16Array(y+1),positions:new v(p*w),globalFeatureIds:new T(p),featureIds:g>65535?new Uint32Array(p):new Uint16Array(p),numericProps:{},properties:[],fields:[]};x&&(A.triangles=[]);for(const s of[k,P,A])for(const e of b){const t=m[e];s.numericProps[e]=new t(s.positions.length/w)}P.pathIndices[u]=i,A.polygonIndices[h]=p,A.primitivePolygonIndices[y]=p;const S={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0};for(const c of e){const e=c.geometry,t=c.properties||{};switch(e.type){case"Point":s(e,k,S,w,t),k.properties.push(f(t,b)),_&&k.fields.push({id:c.id}),S.pointFeature++;break;case"LineString":a(e,P,S,w,t),P.properties.push(f(t,b)),_&&P.fields.push({id:c.id}),S.lineFeature++;break;case"Polygon":l(e,A,S,w,t),A.properties.push(f(t,b)),_&&A.fields.push({id:c.id}),S.polygonFeature++;break;default:throw new Error("Invalid geometry type")}S.feature++}return function(e,t,r,n){const o={shape:"binary-feature-collection",points:{...e,positions:{value:e.positions,size:n},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:c(e.numericProps,1)},lines:{...t,positions:{value:t.positions,size:n},pathIndices:{value:t.pathIndices,size:1},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:c(t.numericProps,1)},polygons:{...r,positions:{value:r.positions,size:n},polygonIndices:{value:r.polygonIndices,size:1},primitivePolygonIndices:{value:r.primitivePolygonIndices,size:1},globalFeatureIds:{value:r.globalFeatureIds,size:1},featureIds:{value:r.featureIds,size:1},numericProps:c(r.numericProps,1)}};o.polygons&&r.triangles&&(o.polygons.triangles={value:new Uint32Array(r.triangles),size:1});return o}(k,P,A,w)}(e,{propArrayTypes:n,...t},{numericPropKeys:r&&r.numericPropKeys||o,PositionDataType:r?r.PositionDataType:Float32Array,triangulate:!r||r.triangulate})}function i(e){const t={};for(const r of e)if(r.properties)for(const e in r.properties){const n=r.properties[e];t[e]=p(n,t[e])}return t}function s(e,t,r,n,o){t.positions.set(e.data,r.pointPosition*n);const i=e.data.length/n;d(t,o,r.pointPosition,i),t.globalFeatureIds.fill(r.feature,r.pointPosition,r.pointPosition+i),t.featureIds.fill(r.pointFeature,r.pointPosition,r.pointPosition+i),r.pointPosition+=i}function a(e,t,r,n,o){t.positions.set(e.data,r.linePosition*n);const i=e.data.length/n;d(t,o,r.linePosition,i),t.globalFeatureIds.fill(r.feature,r.linePosition,r.linePosition+i),t.featureIds.fill(r.lineFeature,r.linePosition,r.linePosition+i);for(let s=0,a=e.indices.length;s<a;++s){const o=e.indices[s],i=s===a-1?e.data.length:e.indices[s+1];t.pathIndices[r.linePath++]=r.linePosition,r.linePosition+=(i-o)/n}}function l(e,t,r,n,o){t.positions.set(e.data,r.polygonPosition*n);const i=e.data.length/n;d(t,o,r.polygonPosition,i),t.globalFeatureIds.fill(r.feature,r.polygonPosition,r.polygonPosition+i),t.featureIds.fill(r.polygonFeature,r.polygonPosition,r.polygonPosition+i);for(let s=0,a=e.indices.length;s<a;++s){const o=r.polygonPosition;t.polygonIndices[r.polygonObject++]=o;const i=e.areas[s],a=e.indices[s],l=e.indices[s+1];for(let s=0,u=a.length;s<u;++s){const o=a[s],i=s===u-1?void 0===l?e.data.length:l[0]:a[s+1];t.primitivePolygonIndices[r.polygonRing++]=r.polygonPosition,r.polygonPosition+=(i-o)/n}u(t,i,a,{startPosition:o,endPosition:r.polygonPosition,coordLength:n})}}function u(e,t,r,o){let{startPosition:i,endPosition:s,coordLength:a}=o;if(!e.triangles)return;const l=i*a,u=s*a,c=e.positions.subarray(l,u),d=r[0],f=r.slice(1).map((e=>(e-d)/a)),p=(0,n.OT)(c,f,a,t);for(let n=0,h=p.length;n<h;++n)e.triangles.push(i+p[n])}function c(e,t){const r={};for(const n in e)r[n]={value:e[n],size:t};return r}function d(e,t,r,n){for(const o in e.numericProps)if(o in t){const i=t[o];e.numericProps[o].fill(i,r,r+n)}}function f(e,t){const r={};for(const n in e)t.includes(n)||(r[n]=e[n]);return r}function p(e,t){return t!==Array&&Number.isFinite(e)?t===Float64Array||Math.fround(e)!==e?Float64Array:Float32Array:Array}},48093:(e,t,r)=>{r.d(t,{S:()=>T});const n="undefined"!=typeof __VERSION__?__VERSION__:"latest";var o,i=r(61573),s=r(82282);const a=null==(o=globalThis.loaders)?void 0:o.parseImageNode,l="undefined"!=typeof Image,u="undefined"!=typeof ImageBitmap,c=Boolean(a),d=!!s.jU||c;var f=r(74885);const p=/^data:image\/svg\+xml/,h=/\.svg((\?|#).*)?$/;function y(e){return e&&(p.test(e)||h.test(e))}function g(e,t){if(y(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function m(e,t,r){const n=function(e,t){if(y(t)){let t=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(r){throw new Error(r.message)}return"data:image/svg+xml;base64,"+btoa(t)}return g(e,t)}(e,r),o=self.URL||self.webkitURL,i="string"!=typeof n&&o.createObjectURL(n);try{return await async function(e,t){const r=new Image;if(r.src=e,t.image&&t.image.decode&&r.decode)return await r.decode(),r;return await new Promise(((e,t)=>{try{r.onload=()=>e(r),r.onerror=e=>{const r=e instanceof Error?e.message:"error";t(new Error(r))}}catch(n){t(n)}}))}(i||n,t)}finally{i&&o.revokeObjectURL(i)}}var w=r(25108);const b={};let v=!0;async function x(e,t,r){let n;if(y(r)){n=await m(e,t,r)}else n=g(e,r);const o=t&&t.imagebitmap;return await async function(e,t){void 0===t&&(t=null);!function(e){for(const t in e||b)return!1;return!0}(t)&&v||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(r){w.warn(r),v=!1}return await createImageBitmap(e)}(n,o)}var _=r(98746);const T={id:"image",module:"images",name:"Images",version:n,mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(e,t,r){const n=((t=t||{}).image||{}).type||"auto",{url:o}=r||{};let s;switch(function(e){switch(e){case"auto":case"data":return function(){if(u)return"imagebitmap";if(l)return"image";if(d)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return u||l||d;case"imagebitmap":return u;case"image":return l;case"data":return d;default:throw new Error("@loaders.gl/images: image "+e+" not supported in this environment")}}(e),e}}(n)){case"imagebitmap":s=await x(e,t,o);break;case"image":s=await m(e,t,o);break;case"data":s=await async function(e,t){var r;const{mimeType:n}=(0,_.I)(e)||{},o=null==(r=globalThis.loaders)?void 0:r.parseImageNode;return(0,i.h)(o),await o(e,n)}(e);break;default:(0,i.h)(!1)}return"data"===n&&(s=(0,f.n$)(s)),s},tests:[e=>Boolean((0,_.I)(new DataView(e)))],options:{image:{type:"auto",decode:!0}}}},98746:(e,t,r)=>{function n(e){return function(e,t,r){void 0===r&&(r=0);const n=(o=t,[...o].map((e=>e.charCodeAt(0))));var o;for(let i=0;i<n.length;++i)if(n[i]!==e[i+r])return!1;return!0}(e,"ftyp",4)?0==(96&e[8])?null:function(e){switch((t=e,r=8,n=12,String.fromCharCode(...t.slice(r,n))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var t,r,n}(e):null}r.d(t,{I:()=>s});const o=!1,i=!0;function s(e){const t=a(e);return function(e){const t=a(e),r=t.byteLength>=24&&2303741511===t.getUint32(0,o);if(!r)return null;return{mimeType:"image/png",width:t.getUint32(16,o),height:t.getUint32(20,o)}}(t)||function(e){const t=a(e),r=t.byteLength>=3&&65496===t.getUint16(0,o)&&255===t.getUint8(2);if(!r)return null;const{tableMarkers:n,sofMarkers:i}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let s=2;for(;s+9<t.byteLength;){const e=t.getUint16(s,o);if(i.has(e))return{mimeType:"image/jpeg",height:t.getUint16(s+5,o),width:t.getUint16(s+7,o)};if(!n.has(e))return null;s+=2,s+=t.getUint16(s,o)}return null}(t)||function(e){const t=a(e),r=t.byteLength>=10&&1195984440===t.getUint32(0,o);if(!r)return null;return{mimeType:"image/gif",width:t.getUint16(6,i),height:t.getUint16(8,i)}}(t)||function(e){const t=a(e),r=t.byteLength>=14&&16973===t.getUint16(0,o)&&t.getUint32(2,i)===t.byteLength;if(!r)return null;return{mimeType:"image/bmp",width:t.getUint32(18,i),height:t.getUint32(22,i)}}(t)||function(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),r=n(t);if(!r)return null;return{mimeType:r.mimeType,width:0,height:0}}(t)}function a(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}},74885:(e,t,r)=>{function n(e){const t=i(e);if(!t)throw new Error("Not an image");return t}function o(e){switch(n(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function i(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"==typeof e&&e.data&&e.width&&e.height?"data":null}r.d(t,{n$:()=>o})},28490:(e,t,r)=>{function n(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),o=new Uint8Array(t);for(let i=0;i<n.length;++i)if(n[i]!==o[i])return!1;return!0}function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){const t=e.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),r=t.reduce(((e,t)=>e+t.byteLength),0),n=new Uint8Array(r);let o=0;for(const i of t)n.set(i,o),o+=i.byteLength;return n.buffer}(t)}function i(e,t,r){const n=void 0!==r?new Uint8Array(e).subarray(t,t+r):new Uint8Array(e).subarray(t);return new Uint8Array(n).buffer}r.d(t,{JY:()=>o,Xq:()=>n,qv:()=>i})},7598:(e,t,r)=>{function n(e){if((t=e)&&"object"==typeof t&&t.isBuffer)return e;var t;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}r.d(t,{rJ:()=>n})},61573:(e,t,r)=>{function n(e,t){if(!e)throw new Error(t||"loader assertion failed.")}r.d(t,{h:()=>n})},82282:(e,t,r)=>{r.d(t,{jU:()=>o});var n=r(34155);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==r.g&&r.g,"undefined"!=typeof document&&document;const o=Boolean("object"!=typeof n||"[object process]"!==String(n)||n.browser),i=void 0!==n&&n.version&&/v([0-9]*)/.exec(n.version);i&&parseFloat(i[1])},78346:(e,t,r)=>{r.d(t,{Ed:()=>o,GZ:()=>i});var n=r(28490);async function o(e,t){for(;;){const{done:r,value:n}=await e.next();if(r)return void e.return();if(t(n))return}}async function i(e){const t=[];for await(const r of e)t.push(r);return(0,n.JY)(...t)}},56525:(e,t,r)=>{function n(e,t){return o(e||{},t)}function o(e,t,r){if(void 0===r&&(r=0),r>3)return t;const n={...e};for(const[i,s]of Object.entries(t))s&&"object"==typeof s&&!Array.isArray(s)?n[i]=o(n[i]||{},t[i],r+1):n[i]=t[i];return n}r.d(t,{N:()=>n})},92730:(e,t,r)=>{r.d(t,{i3:()=>i});let n="";const o={};function i(e){for(const t in o)if(e.startsWith(t)){const r=o[t];e=e.replace(t,r)}return e.startsWith("http://")||e.startsWith("https://")||(e=""+n+e),e}},80072:(e,t,r)=>{r.d(t,{XX:()=>s,vB:()=>i,DB:()=>a});var n=r(34155);function o(){var e;if(void 0!==n&&void 0!==n.cwd)return n.cwd();const t=null==(e=window.location)?void 0:e.pathname;return(null==t?void 0:t.slice(0,t.lastIndexOf("/")+1))||""}function i(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function s(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}function a(){const e=[];for(let o=0;o<arguments.length;o++)e[o]=o<0||arguments.length<=o?void 0:arguments[o];let t,r="",n=!1;for(let i=e.length-1;i>=-1&&!n;i--){let s;i>=0?s=e[i]:(void 0===t&&(t=o()),s=t),0!==s.length&&(r=s+"/"+r,n=s.charCodeAt(0)===l)}return r=function(e,t){let r,n="",o=-1,i=0,s=!1;for(let a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(r===l)break;r=l}if(r===l){if(o===a-1||1===i);else if(o!==a-1&&2===i){if(n.length<2||!s||n.charCodeAt(n.length-1)!==u||n.charCodeAt(n.length-2)!==u)if(n.length>2){const e=n.length-1;let t=e;for(;t>=0&&n.charCodeAt(t)!==l;--t);if(t!==e){n=-1===t?"":n.slice(0,t),o=a,i=0,s=!1;continue}}else if(2===n.length||1===n.length){n="",o=a,i=0,s=!1;continue}t&&(n.length>0?n+="/..":n="..",s=!0)}else{const t=e.slice(o+1,a);n.length>0?n+="/"+t:n=t,s=!1}o=a,i=0}else r===u&&-1!==i?++i:i=-1}return n}(r,!n),n?"/"+r:r.length>0?r:"."}const l=47,u=46},41868:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(8700);const o={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class i{constructor(e){void 0===e&&(e={}),this.activeRequestCount=0,this.requestQueue=[],this.requestMap=new Map,this.deferredUpdate=null,this.props={...o,...e},this.stats=new n.jk({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(e,t){if(void 0===t&&(t=()=>0),!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const r={handle:e,priority:0,getPriority:t},n=new Promise((e=>(r.resolve=e,r)));return this.requestQueue.push(r),this.requestMap.set(e,n),this._issueNewRequests(),n}_issueRequest(e){const{handle:t,resolve:r}=e;let n=!1;const o=()=>{n||(n=!0,this.requestMap.delete(t),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,r?r({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(let t=0;t<e;++t){const e=this.requestQueue.shift();e&&this._issueRequest(e)}}}_updateAllRequests(){const e=this.requestQueue;for(let t=0;t<e.length;++t){const r=e[t];this._updateRequest(r)||(e.splice(t,1),this.requestMap.delete(r.handle),t--)}e.sort(((e,t)=>e.priority-t.priority))}_updateRequest(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}},21970:(e,t,r)=>{r.d(t,{o:()=>n});class n{constructor(e){this._needsRefresh=!0,this.props={...e},this.loadOptions={...e.loadOptions},this.fetch=function(e){const t=null==e?void 0:e.fetch;if(t&&"function"==typeof t)return(e,r)=>t(e,r);const r=null==e?void 0:e.fetch;if(r&&"function"!=typeof r)return e=>fetch(e,r);return e=>fetch(e)}(this.loadOptions)}setProps(e){this.props=Object.assign(this.props,e),this.setNeedsRefresh()}setNeedsRefresh(){this._needsRefresh=!0}getNeedsRefresh(e){void 0===e&&(e=!0);const t=this._needsRefresh;return e&&(this._needsRefresh=!1),t}}},67625:(e,t,r)=>{function n(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}r.d(t,{h:()=>n})},56369:(e,t,r)=>{r.d(t,{hJ:()=>i,jU:()=>o,tq:()=>s});var n=r(34155);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==r.g&&r.g,"undefined"!=typeof document&&document;const o="object"!=typeof n||"[object process]"!==String(n)||n.browser,i="function"==typeof importScripts,s="undefined"!=typeof window&&void 0!==window.orientation,a=void 0!==n&&n.version&&/v([0-9]*)/.exec(n.version);a&&parseFloat(a[1])},34329:(e,t,r)=>{r.d(t,{e:()=>o,q:()=>i});var n=r(25108);const o="latest";const i=(null!=(s=globalThis._loadersgl_)&&s.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},"undefined"==typeof __VERSION__?(n.warn("loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN."),globalThis._loadersgl_.version=o):globalThis._loadersgl_.version=__VERSION__),globalThis._loadersgl_.version);var s}}]);