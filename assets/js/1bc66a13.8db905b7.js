(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[9592],{37742:(e,t,s)=>{"use strict";s.r(t),s.d(t,{assets:()=>K,contentTitle:()=>L,default:()=>X,frontMatter:()=>P,metadata:()=>Z,toc:()=>N});var n=s(87462),i=s(67294),r=s(3905),o=(s(73935),s(33545)),a=s(24613),c=s.n(a),l=s(49835),u=s(8977),d=s(77045),h=s(66883),A=s(81547),B=s(33562),f=s(45137),C=s(5976),m=s(19521),p=s(45697),g=s.n(p),_=s(47084),y=s.n(_);const E={"Base Map: Light":"https://basemaps.cartocdn.com/gl/positron-nolabels-gl-style/style.json","Base Map: Dark":"https://basemaps.cartocdn.com/gl/dark-matter-nolabels-gl-style/style.json"},b=E["Base Map: Dark"],T=m.ZP.div.withConfig({displayName:"control-panel__Container",componentId:"sc-10jy2lg-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;max-width:280px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;"]),M=m.ZP.select.withConfig({displayName:"control-panel__DropDown",componentId:"sc-10jy2lg-1"})(["margin-bottom:12px;"]),D=m.ZP.select.withConfig({displayName:"control-panel__TilesetDropDown",componentId:"sc-10jy2lg-2"})(["margin-bottom:12px;font-weight:800;font-size:16px;"]),S=m.ZP.div.withConfig({displayName:"control-panel__InfoContainer",componentId:"sc-10jy2lg-3"})(["margin-top:12px;text-align:center;border-style:groove;"]),R=m.ZP.div.withConfig({displayName:"control-panel__Description",componentId:"sc-10jy2lg-4"})(["margin-top:6px;font-size:12px;color:#555;line-height:1.4em;"]),G={category:g().string.isRequired,name:g().string.isRequired,data:g().object.isRequired,tileset:g().object,mapStyles:g().object,selectedMapStyle:g().string,onExampleChange:g().func,onMapStyleChange:g().func,children:g().node};class I extends i.PureComponent{_renderByCategories(){const{category:e,name:t,onExampleChange:s,data:n}=this.props,r=Object.keys(n),o=e+"."+t;return i.createElement(D,{value:o,onChange:e=>{const t=e.target.value,[i,r]=t.split("."),o=n[i].examples;this.setState({category:i,name:r,example:o[r]}),s({category:i,name:r,example:o[r]})}},r.map(((e,t)=>{const s=n[e].examples;return i.createElement("optgroup",{key:t,label:n[e].name},Object.keys(s).map(((t,s)=>{const n=e+"."+t;return i.createElement("option",{key:s,value:n},t)})))})))}_renderMapStyles(){const{onMapStyleChange:e,mapStyles:t=E,selectedMapStyle:s}=this.props;return i.createElement(M,{value:s,onChange:t=>{const s=t.target.value;e({selectedMapStyle:s})}},Object.keys(t).map((e=>i.createElement("option",{key:e,value:t[e]},e))))}_renderInfo(){if(!this.props.tileset)return null;const{description:e,credits:{attributions:t}}=this.props.tileset||{};return t&&0!==t.length&&e?i.createElement(S,null,Boolean(t&&t.length)&&i.createElement("b",null,"Tileset Credentials"),Boolean(t&&t.length)&&t.map((e=>i.createElement("div",{key:e.html,dangerouslySetInnerHTML:{__html:e.html}}))),e&&i.createElement(R,{dangerouslySetInnerHTML:{__html:y()(e)}})):null}render(){return i.createElement(T,null,this._renderByCategories(),this._renderMapStyles(),this.props.children,this._renderInfo())}}I.propTypes=G,I.defaultProps={droppedFile:null,onChange:()=>{}};const F="https://raw.githubusercontent.com/visgl/deck.gl-data/master",v="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI3NjEwMjA4Ni00YmVkLTQyMjgtYjRmZS1lY2M3ZWFiMmFmNTYiLCJpZCI6MjYxMzMsImlhdCI6MTY3NTM2ODY4NX0.chGkGL6DkDNv5wYJQDMzWIvi9iDoVa27dgng_5ARDmo",w="https://raw.githubusercontent.com/visgl/loaders.gl/master",O=w+"/modules/3d-tiles/test/data/index.json",H={ion:{name:"Cesium ION",examples:{"Melbourne (PointCloud)":{ionAssetId:43978,ionAccessToken:v,maximumScreenSpaceError:4},"Melbourne (Photogrammetry)":{ionAssetId:69380,ionAccessToken:v,maximumScreenSpaceError:4},"Montreal (PointCloud)":{ionAssetId:28945,ionAccessToken:v,maximumScreenSpaceError:8},"Mount St Helens (PointCloud)":{ionAssetId:33301,ionAccessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxN2NhMzkwYi0zNWM4LTRjNTYtYWE3Mi1jMDAxYzhlOGVmNTAiLCJpZCI6OTYxOSwic2NvcGVzIjpbImFzbCIsImFzciIsImFzdyIsImdjIl0sImlhdCI6MTU2MjE4MTMxM30.OkgVr6NaKYxabUMIGqPOYFe0V5JifXLVLfpae63x-tA",maximumScreenSpaceError:4},"Phillipines (B3DM)":{ionAssetId:34014,ionAccessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0MTQ0NTNiOC0wNzlmLTQ1ZGEtYjM3Yi05ZmJlY2FiMmRjYWMiLCJpZCI6MTMxNTEsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NjI2OTQ3NTh9.tlqEVzzO25Itcla4jD17yywNFvAVM-aNVduzF6ss-1g"},"Phillipines (PointCloud)":{ionAssetId:34013,ionAccessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0MTQ0NTNiOC0wNzlmLTQ1ZGEtYjM3Yi05ZmJlY2FiMmRjYWMiLCJpZCI6MTMxNTEsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NjI2OTQ3NTh9.tlqEVzzO25Itcla4jD17yywNFvAVM-aNVduzF6ss-1g"}}},nearmap:{name:"nearmap Photogrammetry Tilesets",examples:{"Las Vegas":{ionAssetId:44865,ionAccessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwOTBkYTA1ZS03NGM5LTQyNTEtOTViOS1hZDFmNDZjZGQ3YTEiLCJpZCI6NDQsInNjb3BlcyI6WyJhc3IiXSwiYXNzZXRzIjpbNDQ4NjVdLCJpYXQiOjE1Njk0MTcwNjh9.zrWE65u2u-TYyTSRKhDl9-yDYrC_qxiJQ-tZFCgMbt0"},"New York":{ionAssetId:7162,ionAccessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzMGY4ODczYy1mNTk4LTRiMDUtYmIxYy0xZWYwOWZmMGY4NjQiLCJpZCI6NDQsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJhc3NldHMiOlsxLDIsMyw0LDYxOTMsNjI3Myw3MTYyLDczNTMsNzE0Ml0sImlhdCI6MTU0MTYxODM0NX0.lWnGs9ySXO4QK3HagcMsDpZ8L01DpmUDQm38-2QAQuE"}}},github:{name:"Others",examples:{"555 Market - Point Cloud (Github Pages)":{tilesetUrl:F+"/3d-tiles/555Market/tileset.json"},"Royal Exhibition Building (Github Pages)":{tilesetUrl:F+"/3d-tiles/RoyalExhibitionBuilding/tileset.json"}}}};async function J(){const e=await fetch(O),t=await e.json();return delete t.Geometry,delete t.Vector,delete t.Composite,function(e){for(const t of Object.values(e))for(const e of Object.values(t.examples))e.tilesetUrl=w+"/"+e.path+"/"+e.tileset}(t),{...t,...H,custom:{name:"Custom",examples:{"Custom Tileset":{},"ION Tileset":{}}}}}const x={latitude:40.04248558075302,longitude:-75.61213987669433,pitch:45,maxPitch:60,bearing:0,minZoom:2,maxZoom:30,zoom:3};class U extends i.PureComponent{constructor(e){super(e),this.state={viewState:x,tileset:null,selectedMapStyle:b,droppedFile:null,examplesByCategory:null,selectedExample:null,category:"ion",name:"Melbourne (PointCloud)"},this._deckRef=null,this._onTilesetLoad=this._onTilesetLoad.bind(this),this._onTilesetChange=this._onTilesetChange.bind(this)}componentDidMount(){const e=this._statsWidgetContainer;this._memWidget=new B.Z(l.lR.get("Memory Usage"),{framesPerUpdate:1,formatters:{"GPU Memory":"memory","Buffer Memory":"memory","Renderbuffer Memory":"memory","Texture Memory":"memory"},container:e}),this._tilesetStatsWidget=new B.Z(null,{container:e}),this._loadExampleIndex(),this._selectTilesetFromQueryParams()}async _loadExampleIndex(){const e=await J();this.setState({examplesByCategory:e});const{category:t,name:s}=this.state,n=e[t].examples[s];this.setState({selectedExample:n})}_selectTilesetFromQueryParams(){const e=new URL(window.location.href),t=e.searchParams.get("ionAccessToken"),s=e.searchParams.get("ionAssetId");if(t&&s)return this.setState({selectedExample:{ionAccessToken:t,ionAssetId:s},category:"custom",name:"ION Tileset"}),!0;const n=e.searchParams.get("tileset");return!!n&&(this.setState({selectedExample:{tilesetUrl:n},category:"custom",name:"URL Tileset"}),!0)}_updateStatWidgets(){this._memWidget.update(),this._tilesetStatsWidget.update()}_onSelectExample(e){let{example:t,category:s,name:n}=e;this.setState({selectedExample:t,category:s,name:n})}_onSelectMapStyle(e){let{selectedMapStyle:t}=e;this.setState({selectedMapStyle:t})}_onTilesetLoad(e){this.setState({tileset:e}),this._tilesetStatsWidget.setStats(e.stats),this._centerViewOnTileset(e)}_centerViewOnTileset(e){const{cartographicCenter:t,zoom:s}=e;this.setState({viewState:{...this.state.viewState,longitude:t[0],latitude:t[1],zoom:s,bearing:x.bearing,pitch:x.pitch,transitionDuration:4e3,transitionInterpolator:new d.Z}})}_onTilesetChange(e){this._updateStatWidgets()}_onViewStateChange(e){let{viewState:t}=e;this.setState({viewState:t})}_renderControlPanel(){const{examplesByCategory:e,category:t,name:s,viewState:n,tileset:r,selectedMapStyle:o}=this.state;return e?i.createElement(I,{data:e,category:t,name:s,tileset:r,onMapStyleChange:this._onSelectMapStyle.bind(this),onExampleChange:this._onSelectExample.bind(this),selectedMapStyle:o},i.createElement("div",{style:{textAlign:"center"}},"long/lat: ",n.longitude.toFixed(5),",",n.latitude.toFixed(5),", zoom:"," ",n.zoom.toFixed(2))):null}_renderStats(){return i.createElement("div",{style:{position:"absolute",padding:12,zIndex:"10000",maxWidth:300,background:"#000",color:"#fff"},ref:e=>this._statsWidgetContainer=e})}_renderTile3DLayer(){const{selectedExample:e}=this.state;if(!e)return null;const{ionAssetId:t,ionAccessToken:s,maximumScreenSpaceError:n,tilesetUrl:i}=e,r=t?"https://assets.ion.cesium.com/"+t+"/tileset.json":i,o={"cesium-ion":{accessToken:s}};return n&&(o.maximumScreenSpaceError=n),new A.Z({id:"tile-3d-layer",data:r,loader:t?f.Z:C.u,loadOptions:o,pickable:!0,pointSize:2,getPointColor:[115,112,202],onTilesetLoad:this._onTilesetLoad,onTileLoad:this._onTilesetChange,onTileUnload:this._onTilesetChange,onTileError:this._onTilesetChange})}render(){const{viewState:e,selectedMapStyle:t}=this.state,s=this._renderTile3DLayer();return i.createElement("div",{style:{position:"relative",height:"100%"}},this._renderStats(),this._renderControlPanel(),i.createElement(u.Z,{layers:[s],viewState:e,onViewStateChange:this._onViewStateChange.bind(this),controller:{type:h.Z,maxPitch:85,inertia:!0},onAfterRender:()=>this._updateStatWidgets()},i.createElement(o.D5,{reuseMaps:!0,mapLib:c(),mapStyle:t,preventStyleDiffing:!0})))}}const P={},L="3D Tiles",Z={unversionedId:"3d-tiles",id:"3d-tiles",title:"3D Tiles",description:"",source:"@site/src/examples/3d-tiles.mdx",sourceDirName:".",slug:"/3d-tiles",permalink:"/examples/3d-tiles",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"examplesSidebar",previous:{title:"I3S ArcGIS",permalink:"/examples/i3s-arcgis"}},K={},N=[],j={toc:N},Q="wrapper";function X(e){let{components:t,...s}=e;return(0,r.kt)(Q,(0,n.Z)({},j,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"3d-tiles"},"3D Tiles"),(0,r.kt)("div",{style:{height:"100vh"}},(0,r.kt)(U,{mdxType:"Demo"})))}X.isMDXComponent=!0},745:(e,t,s)=>{"use strict";s.d(t,{D0:()=>c,Ew:()=>l,Kn:()=>r,Lj:()=>u,Os:()=>h,Ss:()=>o,TW:()=>a,zH:()=>d});const n=e=>"boolean"==typeof e,i=e=>"function"==typeof e,r=e=>null!==e&&"object"==typeof e,o=e=>r(e)&&e.constructor==={}.constructor,a=e=>e&&"function"==typeof e[Symbol.iterator],c=e=>e&&"function"==typeof e[Symbol.asyncIterator],l=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,u=e=>"undefined"!=typeof Blob&&e instanceof Blob,d=e=>e&&"object"==typeof e&&e.isBuffer,h=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||r(e)&&i(e.tee)&&i(e.cancel)&&i(e.getReader))(e)||(e=>r(e)&&i(e.read)&&i(e.pipe)&&n(e.readable))(e)},37258:(e,t,s)=>{"use strict";s.d(t,{z:()=>a});var n=s(745),i=s(35163),r=s(89752),o=s(93865);async function a(e,t,s,a){Array.isArray(t)||(0,i.C)(t)||(void 0,s=t,t=void 0);const c=(0,r.b)(s);let l=e;return"string"==typeof e&&(l=await c(e)),(0,n.Lj)(e)&&(l=await c(e)),await(0,o.Q)(l,t,s)}},93865:(e,t,s)=>{"use strict";s.d(t,{Q:()=>S});var n=s(96040),i=s(57254),r=s(96013),o=s(13842),a=s(9164);async function c(e,t,s,n,i){const r=e.id,c=(0,a.j)(e,s),u=o.Z.getWorkerFarm(s).getWorkerPool({name:r,url:c});s=JSON.parse(JSON.stringify(s)),n=JSON.parse(JSON.stringify(n||{}));const d=await u.startJob("process-on-worker",l.bind(null,i));d.postMessage("process",{input:t,options:s,context:n});const h=await d.result;return await h.result}async function l(e,t,s,n){switch(s){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:r,input:o,options:a}=n;try{const s=await e(o,a);t.postMessage("done",{id:r,result:s})}catch(i){const e=i instanceof Error?i.message:"unknown error";t.postMessage("error",{id:r,error:e})}break;default:console.warn("parse-with-worker unknown message ".concat(s))}}var u=s(35163),d=s(745),h=s(48657),A=s(25735);const B=262144;const f=262144;const C=1048576;var m=s(39579);function p(e){if((t=e)&&"object"==typeof t&&t.isBuffer)return e;var t;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function g(e,t){return m.jU?async function*(e,t){const s=e.getReader();let n;try{for(;;){const e=n||s.read();null!=t&&t._streamReadAhead&&(n=s.read());const{done:i,value:r}=await e;if(i)return;yield p(r)}}catch(i){s.releaseLock()}}(e,t):async function*(e,t){for await(const s of e)yield p(s)}(e)}function _(e,t){if("string"==typeof e)return function*(e,t){const s=(null==t?void 0:t.chunkSize)||B;let n=0;const i=new TextEncoder;for(;n<e.length;){const t=Math.min(e.length-n,s),r=e.slice(n,n+t);n+=t,yield i.encode(r)}}(e,t);if(e instanceof ArrayBuffer)return function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{chunkSize:s=f}=t;let n=0;for(;n<e.byteLength;){const t=Math.min(e.byteLength-n,s),i=new ArrayBuffer(t),r=new Uint8Array(e,n,t);new Uint8Array(i).set(r),n+=t,yield i}}(e,t);if((0,d.Lj)(e))return async function*(e,t){const s=(null==t?void 0:t.chunkSize)||C;let n=0;for(;n<e.size;){const t=n+s,i=await e.slice(n,t).arrayBuffer();n=t,yield i}}(e,t);if((0,d.Os)(e))return g(e,t);if((0,d.Ew)(e)){return g(e.body,t)}throw new Error("makeIterator")}var y=s(78741);const E="Cannot convert supplied data type";async function b(e,t,s){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||n)return function(e,t,s){if(t.text&&"string"==typeof e)return e;if((0,d.zH)(e)&&(e=e.buffer),e instanceof ArrayBuffer){const s=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(s):s}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let s=e.buffer;const n=e.byteLength||e.length;return 0===e.byteOffset&&n===s.byteLength||(s=s.slice(e.byteOffset,e.byteOffset+n)),s}throw new Error(E)}(e,t);if((0,d.Lj)(e)&&(e=await(0,y.L1)(e)),(0,d.Ew)(e)){const s=e;return await(0,y.mm)(s),t.binary?await s.arrayBuffer():await s.text()}if((0,d.Os)(e)&&(e=_(e,s)),(0,d.TW)(e)||(0,d.D0)(e))return(0,A.GZ)(e);throw new Error(E)}var T=s(89752);var M=s(97949),D=s(86539);async function S(e,t,s,a){(0,n.h)(!a||"object"==typeof a),!t||Array.isArray(t)||(0,u.C)(t)||(a=void 0,s=t,t=void 0),e=await e,s=s||{};const{url:l}=(0,M.l)(e),A=function(e,t){if(!t&&e&&!Array.isArray(e))return e;let s;if(e&&(s=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];s=s?[...s,...e]:e}return s&&s.length?s:null}(t,a),B=await(0,D.A)(e,A,s);return B?(a=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(s)return s;const n={fetch:(0,T.b)(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}({url:l,parse:S,loaders:A},s=(0,h.GR)(s,B,A,l),a),await async function(e,t,s,a){if((0,i.z)(e),(0,d.Ew)(t)){const e=t,{ok:s,redirected:n,status:i,statusText:r,type:o,url:c}=e,l=Object.fromEntries(e.headers.entries());a.response={headers:l,ok:s,redirected:n,status:i,statusText:r,type:o,url:c}}if(t=await b(t,e,s),e.parseTextSync&&"string"==typeof t)return s.dataType="text",e.parseTextSync(t,s,a,e);if(function(e,t){return!!o.Z.isSupported()&&!!(r.jU||null!=t&&t._nodeWorkers)&&e.worker&&(null==t?void 0:t.worker)}(e,s))return await c(e,t,s,a,S);if(e.parseText&&"string"==typeof t)return await e.parseText(t,s,a,e);if(e.parse)return await e.parse(t,s,a,e);throw(0,n.h)(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}(B,e,s,a)):null}},99121:(e,t,s)=>{"use strict";s.d(t,{fh:()=>o,kO:()=>a});var n=s(35163),i=s(48657);const r=()=>{const e=(0,i.rx)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function o(e){const t=r();e=Array.isArray(e)?e:[e];for(const s of e){const e=(0,n.T)(s);t.find((t=>e===t))||t.unshift(e)}}function a(){return r()}},86539:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var n=s(59645),i=s(2482),r=s(35163);const o=new(s(56426).Z)({id:"loaders.gl"});var a=s(97949),c=s(99121),l=s(745);const u=/\.([^.]+)$/;async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!A(e))return null;let i=h(e,t,{...s,nothrow:!0},n);if(i)return i;if((0,l.Lj)(e)&&(i=h(e=await e.slice(0,10).arrayBuffer(),t,s,n)),!(i||null!=s&&s.nothrow))throw new Error(B(e));return i}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!A(e))return null;if(t&&!Array.isArray(t))return(0,r.T)(t);let i=[];t&&(i=i.concat(t)),null!=s&&s.ignoreRegisteredLoaders||i.push(...(0,c.kO)()),function(e){for(const t of e)(0,r.T)(t)}(i);const l=function(e,t,s,n){const{url:i,type:r}=(0,a.l)(e),c=i||(null==n?void 0:n.url);let l=null,d="";null!=s&&s.mimeType&&(l=f(t,null==s?void 0:s.mimeType),d="match forced by supplied MIME type ".concat(null==s?void 0:s.mimeType));var h;l=l||function(e,t){const s=t&&u.exec(t),n=s&&s[1];return n?function(e,t){t=t.toLowerCase();for(const s of e)for(const e of s.extensions)if(e.toLowerCase()===t)return s;return null}(e,n):null}(t,c),d=d||(l?"matched url ".concat(c):""),l=l||f(t,r),d=d||(l?"matched MIME type ".concat(r):""),l=l||function(e,t){if(!t)return null;for(const s of e)if("string"==typeof t){if(C(t,s))return s}else if(ArrayBuffer.isView(t)){if(m(t.buffer,t.byteOffset,s))return s}else if(t instanceof ArrayBuffer){if(m(t,0,s))return s}return null}(t,e),d=d||(l?"matched initial data ".concat(p(e)):""),l=l||f(t,null==s?void 0:s.fallbackMimeType),d=d||(l?"matched fallback MIME type ".concat(r):""),d&&o.log(1,"selectLoader selected ".concat(null===(h=l)||void 0===h?void 0:h.name,": ").concat(d,"."));return l}(e,i,s,n);if(!(l||null!=s&&s.nothrow))throw new Error(B(e));return l}function A(e){return!(e instanceof Response&&204===e.status)}function B(e){const{url:t,type:s}=(0,a.l)(e);let i="No valid loader found (";i+=t?"".concat(n.vB(t),", "):"no url provided, ",i+="MIME type: ".concat(s?'"'.concat(s,'"'):"not provided",", ");const r=e?p(e):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function f(e,t){for(const s of e){if(s.mimeTypes&&s.mimeTypes.includes(t))return s;if(t==="application/x.".concat(s.id))return s}return null}function C(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function m(e,t,s){return(Array.isArray(s.tests)?s.tests:[s.tests]).some((n=>function(e,t,s,n){if(n instanceof ArrayBuffer)return(0,i.Xq)(n,e,n.byteLength);switch(typeof n){case"function":return n(e,s);case"string":return n===g(e,t,n.length);default:return!1}}(e,t,s,n)))}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return g(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return g(e,0,t)}return""}function g(e,t,s){if(e.byteLength<t+s)return"";const n=new DataView(e);let i="";for(let r=0;r<s;r++)i+=String.fromCharCode(n.getUint8(t+r));return i}},8551:(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var n=s(96351),i=s(78741);async function r(e,t){if("string"==typeof e){e=(0,n.i3)(e);let s=t;return null!=t&&t.fetch&&"function"!=typeof(null==t?void 0:t.fetch)&&(s=t.fetch),await fetch(e,s)}return await(0,i.L1)(e)}},89752:(e,t,s)=>{"use strict";s.d(t,{b:()=>o});var n=s(745),i=s(8551),r=s(48657);function o(e,t){const s=(0,r.pm)(),o=e||s;return"function"==typeof o.fetch?o.fetch:(0,n.Kn)(o.fetch)?e=>(0,i.d)(e,o):null!=t&&t.fetch?null==t?void 0:t.fetch:i.d}},35163:(e,t,s)=>{"use strict";s.d(t,{C:()=>i,T:()=>r});var n=s(73613);function i(e){var t;if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(null===(t=e)||void 0===t?void 0:t.extensions)}function r(e){var t,s;let r;return(0,n.h)(e,"null loader"),(0,n.h)(i(e),"invalid loader"),Array.isArray(e)&&(r=e[1],e=e[0],e={...e,options:{...e.options,...r}}),(null!==(t=e)&&void 0!==t&&t.parseTextSync||null!==(s=e)&&void 0!==s&&s.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}},48657:(e,t,s)=>{"use strict";s.d(t,{pm:()=>d,rx:()=>u,GR:()=>h});var n=s(745),i=s(81180);const r=new(s(56426).Z)({id:"loaders.gl"});class o{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var a=s(39579);const c={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){(0,i.Z)(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.console.error.bind(this.console,...t)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:a.jU,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},l={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function u(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const d=()=>{const e=u();return e.globalOptions=e.globalOptions||{...c},e.globalOptions};function h(e,t,s,n){return s=s||[],function(e,t){A(e,null,c,l,t);for(const s of t){const n=e&&e[s.id]||{},i=s.options&&s.options[s.id]||{},r=s.deprecatedOptions&&s.deprecatedOptions[s.id]||{};A(n,s.id,i,r,t)}}(e,s=Array.isArray(s)?s:[s]),f(t,e,n)}function A(e,t,s,i,o){const a=t||"Top level",c=t?"".concat(t,"."):"";for(const l in e){const u=!t&&(0,n.Kn)(e[l]);if(!(l in s)&&!("baseUri"===l&&!t)&&!("workerUrl"===l&&t))if(l in i)r.warn("".concat(a," loader option '").concat(c).concat(l,"' no longer supported, use '").concat(i[l],"'"))();else if(!u){const e=B(l,o);r.warn("".concat(a," loader option '").concat(c).concat(l,"' not recognized. ").concat(e))()}}}function B(e,t){const s=e.toLowerCase();let n="";for(const i of t)for(const t in i.options){if(e===t)return"Did you mean '".concat(i.id,".").concat(t,"'?");const r=t.toLowerCase();(s.startsWith(r)||r.startsWith(s))&&(n=n||"Did you mean '".concat(i.id,".").concat(t,"'?"))}return n}function f(e,t,s){const n={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(n,s),null===n.log&&(n.log=new o),C(n,d()),C(n,t),n}function C(e,t){for(const s in t)if(s in t){const i=t[s];(0,n.Ss)(i)&&(0,n.Ss)(e[s])?e[s]={...e[s],...t[s]}:e[s]=t[s]}}},97949:(e,t,s)=>{"use strict";s.d(t,{C:()=>u,l:()=>l});var n=s(745);const i=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,r=/^([-\w.]+\/[-\w.+]+)/;function o(e){const t=r.exec(e);return t?t[1]:e}function a(e){const t=i.exec(e);return t?t[1]:""}const c=/\?.*/;function l(e){if((0,n.Ew)(e)){const t=d(e.url||"");return{url:t,type:o(e.headers.get("content-type")||"")||a(t)}}return(0,n.Lj)(e)?{url:d(e.name||""),type:e.type||""}:"string"==typeof e?{url:d(e),type:a(e)}:{url:"",type:""}}function u(e){return(0,n.Ew)(e)?e.headers["content-length"]||-1:(0,n.Lj)(e)?e.size:"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function d(e){return e.replace(c,"")}},78741:(e,t,s)=>{"use strict";s.d(t,{L1:()=>r,mm:()=>o});var n=s(745),i=s(97949);async function r(e){if((0,n.Ew)(e))return e;const t={},s=(0,i.C)(e);s>=0&&(t["content-length"]=String(s));const{url:r,type:o}=(0,i.l)(e);o&&(t["content-type"]=o);const a=await async function(e){const t=5;if("string"==typeof e)return"data:,".concat(e.slice(0,t));if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const s=new FileReader;s.onload=t=>{var s;return e(null==t||null===(s=t.target)||void 0===s?void 0:s.result)},s.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){const s=function(e){let t="";const s=new Uint8Array(e);for(let n=0;n<s.byteLength;n++)t+=String.fromCharCode(s[n]);return btoa(t)}(e.slice(0,t));return"data:base64,".concat(s)}return null}(e);a&&(t["x-first-bytes"]=a),"string"==typeof e&&(e=(new TextEncoder).encode(e));const c=new Response(e,{headers:t});return Object.defineProperty(c,"url",{value:r}),c}async function o(e){if(!e.ok){const t=await async function(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const s=e.headers.get("Content-Type");let n=e.statusText;s.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch(s){}return t}(e);throw new Error(t)}}},64995:(e,t,s)=>{"use strict";s.d(t,{VJ:()=>T});var n=s(96013);const i="3.4.0-alpha.2",r={draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},o={name:"Draco",id:n.jU?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:i,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:r};var a=s(81180),c=s(61569),l=s(78354),u=s(48347);function d(e,t,s){const n=A(t.metadata),i=[],r=function(e){const t={};for(const s in e){const n=e[s];t[n.name||"undefined"]=n}return t}(t.attributes);for(const o in e){const t=h(o,e[o],r[o]);i.push(t)}if(s){const e=h("indices",s);i.push(e)}return new u.Z(i,n)}function h(e,t,s){const n=s?A(s.metadata):void 0;return(0,l.ou)(e,t,n)}function A(e){const t=new Map;for(const s in e)t.set("".concat(s,".string"),JSON.stringify(e[s]));return t}const B={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},f={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class C{constructor(e){(0,a.Z)(this,"draco",void 0),(0,a.Z)(this,"decoder",void 0),(0,a.Z)(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new this.draco.DecoderBuffer;s.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const n=this.decoder.GetEncodedGeometryType(s),i=n===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let e;switch(n){case this.draco.TRIANGULAR_MESH:e=this.decoder.DecodeBufferToMesh(s,i);break;case this.draco.POINT_CLOUD:e=this.decoder.DecodeBufferToPointCloud(s,i);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!e.ok()||!i.ptr){const t="DRACO decompression failed: ".concat(e.error_msg());throw new Error(t)}const r=this._getDracoLoaderData(i,n,t),o=this._getMeshData(i,r,t),a=(0,c.v)(o.attributes),l=d(o.attributes,r,o.indices);return{loader:"draco",loaderData:r,header:{vertexCount:i.num_points(),boundingBox:a},...o,schema:l}}finally{this.draco.destroy(s),i&&this.draco.destroy(i)}}_getDracoLoaderData(e,t,s){const n=this._getTopLevelMetadata(e),i=this._getDracoAttributes(e,s);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:n,attributes:i}}_getDracoAttributes(e,t){const s={};for(let n=0;n<e.num_attributes();n++){const i=this.decoder.GetAttribute(e,n),r=this._getAttributeMetadata(e,n);s[i.unique_id()]={unique_id:i.unique_id(),attribute_type:i.attribute_type(),data_type:i.data_type(),num_components:i.num_components(),byte_offset:i.byte_offset(),byte_stride:i.byte_stride(),normalized:i.normalized(),attribute_index:n,metadata:r};const o=this._getQuantizationTransform(i,t);o&&(s[i.unique_id()].quantization_transform=o);const a=this._getOctahedronTransform(i,t);a&&(s[i.unique_id()].octahedron_transform=a)}return s}_getMeshData(e,t,s){const n=this._getMeshAttributes(t,e,s);if(!n.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===s.topology?{topology:"triangle-strip",mode:4,attributes:n,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:n,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:n}}_getMeshAttributes(e,t,s){const n={};for(const i of Object.values(e.attributes)){const e=this._deduceAttributeName(i,s);i.name=e;const{value:r,size:o}=this._getAttributeValues(t,i);n[e]={value:r,size:o,byteOffset:i.byte_offset,byteStride:i.byte_stride,normalized:i.normalized}}return n}_getTriangleListIndices(e){const t=3*e.num_faces(),s=4*t,n=this.draco._malloc(s);try{return this.decoder.GetTrianglesUInt32Array(e,s,n),new Uint32Array(this.draco.HEAPF32.buffer,n,t).slice()}finally{this.draco._free(n)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function(e){const t=e.size(),s=new Int32Array(t);for(let n=0;n<t;n++)s[n]=e.GetValue(n);return s}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const s=f[t.data_type],n=t.num_components,i=e.num_points()*n,r=i*s.BYTES_PER_ELEMENT,o=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32;default:return e.DT_INVALID}}(this.draco,s);let a;const c=this.draco._malloc(r);try{const n=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,n,o,r,c),a=new s(this.draco.HEAPF32.buffer,c,i).slice()}finally{this.draco._free(c)}return{value:a,size:n}}_deduceAttributeName(e,t){const s=e.unique_id;for(const[r,o]of Object.entries(t.extraAttributes||{}))if(o===s)return r;const n=e.attribute_type;for(const r in B){if(this.draco[r]===n)return B[r]}const i=t.attributeNameEntry||"name";return e.metadata[i]?e.metadata[i].string:"CUSTOM_ATTRIBUTE_".concat(s)}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const s=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(s)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},s=this.metadataQuerier.NumEntries(e);for(let n=0;n<s;n++){const s=this.metadataQuerier.GetEntryName(e,n);t[s]=this._getDracoMetadataField(e,s)}return t}_getDracoMetadataField(e,t){const s=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,s);const n=function(e){const t=e.size(),s=new Int32Array(t);for(let n=0;n<t;n++)s[n]=e.GetValue(n);return s}(s);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:n}}finally{this.draco.destroy(s)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:s=[]}=e,n=[...t,...s];for(const i of n)this.decoder.SkipAttributeTransform(this.draco[i])}_getQuantizationTransform(e,t){const{quantizedAttributes:s=[]}=t,n=e.attribute_type();if(s.map((e=>this.decoder[e])).includes(n)){const t=new this.draco.AttributeQuantizationTransform;try{if(t.InitFromAttribute(e))return{quantization_bits:t.quantization_bits(),range:t.range(),min_values:new Float32Array([1,2,3]).map((e=>t.min_value(e)))}}finally{this.draco.destroy(t)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:s=[]}=t,n=e.attribute_type();if(s.map((e=>this.decoder[e])).includes(n)){const t=new this.draco.AttributeQuantizationTransform;try{if(t.InitFromAttribute(e))return{quantization_bits:t.quantization_bits()}}finally{this.draco.destroy(t)}}return null}}var m=s(96706);const p="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),g="".concat(p,"/draco_decoder.js"),_="".concat(p,"/draco_wasm_wrapper.js"),y="".concat(p,"/draco_decoder.wasm");"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");let E;async function b(e){const t=e.modules||{};return E=t.draco3d?E||t.draco3d.createDecoderModule({}).then((e=>({draco:e}))):E||async function(e){let t,s;if("js"===(e.draco&&e.draco.decoderType))t=await(0,m.Y)(g,"draco",e);else[t,s]=await Promise.all([await(0,m.Y)(_,"draco",e),await(0,m.Y)(y,"draco",e)]);return t=t||globalThis.DracoDecoderModule,await function(e,t){const s={};t&&(s.wasmBinary=t);return new Promise((t=>{e({...s,onModuleLoaded:e=>t({draco:e})})}))}(t,s)}(e),await E}n.jU;const T={...o,parse:async function(e,t){const{draco:s}=await b(t),n=new C(s);try{return n.parseSync(e,null==t?void 0:t.draco)}finally{n.destroy()}}}},5016:(e,t,s)=>{"use strict";s.d(t,{E:()=>Tt});var n={};s.r(n),s.d(n,{decode:()=>Y,name:()=>V});var i={};s.r(i),s.d(i,{name:()=>te,preprocess:()=>se});var r={};s.r(r),s.d(r,{name:()=>ie,preprocess:()=>re});var o={};s.r(o),s.d(o,{decode:()=>de,encode:()=>he,name:()=>le,preprocess:()=>ue});var a={};s.r(a),s.d(a,{decode:()=>Me,name:()=>ye});var c={};s.r(c),s.d(c,{decode:()=>Fe,encode:()=>ve,name:()=>Ie});var l={};s.r(l),s.d(l,{decode:()=>He,encode:()=>Je,name:()=>Oe});var u={};s.r(u),s.d(u,{decode:()=>Pe,encode:()=>Le,name:()=>Ue});var d={};s.r(d),s.d(d,{decode:()=>je,name:()=>Ne});var h=s(4214),A=s(1975),B=s(87391);function f(e,t,s){if(e.byteLength<=t+s)return"";const n=new DataView(e);let i="";for(let r=0;r<s;r++)i+=String.fromCharCode(n.getUint8(t+r));return i}function C(e){try{return JSON.parse(e)}catch(t){throw new Error('Failed to parse JSON from data starting with "'.concat(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return f(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer)return f(e,0,t);return""}(e),'"'))}}var m=s(2482);function p(e,t){if(!e)throw new Error(t||"assert failed: gltf")}function g(e,t){if(e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:"))return e;const s=t.baseUri||t.uri;if(!s)throw new Error("'baseUri' must be provided to resolve relative url ".concat(e));return s.substr(0,s.lastIndexOf("/")+1)+e}function _(e,t,s){const n=e.bufferViews[s];p(n);const i=t[n.buffer];p(i);const r=(n.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,r,n.byteLength)}var y=s(81180),E=s(46936),b=s(73613);function T(e,t){return(0,b.h)(e>=0),(0,b.h)(t>0),e+(t-1)&~(t-1)}function M(e,t,s){let n;if(e instanceof ArrayBuffer)n=new Uint8Array(e);else{const t=e.byteOffset,s=e.byteLength;n=new Uint8Array(e.buffer||e.arrayBuffer,t,s)}return t.set(n,s),s+T(n.byteLength,4)}const D=["SCALAR","VEC2","VEC3","VEC4"],S=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],R=new Map(S),G={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},I={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},F={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function v(e){return D[e-1]||D[0]}function w(e){const t=R.get(e.constructor);if(!t)throw new Error("Illegal typed array");return t}function O(e,t){const s=F[e.componentType],n=G[e.type],i=I[e.componentType],r=e.count*n,o=e.count*n*i;return p(o>=0&&o<=t.byteLength),{ArrayType:s,length:r,byteLength:o}}const H={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class J{constructor(e){(0,y.Z)(this,"gltf",void 0),(0,y.Z)(this,"sourceBuffers",void 0),(0,y.Z)(this,"byteLength",void 0),this.gltf=e||{json:{...H},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){const t=this.getUsedExtensions().find((t=>t===e)),s=this.json.extensions||{};return t?s[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find((t=>t===e))?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const s=this.json[e]&&this.json[e][t];if(!s)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return s}getTypedArrayForBufferView(e){const t=(e=this.getBufferView(e)).buffer,s=this.gltf.buffers[t];p(s);const n=(e.byteOffset||0)+s.byteOffset;return new Uint8Array(s.arrayBuffer,n,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),s=this.getBuffer(t.buffer).data,{ArrayType:n,length:i}=O(e,t);return new n(s,t.byteOffset+e.byteOffset,i)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),s=this.getBuffer(t.buffer).data,n=t.byteOffset||0;return new Uint8Array(s,n,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,s){return e.extensions=e.extensions||{},e.extensions[t]=s,this.registerUsedExtension(t),this}setObjectExtension(e,t,s){(e.extensions||{})[t]=s}removeObjectExtension(e,t){const s=e.extensions||{},n=s[t];return delete s[t],n}addExtension(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((t=>t===e))||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((t=>t===e))||this.json.extensionsRequired.push(e)}removeExtension(e){if(!this.getExtension(e))return;this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);const t=this.json.extensionsRemoved;t.includes(e)||t.push(e)}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:s}=e;this.json.nodes=this.json.nodes||[];const n={mesh:t};return s&&(n.matrix=s),this.json.nodes.push(n),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:s,material:n,mode:i=4}=e,r={primitives:[{attributes:this._addAttributes(t),mode:i}]};if(s){const e=this._addIndices(s);r.primitives[0].indices=e}return Number.isFinite(n)&&(r.primitives[0].material=n),this.json.meshes=this.json.meshes||[],this.json.meshes.push(r),this.json.meshes.length-1}addPointCloud(e){const t={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(t),this.json.meshes.length-1}addImage(e,t){const s=(0,E.I)(e),n=t||(null==s?void 0:s.mimeType),i={bufferView:this.addBufferView(e),mimeType:n};return this.json.images=this.json.images||[],this.json.images.push(i),this.json.images.length-1}addBufferView(e){const t=e.byteLength;p(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const s={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=T(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(s),this.json.bufferViews.length-1}addAccessor(e,t){const s={bufferView:e,type:v(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(s),this.json.accessors.length-1}addBinaryBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:3};const s=this.addBufferView(e);let n={min:t.min,max:t.max};n.min&&n.max||(n=this._getAccessorMinMax(e,t.size));const i={size:t.size,componentType:w(e),count:Math.round(e.length/t.size),min:n.min,max:n.max};return this.addAccessor(s,Object.assign(i,t))}addTexture(e){const{imageIndex:t}=e,s={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(s),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const s=this.byteLength,n=new ArrayBuffer(s),i=new Uint8Array(n);let r=0;for(const o of this.sourceBuffers||[])r=M(o,i,r);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=s:this.json.buffers=[{byteLength:s}],this.gltf.binary=n,this.sourceBuffers=[n]}_removeStringFromArray(e,t){let s=!0;for(;s;){const n=e.indexOf(t);n>-1?e.splice(n,1):s=!1}}_addAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={};for(const s in e){const n=e[s],i=this._getGltfAttributeName(s),r=this.addBinaryBuffer(n.value,n);t[i]=r}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const s={min:null,max:null};if(e.length<t)return s;s.min=[],s.max=[];const n=e.subarray(0,t);for(const i of n)s.min.push(i),s.max.push(i);for(let i=t;i<e.length;i+=t)for(let n=0;n<t;n++)s.min[0+n]=Math.min(s.min[0+n],e[i+n]),s.max[0+n]=Math.max(s.max[0+n],e[i+n]);return s}}const x="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",U="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",P=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),L=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),Z={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},K={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};let N;async function j(){return N||(N=async function(){let e=x;WebAssembly.validate(P)&&(e=U,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const t=await WebAssembly.instantiate(function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;++n){const s=e.charCodeAt(n);t[n]=s>96?s-71:s>64?s-65:s>47?s+4:s>46?63:62}let s=0;for(let n=0;n<e.length;++n)t[s++]=t[n]<60?L[t[n]]:64*(t[n]-60)+t[++n];return t.buffer.slice(0,s)}(e),{});return await t.instance.exports.__wasm_call_ctors(),t.instance}()),N}function Q(e,t,s,n,i,r,o){const a=e.exports.sbrk,c=n+3&-4,l=a(c*i),u=a(r.length),d=new Uint8Array(e.exports.memory.buffer);d.set(r,u);const h=t(l,n,i,u,r.length);if(0===h&&o&&o(l,c,i),s.set(d.subarray(l,l+n*i)),a(l-a(0)),0!==h)throw new Error("Malformed buffer data: ".concat(h))}const X="EXT_meshopt_compression",V=X;async function Y(e,t){var s;const n=new J(e);if(null==t||null===(s=t.gltf)||void 0===s||!s.decompressMeshes)return;const i=[];for(const r of e.json.bufferViews||[])i.push(k(n,r));await Promise.all(i),n.removeExtension(X)}async function k(e,t){const s=e.getObjectExtension(t,X);if(s){const{byteOffset:n=0,byteLength:i=0,byteStride:r,count:o,mode:a,filter:c="NONE",buffer:l}=s,u=e.gltf.buffers[l],d=new Uint8Array(u.arrayBuffer,u.byteOffset+n,i),h=new Uint8Array(e.gltf.buffers[t.buffer].arrayBuffer,t.byteOffset,t.byteLength);return await async function(e,t,s,n,i){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NONE";const o=await j();Q(o,o.exports[K[i]],e,t,s,n,o.exports[Z[r||"NONE"]])}(h,o,r,d,a,c),h}return null}var W=s(39579);const q={};function z(e){if(void 0===q[e]){const t=W.jU?function(e){switch(e){case"image/avif":case"image/webp":return function(e){try{const t=document.createElement("canvas");return 0===t.toDataURL(e).indexOf("data:".concat(e))}catch{return!1}}(e);default:return!0}}(e):$(e);q[e]=t}return q[e]}function $(e){const t=["image/png","image/jpeg","image/gif"],{_parseImageNode:s,_imageFormatsNode:n=t}=globalThis;return Boolean(s)&&n.includes(e)}const ee="EXT_texture_webp",te=ee;function se(e,t){const s=new J(e);if(!z("image/webp")){if(s.getRequiredExtensions().includes(ee))throw new Error("gltf: Required extension ".concat(ee," not supported by browser"));return}const{json:n}=s;for(const i of n.textures||[]){const e=s.getObjectExtension(i,ee);e&&(i.source=e.source),s.removeObjectExtension(i,ee)}s.removeExtension(ee)}const ne="KHR_texture_basisu",ie=ne;function re(e,t){const s=new J(e),{json:n}=s;for(const i of n.textures||[]){const e=s.getObjectExtension(i,ne);e&&(i.source=e.source),s.removeObjectExtension(i,ne)}s.removeExtension(ne)}var oe=s(64995);function ae(e){const{buffer:t,size:s,count:n}=function(e){let t=e,s=1,n=0;e&&e.value&&(t=e.value,s=e.size||1);t&&(ArrayBuffer.isView(t)||(t=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;if(Array.isArray(e))return new t(e);if(s&&!(e instanceof t))return new t(e);return e}(t,Float32Array)),n=t.length/s);return{buffer:t,size:s,count:n}}(e);return{value:t,size:s,byteOffset:0,count:n,type:v(s),componentType:w(t)}}const ce="KHR_draco_mesh_compression",le=ce;function ue(e,t,s){const n=new J(e);for(const i of fe(n))n.getObjectExtension(i,ce)}async function de(e,t,s){var n;if(null==t||null===(n=t.gltf)||void 0===n||!n.decompressMeshes)return;const i=new J(e),r=[];for(const o of fe(i))i.getObjectExtension(o,ce)&&r.push(Ae(i,o,t,s));await Promise.all(r),i.removeExtension(ce)}function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new J(e);for(const n of s.json.meshes||[])Be(n,t),s.addRequiredExtension(ce)}async function Ae(e,t,s,n){const i=e.getObjectExtension(t,ce);if(!i)return;const r=e.getTypedArrayForBufferView(i.bufferView),o=(0,m.qv)(r.buffer,r.byteOffset),{parse:a}=n,c={...s};delete c["3d-tiles"];const l=await a(o,oe.VJ,c,n),u=function(e){const t={};for(const s in e){const n=e[s];if("indices"!==s){const e=ae(n);t[s]=e}}return t}(l.attributes);for(const[d,h]of Object.entries(u))if(d in t.attributes){const s=t.attributes[d],n=e.getAccessor(s);null!=n&&n.min&&null!=n&&n.max&&(h.min=n.min,h.max=n.max)}t.attributes=u,l.indices&&(t.indices=ae(l.indices)),function(e){if(!e.attributes&&Object.keys(e.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(t)}function Be(e,t){var s;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:e}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:e}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(o);return{primitives:[{attributes:c,mode:n,extensions:{[ce]:{bufferView:l,attributes:c}}}]}}function*fe(e){for(const t of e.json.meshes||[])for(const e of t.primitives)yield e}var Ce=s(43855),me=s(80540);const pe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ge={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};const _e="KHR_texture_transform",ye=_e,Ee=new Ce.Z,be=new me.Z,Te=new me.Z;async function Me(e,t){if(!new J(e).getExtension(_e))return;const s=e.json.materials||[];for(let n=0;n<s.length;n++)De(n,e)}function De(e,t){var s,n,i;const r=[],o=null===(s=t.json.materials)||void 0===s?void 0:s[e],a=null==o||null===(n=o.pbrMetallicRoughness)||void 0===n?void 0:n.baseColorTexture;a&&Se(t,e,a,r);const c=null==o?void 0:o.emissiveTexture;c&&Se(t,e,c,r);const l=null==o?void 0:o.normalTexture;l&&Se(t,e,l,r);const u=null==o?void 0:o.occlusionTexture;u&&Se(t,e,u,r);const d=null==o||null===(i=o.pbrMetallicRoughness)||void 0===i?void 0:i.metallicRoughnessTexture;d&&Se(t,e,d,r)}function Se(e,t,s,n){const i=function(e,t){var s;const n=null===(s=e.extensions)||void 0===s?void 0:s[_e],{texCoord:i=0}=e,{texCoord:r=i}=n,o=-1!==t.findIndex((e=>{let[t,s]=e;return t===i&&s===r}));if(!o){const s=function(e){const{offset:t=[0,0],rotation:s=0,scale:n=[1,1]}=e,i=(new me.Z).set(1,0,0,0,1,0,t[0],t[1],1),r=be.set(Math.cos(s),Math.sin(s),0,-Math.sin(s),Math.cos(s),0,0,0,1),o=Te.set(n[0],0,0,0,n[1],0,0,0,1);return i.multiplyRight(r).multiplyRight(o)}(n);return i!==r&&(e.texCoord=r),t.push([i,r]),{originalTexCoord:i,texCoord:r,matrix:s}}return null}(s,n);if(!i)return;const r=e.json.meshes||[];for(const o of r)for(const s of o.primitives){const n=s.material;Number.isFinite(n)&&t===n&&Re(e,s,i)}}function Re(e,t,s){const{originalTexCoord:n,texCoord:i,matrix:r}=s,o=t.attributes["TEXCOORD_".concat(n)];if(Number.isFinite(o)){var a;const s=null===(a=e.json.accessors)||void 0===a?void 0:a[o];if(s&&s.bufferView){var c;const o=null===(c=e.json.bufferViews)||void 0===c?void 0:c[s.bufferView];if(o){const{arrayBuffer:a,byteOffset:c}=e.buffers[o.buffer],l=(c||0)+(s.byteOffset||0)+(o.byteOffset||0),{ArrayType:u,length:d}=O(s,o),h=ge[s.componentType],A=pe[s.type],B=o.byteStride||h*A,f=new Float32Array(d);for(let e=0;e<s.count;e++){const t=new u(a,l+e*B,2);Ee.set(t[0],t[1],1),Ee.transformByMatrix3(r),f.set([Ee[0],Ee[1]],e*A)}n===i?function(e,t,s,n){e.componentType=5126,s.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength}),t.buffer=s.length-1,t.byteLength=n.buffer.byteLength,t.byteOffset=0,delete t.byteStride}(s,o,e.buffers,f):function(e,t,s,n,i){n.buffers.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength});const r=n.json.bufferViews;if(!r)return;r.push({buffer:n.buffers.length-1,byteLength:i.buffer.byteLength,byteOffset:0});const o=n.json.accessors;if(!o)return;o.push({bufferView:(null==r?void 0:r.length)-1,byteOffset:0,componentType:5126,count:t.count,type:"VEC2"}),s.attributes["TEXCOORD_".concat(e)]=o.length-1}(i,s,t,e,f)}}}}const Ge="KHR_lights_punctual",Ie=Ge;async function Fe(e){const t=new J(e),{json:s}=t,n=t.getExtension(Ge);n&&(t.json.lights=n.lights,t.removeExtension(Ge));for(const i of s.nodes||[]){const e=t.getObjectExtension(i,Ge);e&&(i.light=e.light),t.removeObjectExtension(i,Ge)}}async function ve(e){const t=new J(e),{json:s}=t;if(s.lights){const e=t.addExtension(Ge);p(!e.lights),e.lights=s.lights,delete s.lights}if(t.json.lights){for(const e of t.json.lights){const s=e.node;t.addObjectExtension(s,Ge,e)}delete t.json.lights}}const we="KHR_materials_unlit",Oe=we;async function He(e){const t=new J(e),{json:s}=t;for(const n of s.materials||[]){n.extensions&&n.extensions.KHR_materials_unlit&&(n.unlit=!0),t.removeObjectExtension(n,we)}t.removeExtension(we)}function Je(e){const t=new J(e),{json:s}=t;if(t.materials)for(const n of s.materials||[])n.unlit&&(delete n.unlit,t.addObjectExtension(n,we,{}),t.addExtension(we))}const xe="KHR_techniques_webgl",Ue=xe;async function Pe(e){const t=new J(e),{json:s}=t,n=t.getExtension(xe);if(n){const e=function(e,t){const{programs:s=[],shaders:n=[],techniques:i=[]}=e,r=new TextDecoder;return n.forEach((e=>{if(!Number.isFinite(e.bufferView))throw new Error("KHR_techniques_webgl: no shader code");e.code=r.decode(t.getTypedArrayForBufferView(e.bufferView))})),s.forEach((e=>{e.fragmentShader=n[e.fragmentShader],e.vertexShader=n[e.vertexShader]})),i.forEach((e=>{e.program=s[e.program]})),i}(n,t);for(const n of s.materials||[]){const s=t.getObjectExtension(n,xe);s&&(n.technique=Object.assign({},s,e[s.technique]),n.technique.values=Ze(n.technique,t)),t.removeObjectExtension(n,xe)}t.removeExtension(xe)}}async function Le(e,t){}function Ze(e,t){const s=Object.assign({},e.values);return Object.keys(e.uniforms||{}).forEach((t=>{e.uniforms[t].value&&!(t in s)&&(s[t]=e.uniforms[t].value)})),Object.keys(s).forEach((e=>{"object"==typeof s[e]&&void 0!==s[e].index&&(s[e].texture=t.getTexture(s[e].index))})),s}const Ke="EXT_feature_metadata",Ne=Ke;async function je(e){!function(e){var t;const s=e.getExtension(Ke),n=null==s||null===(t=s.schema)||void 0===t?void 0:t.classes,i=null==s?void 0:s.featureTables;(null==s?void 0:s.featureTextures)&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.');if(n&&i)for(const r in n){const t=n[r],s=Ve(i,r);s&&Qe(e,s,t)}}(new J(e))}function Qe(e,t,s){for(const i in s.properties){var n;const r=s.properties[i],o=null==t||null===(n=t.properties)||void 0===n?void 0:n[i],a=t.count;if(o){const t=Xe(e,r,a,o);o.data=t}}}function Xe(e,t,s,n){const i=n.bufferView;let r=e.getTypedArrayForBufferView(i);switch(t.type){case"STRING":{const t=n.stringOffsetBufferView;r=function(e,t,s){const n=[],i=new TextDecoder("utf8");let r=0;const o=4;for(let a=0;a<s;a++){const s=t[(a+1)*o]-t[a*o],c=e.subarray(r,s+r),l=i.decode(c);n.push(l),r+=s}return n}(r,e.getTypedArrayForBufferView(t),s);break}}return r}function Ve(e,t){for(const s in e){const n=e[s];if(n.class===t)return n}return null}const Ye=[n,i,r,o,c,l,u,a,d];function ke(e,t){var s;const n=(null==t||null===(s=t.gltf)||void 0===s?void 0:s.excludeExtensions)||{};return!(e in n&&!n[e])}const We="KHR_binary_glTF";const qe={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},ze={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class $e{constructor(){(0,y.Z)(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),(0,y.Z)(this,"json",void 0)}normalize(e,t){this.json=e.json;const s=e.json;switch(s.asset&&s.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(s.asset.version))}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(s),this._convertTopLevelObjectsToArrays(s),function(e){const t=new J(e),{json:s}=t;for(const n of s.images||[]){const e=t.getObjectExtension(n,We);e&&Object.assign(n,e),t.removeObjectExtension(n,We)}s.buffers&&s.buffers[0]&&delete s.buffers[0].uri,t.removeExtension(We)}(e),this._convertObjectIdsToArrayIndices(s),this._updateObjects(s),this._updateMaterial(s)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in qe)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const s=e[t];if(s&&!Array.isArray(s)){e[t]=[];for(const n in s){const i=s[n];i.id=i.id||n;const r=e[t].length;e[t].push(i),this.idToIndexMap[t][n]=r}}}_convertObjectIdsToArrayIndices(e){for(const t in qe)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:e,indices:s,material:n}=t;for(const t in e)e[t]=this._convertIdToIndex(e[t],"accessor");s&&(t.indices=this._convertIdToIndex(s,"accessor")),n&&(t.material=this._convertIdToIndex(n,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map((e=>this._convertIdToIndex(e,"node")))),e.meshes&&(e.meshes=e.meshes.map((e=>this._convertIdToIndex(e,"mesh"))))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map((e=>this._convertIdToIndex(e,"node"))))}_convertIdsToIndices(e,t){e[t]||(console.warn("gltf v1: json doesn't contain attribute ".concat(t)),e[t]=[]);for(const s of e[t])for(const e in s){const t=s[e],n=this._convertIdToIndex(t,e);s[e]=n}}_convertIdToIndex(e,t){const s=ze[t];if(s in this.idToIndexMap){const n=this.idToIndexMap[s][e];if(!Number.isFinite(n))throw new Error("gltf v1: failed to resolve ".concat(t," with id ").concat(e));return n}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const i of e.materials){var t,s,n;i.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const r=(null===(t=i.values)||void 0===t?void 0:t.tex)||(null===(s=i.values)||void 0===s?void 0:s.texture2d_0)||(null===(n=i.values)||void 0===n?void 0:n.diffuseTex),o=e.textures.findIndex((e=>e.id===r));-1!==o&&(i.pbrMetallicRoughness.baseColorTexture={index:o})}}}const et={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},tt={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},st=10240,nt=10241,it=10242,rt=10243,ot=10497,at={magFilter:st,minFilter:nt,wrapS:it,wrapT:rt},ct={[st]:9729,[nt]:9986,[it]:ot,[rt]:ot};class lt{constructor(){(0,y.Z)(this,"baseUri",""),(0,y.Z)(this,"json",{}),(0,y.Z)(this,"buffers",[]),(0,y.Z)(this,"images",[])}postProcess(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{json:s,buffers:n=[],images:i=[],baseUri:r=""}=e;return p(s),this.baseUri=r,this.json=s,this.buffers=n,this.images=i,this._resolveTree(this.json,t),this.json}_resolveTree(e){e.bufferViews&&(e.bufferViews=e.bufferViews.map(((e,t)=>this._resolveBufferView(e,t)))),e.images&&(e.images=e.images.map(((e,t)=>this._resolveImage(e,t)))),e.samplers&&(e.samplers=e.samplers.map(((e,t)=>this._resolveSampler(e,t)))),e.textures&&(e.textures=e.textures.map(((e,t)=>this._resolveTexture(e,t)))),e.accessors&&(e.accessors=e.accessors.map(((e,t)=>this._resolveAccessor(e,t)))),e.materials&&(e.materials=e.materials.map(((e,t)=>this._resolveMaterial(e,t)))),e.meshes&&(e.meshes=e.meshes.map(((e,t)=>this._resolveMesh(e,t)))),e.nodes&&(e.nodes=e.nodes.map(((e,t)=>this._resolveNode(e,t)))),e.skins&&(e.skins=e.skins.map(((e,t)=>this._resolveSkin(e,t)))),e.scenes&&(e.scenes=e.scenes.map(((e,t)=>this._resolveScene(e,t)))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const s=this.json[e]&&this.json[e][t];return s||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),s}_resolveScene(e,t){return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map((e=>this.getNode(e))),e}_resolveNode(e,t){return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map((e=>this.getNode(e)))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce(((e,t)=>{const s=this.getMesh(t);return e.id=s.id,e.primitives=e.primitives.concat(s.primitives),e}),{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map((e=>{const t=(e={...e}).attributes;e.attributes={};for(const s in t)e.attributes[s]=this.getAccessor(t[s]);return void 0!==e.indices&&(e.indices=this.getAccessor(e.indices)),void 0!==e.material&&(e.material=this.getMaterial(e.material)),e}))),e}_resolveMaterial(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const t=e.pbrMetallicRoughness;t.baseColorTexture&&(t.baseColorTexture={...t.baseColorTexture},t.baseColorTexture.texture=this.getTexture(t.baseColorTexture.index)),t.metallicRoughnessTexture&&(t.metallicRoughnessTexture={...t.metallicRoughnessTexture},t.metallicRoughnessTexture.texture=this.getTexture(t.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){var s,n;if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=(s=e.componentType,tt[s]),e.components=(n=e.type,et[n]),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const t=e.bufferView.buffer,{ArrayType:s,byteLength:n}=O(e,e.bufferView),i=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+t.byteOffset;let r=t.arrayBuffer.slice(i,i+n);e.bufferView.byteStride&&(r=this._getValueFromInterleavedBuffer(t,i,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new s(r)}return e}_getValueFromInterleavedBuffer(e,t,s,n,i){const r=new Uint8Array(i*n);for(let o=0;o<i;o++){const i=t+o*s;r.set(new Uint8Array(e.arrayBuffer.slice(i,i+n)),o*n)}return r.buffer}_resolveTexture(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):ct,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||"sampler-".concat(t),e.parameters={};for(const s in e){const t=this._enumSamplerParameter(s);void 0!==t&&(e.parameters[t]=e[s])}return e}_enumSamplerParameter(e){return at[e]}_resolveImage(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const s=this.images[t];return s&&(e.image=s),e}_resolveBufferView(e,t){const s=e.buffer,n={id:"bufferView-".concat(t),...e,buffer:this.buffers[s]},i=this.buffers[s].arrayBuffer;let r=this.buffers[s].byteOffset||0;return"byteOffset"in e&&(r+=e.byteOffset),n.data=new Uint8Array(i,r,e.byteLength),n}_resolveCamera(e,t){return e.id=e.id||"camera-".concat(t),e.perspective,e.orthographic,e}}const ut=1735152710,dt=12,ht=8,At=1313821514,Bt=5130562,ft=0,Ct=1,mt=0,pt=!0;function gt(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=new DataView(t),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(String.fromCharCode(e.getUint8(t+0))).concat(String.fromCharCode(e.getUint8(t+1))).concat(String.fromCharCode(e.getUint8(t+2))).concat(String.fromCharCode(e.getUint8(t+3)))}(i,s+0),o=i.getUint32(s+4,pt),a=i.getUint32(s+8,pt);switch(Object.assign(e,{header:{byteOffset:s,byteLength:a,hasBinChunk:!1},type:r,version:o,json:{},binChunks:[]}),s+=dt,e.version){case 1:return function(e,t,s){(0,b.h)(e.header.byteLength>dt+ht);const n=t.getUint32(s+0,pt),i=t.getUint32(s+4,pt);return s+=ht,(0,b.h)(i===mt),_t(e,t,s,n),s+=n,s+=yt(e,t,s,e.header.byteLength),s}(e,i,s);case 2:return function(e,t,s,n){return(0,b.h)(e.header.byteLength>dt+ht),function(e,t,s,n){for(;s+8<=e.header.byteLength;){const i=t.getUint32(s+0,pt),r=t.getUint32(s+4,pt);switch(s+=ht,r){case At:_t(e,t,s,i);break;case Bt:yt(e,t,s,i);break;case ft:n.strict||_t(e,t,s,i);break;case Ct:n.strict||yt(e,t,s,i)}s+=T(i,4)}}(e,t,s,n),s+e.header.byteLength}(e,i,s,n={});default:throw new Error("Invalid GLB version ".concat(e.version,". Only supports v1 and v2."))}}function _t(e,t,s,n){const i=new Uint8Array(t.buffer,s,n),r=new TextDecoder("utf8").decode(i);return e.json=JSON.parse(r),T(n,4)}function yt(e,t,s,n){return e.header.hasBinChunk=!0,e.binChunks.push({byteOffset:s,byteLength:n,arrayBuffer:t.buffer}),T(n,4)}async function Et(e,t){var s,n,i,r;let o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;!function(e,t,s,n){n.uri&&(e.baseUri=n.uri);if(t instanceof ArrayBuffer&&!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new DataView(e),{magic:i=ut}=s,r=n.getUint32(t,!1);return r===i||r===ut}(t,s,n)){t=(new TextDecoder).decode(t)}if("string"==typeof t)e.json=C(t);else if(t instanceof ArrayBuffer){const i={};s=gt(i,t,s,n.glb),p("glTF"===i.type,"Invalid GLB magic string ".concat(i.type)),e._glb=i,e.json=i.json}else p(!1,"GLTF: must be ArrayBuffer or string");const i=e.json.buffers||[];if(e.buffers=new Array(i.length).fill(null),e._glb&&e._glb.header.hasBinChunk){const{binChunks:t}=e._glb;e.buffers[0]={arrayBuffer:t[0].arrayBuffer,byteOffset:t[0].byteOffset,byteLength:t[0].byteLength}}const r=e.json.images||[];e.images=new Array(r.length).fill({})}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(new $e).normalize(e,t)}(e,{normalize:null==o||null===(s=o.gltf)||void 0===s?void 0:s.normalize}),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;const n=Ye.filter((e=>ke(e.name,t)));for(const r of n){var i;null===(i=r.preprocess)||void 0===i||i.call(r,e,t,s)}}(e,o,a);const c=[];if(null!=o&&null!==(n=o.gltf)&&void 0!==n&&n.loadBuffers&&e.json.buffers&&await async function(e,t,s){const n=e.json.buffers||[];for(let o=0;o<n.length;++o){const a=n[o];if(a.uri){var i,r;const{fetch:n}=s;p(n);const c=g(a.uri,t),l=await(null==s||null===(i=s.fetch)||void 0===i?void 0:i.call(s,c)),u=await(null==l||null===(r=l.arrayBuffer)||void 0===r?void 0:r.call(l));e.buffers[o]={arrayBuffer:u,byteOffset:0,byteLength:u.byteLength},delete a.uri}else null===e.buffers[o]&&(e.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}(e,o,a),null!=o&&null!==(i=o.gltf)&&void 0!==i&&i.loadImages){const t=async function(e,t,s){const n=function(e){const t=new Set,s=e.json.textures||[];for(const n of s)void 0!==n.source&&t.add(n.source);return Array.from(t).sort()}(e),i=e.json.images||[],r=[];for(const o of n)r.push(bt(e,i[o],o,t,s));return await Promise.all(r)}(e,o,a);c.push(t)}const l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;const n=Ye.filter((e=>ke(e.name,t)));for(const r of n){var i;await(null===(i=r.decode)||void 0===i?void 0:i.call(r,e,t,s))}}(e,o,a);return c.push(l),await Promise.all(c),null!=o&&null!==(r=o.gltf)&&void 0!==r&&r.postProcess?function(e,t){return(new lt).postProcess(e,t)}(e,o):e}async function bt(e,t,s,n,i){const{fetch:r,parse:o}=i;let a;if(t.uri&&!t.hasOwnProperty("bufferView")){const e=g(t.uri,n),s=await r(e);a=await s.arrayBuffer(),t.bufferView={data:a}}if(Number.isFinite(t.bufferView)){const s=_(e.json,e.buffers,t.bufferView);a=(0,m.qv)(s.buffer,s.byteOffset,s.byteLength)}p(a,"glTF image has no data");let c=await o(a,[B.S,h.Ge],{mimeType:t.mimeType,basis:n.basis||{format:(0,A.h)()}},i);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),e.images=e.images||[],e.images[s]=c}const Tt={name:"glTF",id:"gltf",module:"gltf",version:"3.4.0-alpha.2",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;t={...Tt.options,...t},t.gltf={...Tt.options.gltf,...t.gltf};const{byteOffset:n=0}=t;return await Et({},e,n,t,s)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}}},87391:(e,t,s)=>{"use strict";s.d(t,{S:()=>r});var n=s(77552),i=s(46936);const r={id:"image",module:"images",name:"Images",version:"3.4.0-alpha.2",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:n.Z,tests:[e=>Boolean((0,i.I)(new DataView(e)))],options:{image:{type:"auto",decode:!0}}}},46936:(e,t,s)=>{"use strict";function n(e){return function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=(i=t,[...i].map((e=>e.charCodeAt(0))));var i;for(let r=0;r<n.length;++r)if(n[r]!==e[r+s])return!1;return!0}(e,"ftyp",4)?0==(96&e[8])?null:function(e){switch((t=e,s=8,n=12,String.fromCharCode(...t.slice(s,n))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var t,s,n}(e):null}s.d(t,{I:()=>o});const i=!1,r=!0;function o(e){const t=a(e);return function(e){const t=a(e),s=t.byteLength>=24&&2303741511===t.getUint32(0,i);if(!s)return null;return{mimeType:"image/png",width:t.getUint32(16,i),height:t.getUint32(20,i)}}(t)||function(e){const t=a(e),s=t.byteLength>=3&&65496===t.getUint16(0,i)&&255===t.getUint8(2);if(!s)return null;const{tableMarkers:n,sofMarkers:r}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let s=65504;s<65520;++s)e.add(s);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let o=2;for(;o+9<t.byteLength;){const e=t.getUint16(o,i);if(r.has(e))return{mimeType:"image/jpeg",height:t.getUint16(o+5,i),width:t.getUint16(o+7,i)};if(!n.has(e))return null;o+=2,o+=t.getUint16(o,i)}return null}(t)||function(e){const t=a(e),s=t.byteLength>=10&&1195984440===t.getUint32(0,i);if(!s)return null;return{mimeType:"image/gif",width:t.getUint16(6,r),height:t.getUint16(8,r)}}(t)||function(e){const t=a(e),s=t.byteLength>=14&&16973===t.getUint16(0,i)&&t.getUint32(2,r)===t.byteLength;if(!s)return null;return{mimeType:"image/bmp",width:t.getUint32(18,r),height:t.getUint32(22,r)}}(t)||function(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),s=n(t);if(!s)return null;return{mimeType:s.mimeType,width:0,height:0}}(t)}function a(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}},72944:(e,t,s)=>{"use strict";function n(e){const t=o(e);if(!t)throw new Error("Not an image");return t}function i(e){return r(e)}function r(e){switch(n(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),s=t.getContext("2d");if(!s)throw new Error("getImageData");return t.width=e.width,t.height=e.height,s.drawImage(e,0,0),s.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function o(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"==typeof e&&e.data&&e.width&&e.height?"data":null}s.d(t,{Ad:()=>i,n$:()=>r})},77552:(e,t,s)=>{"use strict";s.d(t,{Z:()=>_});var n=s(73613),i=s(39579);const{_parseImageNode:r}=globalThis,o="undefined"!=typeof Image,a="undefined"!=typeof ImageBitmap,c=Boolean(r),l=!!i.jU||c;var u=s(72944);const d=/^data:image\/svg\+xml/,h=/\.svg((\?|#).*)?$/;function A(e){return e&&(d.test(e)||h.test(e))}function B(e,t){if(A(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function f(e,t,s){const n=function(e,t){if(A(t)){let t=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(t))}return B(e,t)}(e,s),i=self.URL||self.webkitURL,r="string"!=typeof n&&i.createObjectURL(n);try{return await async function(e,t){const s=new Image;if(s.src=e,t.image&&t.image.decode&&s.decode)return await s.decode(),s;return await new Promise(((t,n)=>{try{s.onload=()=>t(s),s.onerror=t=>n(new Error("Could not load image ".concat(e,": ").concat(t)))}catch(i){n(i)}}))}(r||n,t)}finally{r&&i.revokeObjectURL(r)}}const C={};let m=!0;async function p(e,t,s){let n;if(A(s)){n=await f(e,t,s)}else n=B(e,s);const i=t&&t.imagebitmap;return await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e){for(const t in e||C)return!1;return!0}(t)&&m||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(s){console.warn(s),m=!1}return await createImageBitmap(e)}(n,i)}var g=s(46936);async function _(e,t,s){const i=((t=t||{}).image||{}).type||"auto",{url:r}=s||{};let c;switch(function(e){switch(e){case"auto":case"data":return function(){if(a)return"imagebitmap";if(o)return"image";if(l)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return a||o||l;case"imagebitmap":return a;case"image":return o;case"data":return l;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}(e),e}}(i)){case"imagebitmap":c=await p(e,t,r);break;case"image":c=await f(e,t,r);break;case"data":c=await async function(e,t){const{mimeType:s}=(0,g.I)(e)||{},i=globalThis._parseImageNode;return(0,n.h)(i),await i(e,s)}(e);break;default:(0,n.h)(!1)}return"data"===i&&(c=(0,u.n$)(c)),c}},2482:(e,t,s)=>{"use strict";function n(e,t,s){if(s=s||e.byteLength,e.byteLength<s||t.byteLength<s)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let r=0;r<n.length;++r)if(n[r]!==i[r])return!1;return!0}function i(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const n=t.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),i=n.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(i);let o=0;for(const a of n)r.set(a,o),o+=a.byteLength;return r.buffer}function r(e,t,s){const n=void 0!==s?new Uint8Array(e).subarray(t,t+s):new Uint8Array(e).subarray(t);return new Uint8Array(n).buffer}s.d(t,{JY:()=>i,Xq:()=>n,qv:()=>r})},73613:(e,t,s)=>{"use strict";function n(e,t){if(!e)throw new Error(t||"loader assertion failed.")}s.d(t,{h:()=>n})},39579:(e,t,s)=>{"use strict";s.d(t,{jU:()=>n});"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==s.g&&s.g,"undefined"!=typeof document&&document;const n=Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser),i="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);i&&parseFloat(i[1])},25735:(e,t,s)=>{"use strict";s.d(t,{Ed:()=>i,GZ:()=>r});var n=s(2482);async function i(e,t){for(;;){const{done:s,value:n}=await e.next();if(s)return void e.return();if(t(n))return}}async function r(e){const t=[];for await(const s of e)t.push(s);return(0,n.JY)(...t)}},96351:(e,t,s)=>{"use strict";s.d(t,{i3:()=>r});let n="";const i={};function r(e){for(const t in i)if(e.startsWith(t)){const s=i[t];e=e.replace(t,s)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat(n).concat(e)),e}},59645:(e,t,s)=>{"use strict";function n(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function i(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}s.d(t,{XX:()=>i,vB:()=>n})},32023:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(81180),i=s(23881);const r={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.Z)(this,"props",void 0),(0,n.Z)(this,"stats",void 0),(0,n.Z)(this,"activeRequestCount",0),(0,n.Z)(this,"requestQueue",[]),(0,n.Z)(this,"requestMap",new Map),(0,n.Z)(this,"deferredUpdate",null),this.props={...r,...e},this.stats=new i.Z({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const s={handle:e,priority:0,getPriority:t},n=new Promise((e=>(s.resolve=e,s)));return this.requestQueue.push(s),this.requestMap.set(e,n),this._issueNewRequests(),n}_issueRequest(e){const{handle:t,resolve:s}=e;let n=!1;const i=()=>{n||(n=!0,this.requestMap.delete(t),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,s?s({done:i}):Promise.resolve({done:i})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(let t=0;t<e;++t){const e=this.requestQueue.shift();e&&this._issueRequest(e)}}}_updateAllRequests(){const e=this.requestQueue;for(let t=0;t<e.length;++t){const s=e[t];this._updateRequest(s)||(e.splice(t,1),this.requestMap.delete(s.handle),t--)}e.sort(((e,t)=>e.priority-t.priority))}_updateRequest(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}},57175:(e,t,s)=>{"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];const s=e>>11&31,n=e>>5&63,i=31&e;return t[0]=s<<3,t[1]=n<<2,t[2]=i<<3,t}s.d(t,{m:()=>n})},86430:(e,t,s)=>{"use strict";s.d(t,{hP:()=>l});var n=s(37069),i=s(43855),r=s(14034);new n.Z,new i.Z,new n.Z,new n.Z,new Uint8Array(1);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return(0,r.uZ)(e,0,t)/t*2-1}function a(e){return e<0?-1:1}function c(e,t,s,n){if(function(e,t){if(!e)throw new Error("math.gl assertion failed. ".concat(t))}(n),e<0||e>s||t<0||t>s)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(s));if(n.x=o(e,s),n.y=o(t,s),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0){const e=n.x;n.x=(1-Math.abs(n.y))*a(e),n.y=(1-Math.abs(e))*a(n.y)}return n.normalize()}function l(e,t,s){return c(e,t,255,s)}},18101:(e,t,s)=>{"use strict";s.d(t,{GL:()=>i,I6:()=>n});const n={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},i={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,...n}},48710:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(18101);const i={[n.I6.DOUBLE]:Float64Array,[n.I6.FLOAT]:Float32Array,[n.I6.UNSIGNED_SHORT]:Uint16Array,[n.I6.UNSIGNED_INT]:Uint32Array,[n.I6.UNSIGNED_BYTE]:Uint8Array,[n.I6.BYTE]:Int8Array,[n.I6.SHORT]:Int16Array,[n.I6.INT]:Int32Array},r={DOUBLE:n.I6.DOUBLE,FLOAT:n.I6.FLOAT,UNSIGNED_SHORT:n.I6.UNSIGNED_SHORT,UNSIGNED_INT:n.I6.UNSIGNED_INT,UNSIGNED_BYTE:n.I6.UNSIGNED_BYTE,BYTE:n.I6.BYTE,SHORT:n.I6.SHORT,INT:n.I6.INT},o="Failed to convert GL type";class a{static fromTypedArray(e){e=ArrayBuffer.isView(e)?e.constructor:e;for(const t in i){if(i[t]===e)return t}throw new Error(o)}static fromName(e){const t=r[e];if(!t)throw new Error(o);return t}static getArrayType(e){switch(e){case n.I6.UNSIGNED_SHORT_5_6_5:case n.I6.UNSIGNED_SHORT_4_4_4_4:case n.I6.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:const t=i[e];if(!t)throw new Error(o);return t}}static getByteSize(e){return a.getArrayType(e).BYTES_PER_ELEMENT}static validate(e){return Boolean(a.getArrayType(e))}static createTypedArray(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;void 0===n&&(n=(t.byteLength-s)/a.getByteSize(e));return new(a.getArrayType(e))(t,s,n)}}},78354:(e,t,s)=>{"use strict";s.d(t,{ou:()=>c,qB:()=>a});var n=s(48347),i=s(72101),r=s(75228),o=s(4613);function a(e,t){const s=function(e){const t=[];for(const s in e){const n=e[s];t.push(c(s,n))}return t}(e);return new n.Z(s,t)}function c(e,t,s){const n=(0,o.Y)(t.value),a=s||function(e){const t=new Map;"byteOffset"in e&&t.set("byteOffset",e.byteOffset.toString(10));"byteStride"in e&&t.set("byteStride",e.byteStride.toString(10));"normalized"in e&&t.set("normalized",e.normalized.toString());return t}(t);return new i.Z(e,new r.t7(t.size,new i.Z("value",n)),!1,a)}},61569:(e,t,s)=>{"use strict";function n(e){let t=1/0,s=1/0,n=1/0,i=-1/0,r=-1/0,o=-1/0;const a=e.POSITION?e.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const e=a[l],c=a[l+1],u=a[l+2];t=e<t?e:t,s=c<s?c:s,n=u<n?u:n,i=e>i?e:i,r=c>r?c:r,o=u>o?u:o}return[[t,s,n],[i,r,o]]}s.d(t,{v:()=>n})},4613:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i});var n=s(75228);function i(e){switch(e.constructor){case Int8Array:return new n.tJ;case Uint8Array:return new n.bz;case Int16Array:return new n.k6;case Uint16Array:return new n.s3;case Int32Array:return new n.Vq;case Uint32Array:return new n.cf;case Float32Array:return new n.yA;case Float64Array:return new n.Dh;default:throw new Error("array type not supported")}}},72101:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(81180);class i{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;(0,n.Z)(this,"name",void 0),(0,n.Z)(this,"type",void 0),(0,n.Z)(this,"nullable",void 0),(0,n.Z)(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=s,this.metadata=i}get typeId(){return this.type&&this.type.typeId}clone(){return new i(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}},48347:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(81180);class i{constructor(e,t){(0,n.Z)(this,"fields",void 0),(0,n.Z)(this,"metadata",void 0),function(e,t){if(!e)throw new Error(t||"loader assertion failed.")}(Array.isArray(e)),function(e){const t={};for(const s of e)t[s.name]&&console.warn("Schema: duplicated field name",s.name,s),t[s.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata)return!1;if(this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(){const e=Object.create(null);for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];for(const i of s)e[i]=!0;const r=this.fields.filter((t=>e[t.name]));return new i(r,this.metadata)}selectAt(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const n=t.map((e=>this.fields[e])).filter(Boolean);return new i(n,this.metadata)}assign(e){let t,s=this.metadata;if(e instanceof i){const n=e;t=n.fields,s=r(r(new Map,this.metadata),n.metadata)}else t=e;const n=Object.create(null);for(const i of this.fields)n[i.name]=i;for(const i of t)n[i.name]=i;const o=Object.values(n);return new i(o,s)}}function r(e,t){return new Map([...e||new Map,...t||new Map])}},75228:(e,t,s)=>{"use strict";s.d(t,{t7:()=>I,yA:()=>D,Dh:()=>S,k6:()=>p,Vq:()=>g,tJ:()=>m,s3:()=>y,cf:()=>E,bz:()=>_});var n=s(81180);let i,r,o,a,c,l,u,d,h;!function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"}(i||(i={}));class A{static isNull(e){return e&&e.typeId===i.Null}static isInt(e){return e&&e.typeId===i.Int}static isFloat(e){return e&&e.typeId===i.Float}static isBinary(e){return e&&e.typeId===i.Binary}static isUtf8(e){return e&&e.typeId===i.Utf8}static isBool(e){return e&&e.typeId===i.Bool}static isDecimal(e){return e&&e.typeId===i.Decimal}static isDate(e){return e&&e.typeId===i.Date}static isTime(e){return e&&e.typeId===i.Time}static isTimestamp(e){return e&&e.typeId===i.Timestamp}static isInterval(e){return e&&e.typeId===i.Interval}static isList(e){return e&&e.typeId===i.List}static isStruct(e){return e&&e.typeId===i.Struct}static isUnion(e){return e&&e.typeId===i.Union}static isFixedSizeBinary(e){return e&&e.typeId===i.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===i.FixedSizeList}static isMap(e){return e&&e.typeId===i.Map}static isDictionary(e){return e&&e.typeId===i.Dictionary}get typeId(){return i.NONE}compareTo(e){return this===e}}class B extends(null){get typeId(){return Type.Null}get[Symbol.toStringTag](){return"Null"}toString(){return"Null"}}class f extends(null){get typeId(){return Type.Bool}get[Symbol.toStringTag](){return"Bool"}toString(){return"Bool"}}r=Symbol.toStringTag;class C extends A{constructor(e,t){super(),(0,n.Z)(this,"isSigned",void 0),(0,n.Z)(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return i.Int}get[r](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class m extends C{constructor(){super(!0,8)}}class p extends C{constructor(){super(!0,16)}}class g extends C{constructor(){super(!0,32)}}class _ extends C{constructor(){super(!1,8)}}class y extends C{constructor(){super(!1,16)}}class E extends C{constructor(){super(!1,32)}}const b=32,T=64;o=Symbol.toStringTag;class M extends A{constructor(e){super(),(0,n.Z)(this,"precision",void 0),this.precision=e}get typeId(){return i.Float}get[o](){return"Float"}toString(){return"Float".concat(this.precision)}}class D extends M{constructor(){super(b)}}class S extends M{constructor(){super(T)}}class R extends(null){constructor(){super()}get typeId(){return Type.Binary}toString(){return"Binary"}get[Symbol.toStringTag](){return"Binary"}}class G extends(null){get typeId(){return Type.Utf8}get[Symbol.toStringTag](){return"Utf8"}toString(){return"Utf8"}}a=Symbol.toStringTag;c=Symbol.toStringTag;l=Symbol.toStringTag;u=Symbol.toStringTag;d=Symbol.toStringTag;class I extends A{constructor(e,t){super(),(0,n.Z)(this,"listSize",void 0),(0,n.Z)(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return i.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[d](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}h=Symbol.toStringTag},4214:(e,t,s)=>{"use strict";s.d(t,{Ge:()=>a});var n=s(96013),i=s(41699),r=s(1975);const o={name:"Basis",id:n.jU?"basis":"basis-nodejs",module:"textures",version:i.q,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},a={...o,parse:r.Z}},31330:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});const n={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919}},1975:(e,t,s)=>{"use strict";s.d(t,{Z:()=>f,h:()=>y});var n=s(96706);const i="3.4.0-alpha.2",r="https://unpkg.com/@loaders.gl/textures@".concat(i,"/dist/libs/basis_encoder.wasm"),o="https://unpkg.com/@loaders.gl/textures@".concat(i,"/dist/libs/basis_encoder.js");let a,c;async function l(e){const t=e.modules||{};return t.basis?t.basis:(a=a||async function(e){let t=null,s=null;return[t,s]=await Promise.all([await(0,n.Y)("basis_transcoder.js","textures",e),await(0,n.Y)("basis_transcoder.wasm","textures",e)]),t=t||globalThis.BASIS,await function(e,t){const s={};t&&(s.wasmBinary=t);return new Promise((t=>{e(s).then((e=>{const{BasisFile:s,initializeBasis:n}=e;n(),t({BasisFile:s})}))}))}(t,s)}(e),await a)}async function u(e){const t=e.modules||{};return t.basisEncoder?t.basisEncoder:(c=c||async function(e){let t=null,s=null;return[t,s]=await Promise.all([await(0,n.Y)(o,"textures",e),await(0,n.Y)(r,"textures",e)]),t=t||globalThis.BASIS,await function(e,t){const s={};t&&(s.wasmBinary=t);return new Promise((t=>{e(s).then((e=>{const{BasisFile:s,KTX2File:n,initializeBasis:i,BasisEncoder:r}=e;i(),t({BasisFile:s,KTX2File:n,BasisEncoder:r})}))}))}(t,s)}(e),await c)}var d=s(31330),h=s(91872),A=s(17038);const B={etc1:{basisFormat:0,compressed:!0,format:d.p.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:d.p.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:d.p.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:d.p.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:d.p.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:d.p.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};async function f(e,t){if("auto"===t.basis.containerFormat){if((0,A.j)(e)){return p((await u(t)).KTX2File,e,t)}const{BasisFile:s}=await l(t);return C(s,e,t)}if("encoder"===t.basis.module){const s=await u(t);return"ktx2"===t.basis.containerFormat?p(s.KTX2File,e,t):C(s.BasisFile,e,t)}{const{BasisFile:s}=await l(t);return C(s,e,t)}}function C(e,t,s){const n=new e(new Uint8Array(t));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");const e=n.getNumImages(),t=[];for(let i=0;i<e;i++){const e=n.getNumLevels(i),r=[];for(let t=0;t<e;t++)r.push(m(n,i,t,s));t.push(r)}return t}finally{n.close(),n.delete()}}function m(e,t,s,n){const i=e.getImageWidth(t,s),r=e.getImageHeight(t,s),o=e.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=_(n,o),u=e.getImageTranscodedSizeInBytes(t,s,l),d=new Uint8Array(u);if(!e.transcodeImage(d,t,s,l,0,0))throw new Error("failed to start Basis transcoding");return{width:i,height:r,data:d,compressed:a,format:c,hasAlpha:o}}function p(e,t,s){const n=new e(new Uint8Array(t));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");const e=n.getLevels(),t=[];for(let i=0;i<e;i++){t.push(g(n,i,s));break}return[t]}finally{n.close(),n.delete()}}function g(e,t,s){const{alphaFlag:n,height:i,width:r}=e.getImageLevelInfo(t,0,0),{compressed:o,format:a,basisFormat:c}=_(s,n),l=e.getImageTranscodedSizeInBytes(t,0,0,c),u=new Uint8Array(l);if(!e.transcodeImage(u,t,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:r,height:i,data:u,compressed:o,levelSize:l,hasAlpha:n,format:a}}function _(e,t){let s=e&&e.basis&&e.basis.format;return"auto"===s&&(s=y()),"object"==typeof s&&(s=t?s.alpha:s.noAlpha),s=s.toLowerCase(),B[s]}function y(){const e=(0,h.U)();return e.has("astc")?"astc-4x4":e.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:e.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:e.has("etc1")?"etc1":e.has("etc2")?"etc2":"rgb565"}},17038:(e,t,s)=>{"use strict";s.d(t,{j:()=>c,P:()=>l});var n=s(31029),i=s(2434),r=s(31330);const o={131:r.p.COMPRESSED_RGB_S3TC_DXT1_EXT,132:r.p.COMPRESSED_SRGB_S3TC_DXT1_EXT,133:r.p.COMPRESSED_RGBA_S3TC_DXT1_EXT,134:r.p.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,135:r.p.COMPRESSED_RGBA_S3TC_DXT3_EXT,136:r.p.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,137:r.p.COMPRESSED_RGBA_S3TC_DXT5_EXT,138:r.p.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,139:r.p.COMPRESSED_RED_RGTC1_EXT,140:r.p.COMPRESSED_SIGNED_RED_RGTC1_EXT,141:r.p.COMPRESSED_RED_GREEN_RGTC2_EXT,142:r.p.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT,147:r.p.COMPRESSED_RGB8_ETC2,148:r.p.COMPRESSED_SRGB8_ETC2,149:r.p.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,150:r.p.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,151:r.p.COMPRESSED_RGBA8_ETC2_EAC,152:r.p.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,153:r.p.COMPRESSED_R11_EAC,154:r.p.COMPRESSED_SIGNED_R11_EAC,155:r.p.COMPRESSED_RG11_EAC,156:r.p.COMPRESSED_SIGNED_RG11_EAC,157:r.p.COMPRESSED_RGBA_ASTC_4x4_KHR,158:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,159:r.p.COMPRESSED_RGBA_ASTC_5x4_KHR,160:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR,161:r.p.COMPRESSED_RGBA_ASTC_5x5_KHR,162:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,163:r.p.COMPRESSED_RGBA_ASTC_6x5_KHR,164:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,165:r.p.COMPRESSED_RGBA_ASTC_6x6_KHR,166:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,167:r.p.COMPRESSED_RGBA_ASTC_8x5_KHR,168:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,169:r.p.COMPRESSED_RGBA_ASTC_8x6_KHR,170:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,171:r.p.COMPRESSED_RGBA_ASTC_8x8_KHR,172:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,173:r.p.COMPRESSED_RGBA_ASTC_10x5_KHR,174:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,175:r.p.COMPRESSED_RGBA_ASTC_10x6_KHR,176:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,177:r.p.COMPRESSED_RGBA_ASTC_10x8_KHR,178:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,179:r.p.COMPRESSED_RGBA_ASTC_10x10_KHR,180:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,181:r.p.COMPRESSED_RGBA_ASTC_12x10_KHR,182:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,183:r.p.COMPRESSED_RGBA_ASTC_12x12_KHR,184:r.p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR,1000054e3:r.p.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,1000054001:r.p.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,1000066e3:r.p.COMPRESSED_RGBA_ASTC_4x4_KHR,1000066001:r.p.COMPRESSED_RGBA_ASTC_5x4_KHR,1000066002:r.p.COMPRESSED_RGBA_ASTC_5x5_KHR,1000066003:r.p.COMPRESSED_RGBA_ASTC_6x5_KHR,1000066004:r.p.COMPRESSED_RGBA_ASTC_6x6_KHR,1000066005:r.p.COMPRESSED_RGBA_ASTC_8x5_KHR,1000066006:r.p.COMPRESSED_RGBA_ASTC_8x6_KHR,1000066007:r.p.COMPRESSED_RGBA_ASTC_8x8_KHR,1000066008:r.p.COMPRESSED_RGBA_ASTC_10x5_KHR,1000066009:r.p.COMPRESSED_RGBA_ASTC_10x6_KHR,1000066010:r.p.COMPRESSED_RGBA_ASTC_10x8_KHR,1000066011:r.p.COMPRESSED_RGBA_ASTC_10x10_KHR,1000066012:r.p.COMPRESSED_RGBA_ASTC_12x10_KHR,1000066013:r.p.COMPRESSED_RGBA_ASTC_12x12_KHR};const a=[171,75,84,88,32,50,48,187,13,10,26,10];function c(e){const t=new Uint8Array(e);return!(t.byteLength<a.length||t[0]!==a[0]||t[1]!==a[1]||t[2]!==a[2]||t[3]!==a[3]||t[4]!==a[4]||t[5]!==a[5]||t[6]!==a[6]||t[7]!==a[7]||t[8]!==a[8]||t[9]!==a[9]||t[10]!==a[10]||t[11]!==a[11])}function l(e){const t=new Uint8Array(e),s=(0,n.ij)(t),r=Math.max(1,s.levels.length),a=s.pixelWidth,c=s.pixelHeight,l=(u=s.vkFormat,o[u]);var u;return(0,i.J)(s.levels,{mipMapLevels:r,width:a,height:c,sizeFunction:e=>e.uncompressedByteLength,internalFormat:l})}},2434:(e,t,s)=>{"use strict";function n(e,t){const s=new Array(t.mipMapLevels);let n=t.width,o=t.height,a=0;for(let c=0;c<t.mipMapLevels;++c){const l=r(t,n,o,e,c),u=i(e,c,a,l);s[c]={compressed:!0,format:t.internalFormat,data:u,width:n,height:o,levelSize:l},n=Math.max(1,n>>1),o=Math.max(1,o>>1),a+=l}return s}function i(e,t,s,n){return Array.isArray(e)?e[t].levelData:new Uint8Array(e.buffer,e.byteOffset+s,n)}function r(e,t,s,n,i){return Array.isArray(n)?e.sizeFunction(n[i]):e.sizeFunction(t,s)}s.d(t,{J:()=>n})},91872:(e,t,s)=>{"use strict";s.d(t,{U:()=>o});const n=["","WEBKIT_","MOZ_"],i={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let r=null;function o(e){if(!r){e=e||function(){try{return document.createElement("canvas").getContext("webgl")}catch(e){return null}}()||void 0,r=new Set;for(const t of n)for(const s in i)if(e&&e.getExtension("".concat(t).concat(s))){const e=i[s];r.add(e)}}return r}},41699:(e,t,s)=>{"use strict";s.d(t,{q:()=>n});const n="3.4.0-alpha.2"},33406:(e,t,s)=>{"use strict";s.d(t,{F$:()=>i,Qb:()=>n,R7:()=>r,ci:()=>a,fB:()=>c,i3:()=>o});const n={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},i={ADD:1,REPLACE:2},r={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"},o={I3S:"I3S",TILES3D:"TILES3D"},a={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"},c={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0}},53280:(e,t,s)=>{"use strict";s.d(t,{u:()=>ge});var n=s(81180),i=s(85451),r=s(43855),o=s(98759),a=s(23881),c=s(73613),l=s(59645),u=s(32023);class d{constructor(e,t,s){(0,n.Z)(this,"item",void 0),(0,n.Z)(this,"previous",void 0),(0,n.Z)(this,"next",void 0),this.item=e,this.previous=t,this.next=s}}class h{constructor(){(0,n.Z)(this,"head",null),(0,n.Z)(this,"tail",null),(0,n.Z)(this,"_length",0)}get length(){return this._length}add(e){const t=new d(e,this.tail,null);return this.tail?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t}remove(e){e&&(e.previous&&e.next?(e.previous.next=e.next,e.next.previous=e.previous):e.previous?(e.previous.next=null,this.tail=e.previous):e.next?(e.next.previous=null,this.head=e.next):(this.head=null,this.tail=null),e.next=null,e.previous=null,--this._length)}splice(e,t){e!==t&&(this.remove(t),this._insert(e,t))}_insert(e,t){const s=e.next;e.next=t,this.tail===e?this.tail=t:s.previous=t,t.next=s,t.previous=e,++this._length}}function A(e){return null!=e}class B{constructor(){(0,n.Z)(this,"_list",void 0),(0,n.Z)(this,"_sentinel",void 0),(0,n.Z)(this,"_trimTiles",void 0),this._list=new h,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}reset(){this._list.splice(this._list.tail,this._sentinel)}touch(e){const t=e._cacheNode;A(t)&&this._list.splice(this._sentinel,t)}add(e,t,s){A(t._cacheNode)||(t._cacheNode=this._list.add(t),s&&s(e,t))}unloadTile(e,t,s){const n=t._cacheNode;A(n)&&(this._list.remove(n),t._cacheNode=void 0,s&&s(e,t))}unloadTiles(e,t){const s=this._trimTiles;this._trimTiles=!1;const n=this._list,i=1024*e.maximumMemoryUsage*1024,r=this._sentinel;let o=n.head;for(;o!==r&&(e.gpuMemoryUsageInBytes>i||s);){const s=o.item;o=o.next,this.unloadTile(e,s,t)}}trim(){this._trimTiles=!0}}var f=s(36625);const C=new r.Z,m=new r.Z,p=new f.Mh([new f.JO,new f.JO,new f.JO,new f.JO,new f.JO,new f.JO]);function g(e,t){const{cameraDirection:s,cameraUp:n,height:i}=e,{metersPerUnit:a}=e.distanceScales,c=y(e,e.center),l=o.H.WGS84.eastNorthUpToFixedFrame(c),u=e.unprojectPosition(e.cameraPosition),d=o.H.WGS84.cartographicToCartesian(u,new r.Z),h=new r.Z(l.transformAsVector(new r.Z(s).scale(a))).normalize(),A=new r.Z(l.transformAsVector(new r.Z(n).scale(a))).normalize();!function(e){const t=e.getFrustumPlanes(),s=_(t.near,e.cameraPosition),n=y(e,s),i=y(e,e.cameraPosition,m);let r=0;p.planes[r++].fromPointNormal(n,C.copy(n).subtract(i));for(const o in t){if("near"===o)continue;const i=y(e,_(t[o],s,m),m);p.planes[r++].fromPointNormal(i,C.copy(n).subtract(i))}}(e);const B=e.constructor,{longitude:f,latitude:g,width:E,bearing:b,zoom:T}=e;return{camera:{position:d,direction:h,up:A},viewport:e,topDownViewport:new B({longitude:f,latitude:g,height:i,width:E,bearing:b,zoom:T,pitch:0}),height:i,cullingVolume:p,frameNumber:t,sseDenominator:1.15}}function _(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.Z;const n=e.normal.dot(t);return s.copy(e.normal).scale(e.distance-n).add(t),s}function y(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.Z;const n=e.unprojectPosition(t);return o.H.WGS84.cartographicToCartesian(n,s)}const E=6356752.314245179,b=new r.Z;function T(e,t){if(e instanceof f.F7){const{halfAxes:s}=e,n=function(e){e.getColumn(0,b);const t=e.getColumn(1),s=e.getColumn(2),n=b.add(t).add(s);return n.len()}(s);return Math.log2(E/(n+t[2]))}if(e instanceof f.KM){const{radius:s}=e;return Math.log2(E/(s+t[2]))}if(e.width&&e.height){const{width:t,height:s}=e;return(Math.log2(6378137/t)+Math.log2(6378137/s))/2}return 1}function M(e,t,s){const n=o.H.WGS84.cartographicToCartesian([e.xmax,e.ymax,e.zmax],new r.Z),i=Math.sqrt(Math.pow(n[0]-s[0],2)+Math.pow(n[1]-s[1],2)+Math.pow(n[2]-s[2],2));return Math.log2(E/(i+t[2]))}var D=s(37258),S=s(33406),R=s(14034),G=s(79108),I=s(80540);function F(e){return null!=e}const v=new r.Z,w=new r.Z,O=new r.Z,H=new r.Z;function J(e,t,s){if((0,c.h)(e,"3D Tile: boundingVolume must be defined"),e.box)return function(e,t,s){const n=new r.Z(e[0],e[1],e[2]);t.transform(n,n);let i=[];if(10===e.length){const t=e.slice(3,6),s=new G.Z;s.fromArray(e,6);const n=new r.Z([1,0,0]),o=new r.Z([0,1,0]),a=new r.Z([0,0,1]);n.transformByQuaternion(s),n.scale(t[0]),o.transformByQuaternion(s),o.scale(t[1]),a.transformByQuaternion(s),a.scale(t[2]),i=[...n.toArray(),...o.toArray(),...a.toArray()]}else i=[...e.slice(3,6),...e.slice(6,9),...e.slice(9,12)];const o=t.transformAsVector(i.slice(0,3)),a=t.transformAsVector(i.slice(3,6)),c=t.transformAsVector(i.slice(6,9)),l=new I.Z([o[0],o[1],o[2],a[0],a[1],a[2],c[0],c[1],c[2]]);if(F(s))return s.center=n,s.halfAxes=l,s;return new f.F7(n,l)}(e.box,t,s);if(e.region){const[t,s,n,a,c,l]=e.region,u=o.H.WGS84.cartographicToCartesian([(0,R.RW)(t),(0,R.RW)(a),c],O),d=o.H.WGS84.cartographicToCartesian([(0,R.RW)(n),(0,R.RW)(s),l],H),h=(new r.Z).addVectors(u,d).multiplyScalar(.5),A=(new r.Z).subVectors(u,d).len()/2;return U([h[0],h[1],h[2],A],new i.Z)}if(e.sphere)return U(e.sphere,t,s);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function x(e,t){if(e.box)return function(e){const t=P(),{halfAxes:s}=e,n=new r.Z(s.getColumn(0)),i=new r.Z(s.getColumn(1)),o=new r.Z(s.getColumn(2));for(let r=0;r<2;r++){for(let s=0;s<2;s++){for(let s=0;s<2;s++)v.copy(e.center),v.add(n),v.add(i),v.add(o),L(t,v),o.negate();i.negate()}n.negate()}return t}(t);if(e.region){const[t,s,n,i,r,o]=e.region;return[[(0,R.RW)(t),(0,R.RW)(s),r],[(0,R.RW)(n),(0,R.RW)(i),o]]}if(e.sphere)return function(e){const t=P(),{center:s,radius:n}=e,i=o.H.WGS84.scaleToGeodeticSurface(s,v);let a;a=i?o.H.WGS84.geodeticSurfaceNormal(i):new r.Z(0,0,1);let c=new r.Z(a[2],-a[1],0);c.len()>0?c.normalize():c=new r.Z(0,1,0);const l=c.clone().cross(a);for(const r of[c,l,a]){w.copy(r).scale(n);for(let e=0;e<2;e++)v.copy(s),v.add(w),L(t,v),w.negate()}return t}(t);throw new Error("Unkown boundingVolume type")}function U(e,t,s){const n=new r.Z(e[0],e[1],e[2]);t.transform(n,n);const i=t.getScale(w),o=Math.max(Math.max(i[0],i[1]),i[2]),a=e[3]*o;return F(s)?(s.center=n,s.radius=a,s):new f.KM(n,a)}function P(){return[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]]}function L(e,t){o.H.WGS84.cartesianToCartographic(t,v),e[0][0]=Math.min(e[0][0],v[0]),e[0][1]=Math.min(e[0][1],v[1]),e[0][2]=Math.min(e[0][2],v[2]),e[1][0]=Math.max(e[1][0],v[0]),e[1][1]=Math.max(e[1][1],v[1]),e[1][2]=Math.max(e[1][2],v[2])}new r.Z,new r.Z,new i.Z,new r.Z,new r.Z,new r.Z;function Z(e,t){if(e.dynamicScreenSpaceError&&e.dynamicScreenSpaceErrorComputedDensity){const s=e.dynamicScreenSpaceErrorComputedDensity,n=e.dynamicScreenSpaceErrorFactor,i=function(e,t){const s=e*t;return 1-Math.exp(-s*s)}(t,s)*n;return i}return 0}const K=new r.Z,N=new r.Z,j=new r.Z,Q=new r.Z,X=new r.Z,V=new i.Z,Y=new i.Z;function k(e,t){const{topDownViewport:s}=t,n=e.header.mbs[1],i=e.header.mbs[0],r=e.header.mbs[2],a=e.header.mbs[3],c=[...e.boundingVolume.center],l=s.unprojectPosition(s.cameraPosition);o.H.WGS84.cartographicToCartesian(l,K),N.copy(K).subtract(c).normalize(),o.H.WGS84.eastNorthUpToFixedFrame(c,V),Y.copy(V).invert(),j.copy(K).transform(Y);const u=Math.sqrt(j[0]*j[0]+j[1]*j[1]),d=u*u/j[2];Q.copy([j[0],j[1],d]);const h=Q.transform(V).subtract(c).normalize(),A=N.cross(h).normalize().scale(a).add(c),B=o.H.WGS84.cartesianToCartographic(A),f=s.project([i,n,r]),C=s.project(B);return X.copy(f).subtract(C).magnitude()}class W{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,n.Z)(this,"_map",new Map),(0,n.Z)(this,"_array",void 0),(0,n.Z)(this,"_length",void 0),this._array=new Array(e),this._length=e}get length(){return this._length}set length(e){this._length=e,e>this._array.length&&(this._array.length=e)}get values(){return this._array}get(e){return(0,c.h)(e<this._array.length),this._array[e]}set(e,t){(0,c.h)(e>=0),e>=this.length&&(this.length=e+1),this._map.has(this._array[e])&&this._map.delete(this._array[e]),this._array[e]=t,this._map.set(t,e)}delete(e){const t=this._map.get(e);t>=0&&(this._array.splice(t,1),this._map.delete(e),this.length--)}peek(){return this._array[this._length-1]}push(e){if(!this._map.has(e)){const t=this.length++;this._array[t]=e,this._map.set(e,t)}}pop(){const e=this._array[--this.length];return this._map.delete(e),e}reserve(e){(0,c.h)(e>=0),e>this._array.length&&(this._array.length=e)}resize(e){(0,c.h)(e>=0),this.length=e}trim(e){null==e&&(e=this.length),this._array.length=e}reset(){this._array=[],this._map=new Map,this._length=0}find(e){return this._map.has(e)}}const q={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:()=>{},viewportTraversersMap:{},basePath:""};class z{traversalFinished(e){return!0}constructor(e){(0,n.Z)(this,"options",void 0),(0,n.Z)(this,"root",void 0),(0,n.Z)(this,"requestedTiles",void 0),(0,n.Z)(this,"selectedTiles",void 0),(0,n.Z)(this,"emptyTiles",void 0),(0,n.Z)(this,"lastUpdate",(new Date).getTime()),(0,n.Z)(this,"updateDebounceTime",1e3),(0,n.Z)(this,"_traversalStack",void 0),(0,n.Z)(this,"_emptyTraversalStack",void 0),(0,n.Z)(this,"_frameNumber",void 0),this.options={...q,...e},this._traversalStack=new W,this._emptyTraversalStack=new W,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}traverse(e,t,s){this.root=e,this.options={...this.options,...s},this.reset(),this.updateTile(e,t),this._frameNumber=t.frameNumber,this.executeTraversal(e,t)}reset(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}executeTraversal(e,t){const s=this._traversalStack;for(e._selectionDepth=1,s.push(e);s.length>0;){const e=s.pop();let n=!1;this.canTraverse(e,t)&&(this.updateChildTiles(e,t),n=this.updateAndPushChildren(e,t,s,e.hasRenderContent?e._selectionDepth+1:e._selectionDepth));const i=e.parent,r=Boolean(!i||i._shouldRefine),o=!n;e.hasRenderContent?e.refine===S.F$.ADD?(this.loadTile(e,t),this.selectTile(e,t)):e.refine===S.F$.REPLACE&&(this.loadTile(e,t),o&&this.selectTile(e,t)):(this.emptyTiles[e.id]=e,this.loadTile(e,t),o&&this.selectTile(e,t)),this.touchTile(e,t),e._shouldRefine=n&&r}const n=(new Date).getTime();(this.traversalFinished(t)||n-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=n,this.options.onTraversalEnd(t))}updateChildTiles(e,t){const s=e.children;for(const n of s)this.updateTile(n,t);return!0}updateAndPushChildren(e,t,s,n){const{loadSiblings:i,skipLevelOfDetail:r}=this.options,o=e.children;o.sort(this.compareDistanceToCamera.bind(this));const a=e.refine===S.F$.REPLACE&&e.hasRenderContent&&!r;let c=!1,l=!0;for(const u of o)if(u._selectionDepth=n,u.isVisibleAndInRequestVolume?(s.find(u)&&s.delete(u),s.push(u),c=!0):(a||i)&&(this.loadTile(u,t),this.touchTile(u,t)),a){let e;if(e=!!u._inRequestVolume&&(u.hasRenderContent?u.contentAvailable:this.executeEmptyTraversal(u,t)),l=l&&e,!l)return!1}return c||(l=!1),l}updateTile(e,t){this.updateTileVisibility(e,t)}selectTile(e,t){this.shouldSelectTile(e)&&(e._selectedFrame=t.frameNumber,this.selectedTiles[e.id]=e)}loadTile(e,t){this.shouldLoadTile(e)&&(e._requestedFrame=t.frameNumber,e._priority=e._getPriority(),this.requestedTiles[e.id]=e)}touchTile(e,t){e.tileset._cache.touch(e),e._touchedFrame=t.frameNumber}canTraverse(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!!e.hasChildren&&(e.hasTilesetContent?!e.contentExpired:!(!n&&!e.isVisibleAndInRequestVolume)&&this.shouldRefine(e,t,s))}shouldLoadTile(e){return e.hasUnloadedContent||e.contentExpired}shouldSelectTile(e){return e.contentAvailable&&!this.options.skipLevelOfDetail}shouldRefine(e,t,s){let n=e._screenSpaceError;return s&&(n=e.getScreenSpaceError(t,!0)),n>this.options.maximumScreenSpaceError}updateTileVisibility(e,t){const s=[];if(this.options.viewportTraversersMap)for(const n in this.options.viewportTraversersMap){this.options.viewportTraversersMap[n]===t.viewport.id&&s.push(n)}else s.push(t.viewport.id);e.updateVisibility(t,s)}compareDistanceToCamera(e,t){return e._distanceToCamera-t._distanceToCamera}anyChildrenVisible(e,t){let s=!1;for(const n of e.children)n.updateVisibility(t),s=s||n.isVisibleAndInRequestVolume;return s}executeEmptyTraversal(e,t){let s=!0;const n=this._emptyTraversalStack;for(n.push(e);n.length>0&&s;){const e=n.pop();this.updateTile(e,t),e.isVisibleAndInRequestVolume||this.loadTile(e,t),this.touchTile(e,t);if(!e.hasRenderContent&&this.canTraverse(e,t,!1,!0)){const t=e.children;for(const e of t)n.find(e)&&n.delete(e),n.push(e)}else e.contentAvailable||(s=!1)}return s}}const $=new r.Z;class ee{constructor(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";(0,n.Z)(this,"tileset",void 0),(0,n.Z)(this,"header",void 0),(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"url",void 0),(0,n.Z)(this,"parent",void 0),(0,n.Z)(this,"refine",void 0),(0,n.Z)(this,"type",void 0),(0,n.Z)(this,"contentUrl",void 0),(0,n.Z)(this,"lodMetricType",void 0),(0,n.Z)(this,"lodMetricValue",void 0),(0,n.Z)(this,"boundingVolume",void 0),(0,n.Z)(this,"content",void 0),(0,n.Z)(this,"contentState",void 0),(0,n.Z)(this,"gpuMemoryUsageInBytes",void 0),(0,n.Z)(this,"children",void 0),(0,n.Z)(this,"depth",void 0),(0,n.Z)(this,"viewportIds",void 0),(0,n.Z)(this,"transform",void 0),(0,n.Z)(this,"extensions",void 0),(0,n.Z)(this,"implicitTiling",void 0),(0,n.Z)(this,"userData",void 0),(0,n.Z)(this,"computedTransform",void 0),(0,n.Z)(this,"hasEmptyContent",void 0),(0,n.Z)(this,"hasTilesetContent",void 0),(0,n.Z)(this,"traverser",void 0),(0,n.Z)(this,"_cacheNode",void 0),(0,n.Z)(this,"_frameNumber",void 0),(0,n.Z)(this,"_lodJudge",void 0),(0,n.Z)(this,"_expireDate",void 0),(0,n.Z)(this,"_expiredContent",void 0),(0,n.Z)(this,"_shouldRefine",void 0),(0,n.Z)(this,"_boundingBox",void 0),(0,n.Z)(this,"_distanceToCamera",void 0),(0,n.Z)(this,"_centerZDepth",void 0),(0,n.Z)(this,"_screenSpaceError",void 0),(0,n.Z)(this,"_visibilityPlaneMask",void 0),(0,n.Z)(this,"_visible",void 0),(0,n.Z)(this,"_inRequestVolume",void 0),(0,n.Z)(this,"_stackLength",void 0),(0,n.Z)(this,"_selectionDepth",void 0),(0,n.Z)(this,"_touchedFrame",void 0),(0,n.Z)(this,"_visitedFrame",void 0),(0,n.Z)(this,"_selectedFrame",void 0),(0,n.Z)(this,"_requestedFrame",void 0),(0,n.Z)(this,"_priority",void 0),(0,n.Z)(this,"_contentBoundingVolume",void 0),(0,n.Z)(this,"_viewerRequestVolume",void 0),(0,n.Z)(this,"_initialTransform",void 0),this.header=t,this.tileset=e,this.id=r||t.id,this.url=t.url,this.parent=s,this.refine=this._getRefine(t.refine),this.type=t.type,this.contentUrl=t.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=S.Qb.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this.extensions=null,this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new z({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new i.Z,this.transform=new i.Z,this._initializeLodMetric(t),this._initializeTransforms(t),this._initializeBoundingVolumes(t),this._initializeContent(t),this._initializeRenderingState(t),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,this.implicitTiling=null,Object.seal(this)}destroy(){this.header=null}isDestroyed(){return null===this.header}get selected(){return this._selectedFrame===this.tileset._frameNumber}get isVisible(){return this._visible}get isVisibleAndInRequestVolume(){return this._visible&&this._inRequestVolume}get hasRenderContent(){return!this.hasEmptyContent&&!this.hasTilesetContent}get hasChildren(){return this.children.length>0||this.header.children&&this.header.children.length>0}get contentReady(){return this.contentState===S.Qb.READY||this.hasEmptyContent}get contentAvailable(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}get hasUnloadedContent(){return this.hasRenderContent&&this.contentUnloaded}get contentUnloaded(){return this.contentState===S.Qb.UNLOADED}get contentExpired(){return this.contentState===S.Qb.EXPIRED}get contentFailed(){return this.contentState===S.Qb.FAILED}get distanceToCamera(){return this._distanceToCamera}get screenSpaceError(){return this._screenSpaceError}get boundingBox(){return this._boundingBox||(this._boundingBox=x(this.header.boundingVolume,this.boundingVolume)),this._boundingBox}getScreenSpaceError(e,t){switch(this.tileset.type){case S.i3.I3S:return k(this,e);case S.i3.TILES3D:return function(e,t,s){const n=e.tileset,i=e.parent&&e.parent.lodMetricValue||e.lodMetricValue,r=s?i:e.lodMetricValue;if(0===r)return 0;const o=Math.max(e._distanceToCamera,1e-7),{height:a,sseDenominator:c}=t,{viewDistanceScale:l}=n.options;let u=r*a*(l||1)/(o*c);return u-=Z(n,o),u}(this,e,t);default:throw new Error("Unsupported tileset type")}}unselect(){this._selectedFrame=0}_getPriority(){const e=this.tileset._traverser,{skipLevelOfDetail:t}=e.options,s=this.refine===S.F$.ADD||t;if(s&&!this.isVisible&&void 0!==this._visible)return-1;if(this.tileset._frameNumber-this._touchedFrame>=1)return-1;if(this.contentState===S.Qb.UNLOADED)return-1;const n=this.parent,i=n&&(!s||0===this._screenSpaceError||n.hasTilesetContent)?n._screenSpaceError:this._screenSpaceError,r=e.root?e.root._screenSpaceError:0;return Math.max(r-i,0)}async loadContent(){if(this.hasEmptyContent)return!1;if(this.content)return!0;this.contentExpired&&(this._expireDate=null),this.contentState=S.Qb.LOADING;const e=await this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));if(!e)return this.contentState=S.Qb.UNLOADED,!1;try{const e=this.tileset.getTileUrl(this.contentUrl),t=this.tileset.loader,s={...this.tileset.loadOptions,[t.id]:{...this.tileset.loadOptions[t.id],isTileset:"json"===this.type,...this._getLoaderSpecificOptions(t.id)}};return this.content=await(0,D.z)(e,t,s),this.tileset.options.contentLoader&&await this.tileset.options.contentLoader(this),this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=S.Qb.READY,this._onContentLoaded(),!0}catch(t){throw this.contentState=S.Qb.FAILED,t}finally{e.done()}}unloadContent(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=S.Qb.UNLOADED,!0}updateVisibility(e,t){if(this._frameNumber===e.frameNumber)return;const s=this.parent,n=s?s._visibilityPlaneMask:f.Mh.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){const e=s?s.computedTransform:this.tileset.modelMatrix;this._updateTransform(e)}this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visibilityPlaneMask=this.visibility(e,n),this._visible=this._visibilityPlaneMask!==f.Mh.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._frameNumber=e.frameNumber,this.viewportIds=t}visibility(e,t){const{cullingVolume:s}=e,{boundingVolume:n}=this;return s.computeVisibilityWithPlaneMask(n,t)}contentVisibility(){return!0}distanceToTile(e){const t=this.boundingVolume;return Math.sqrt(Math.max(t.distanceSquaredTo(e.camera.position),0))}cameraSpaceZDepth(e){let{camera:t}=e;const s=this.boundingVolume;return $.subVectors(s.center,t.position),t.direction.dot($)}insideViewerRequestVolume(e){const t=this._viewerRequestVolume;return!t||t.distanceSquaredTo(e.camera.position)<=0}updateExpiration(){if(null!=this._expireDate&&this.contentReady&&!this.hasEmptyContent){const e=Date.now();Date.lessThan(this._expireDate,e)&&(this.contentState=S.Qb.EXPIRED,this._expiredContent=this.content)}}get extras(){return this.header.extras}_initializeLodMetric(e){"lodMetricType"in e?this.lodMetricType=e.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in e?this.lodMetricValue=e.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}_initializeTransforms(e){this.transform=e.transform?new i.Z(e.transform):new i.Z;const t=this.parent,s=this.tileset,n=t&&t.computedTransform?t.computedTransform.clone():s.modelMatrix.clone();this.computedTransform=new i.Z(n).multiplyRight(this.transform);const r=t&&t._initialTransform?t._initialTransform.clone():new i.Z;this._initialTransform=new i.Z(r).multiplyRight(this.transform)}_initializeBoundingVolumes(e){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(e)}_initializeContent(e){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=S.Qb.UNLOADED,this.hasTilesetContent=!1,e.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}_initializeRenderingState(e){this.depth=e.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=f.Mh.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}_getRefine(e){return e||this.parent&&this.parent.refine||S.F$.REPLACE}_isTileset(){return-1!==this.contentUrl.indexOf(".json")}_onContentLoaded(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)}_updateBoundingVolume(e){this.boundingVolume=J(e.boundingVolume,this.computedTransform,this.boundingVolume);const t=e.content;t&&(t.boundingVolume&&(this._contentBoundingVolume=J(t.boundingVolume,this.computedTransform,this._contentBoundingVolume)),e.viewerRequestVolume&&(this._viewerRequestVolume=J(e.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}_updateTransform(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.Z).clone().multiplyRight(this.transform);!e.equals(this.computedTransform)&&(this.computedTransform=e,this._updateBoundingVolume(this.header))}_getLoaderSpecificOptions(e){return"i3s"===e?{...this.tileset.options.i3s,_tileOptions:{attributeUrls:this.header.attributeUrls,textureUrl:this.header.textureUrl,textureFormat:this.header.textureFormat,textureLoaderOptions:this.header.textureLoaderOptions,materialDefinition:this.header.materialDefinition,isDracoGeometry:this.header.isDracoGeometry,mbs:this.header.mbs},_tilesetOptions:{store:this.tileset.tileset.store,attributeStorageInfo:this.tileset.tileset.attributeStorageInfo,fields:this.tileset.tileset.fields},isTileHeader:!1}:{assetGltfUpAxis:(t=this.tileset.tileset).asset&&t.asset.gltfUpAxis||"Y"};var t}}class te extends z{compareDistanceToCamera(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}updateTileVisibility(e,t){if(super.updateTileVisibility(e,t),!e.isVisibleAndInRequestVolume)return;const s=e.children.length>0;if(e.hasTilesetContent&&s){const s=e.children[0];return this.updateTileVisibility(s,t),void(e._visible=s._visible)}if(this.meetsScreenSpaceErrorEarly(e,t))return void(e._visible=!1);const n=e.refine===S.F$.REPLACE,i=e._optimChildrenWithinParent===S.fB.USE_OPTIMIZATION;n&&i&&s&&!this.anyChildrenVisible(e,t)&&(e._visible=!1)}meetsScreenSpaceErrorEarly(e,t){const{parent:s}=e;return!(!s||s.hasTilesetContent||s.refine!==S.F$.ADD)&&!this.shouldRefine(e,t,!0)}}class se{constructor(){(0,n.Z)(this,"frameNumberMap",new Map)}register(e,t){const s=this.frameNumberMap.get(e)||new Map,n=s.get(t)||0;s.set(t,n+1),this.frameNumberMap.set(e,s)}deregister(e,t){const s=this.frameNumberMap.get(e);if(!s)return;const n=s.get(t)||1;s.set(t,n-1)}isZero(e,t){var s;return 0===((null===(s=this.frameNumberMap.get(e))||void 0===s?void 0:s.get(t))||0)}}const ne="REQUESTED",ie="COMPLETED",re="ERROR";class oe{constructor(){(0,n.Z)(this,"_statusMap",void 0),(0,n.Z)(this,"pendingTilesRegister",new se),this._statusMap={}}add(e,t,s,n){if(!this._statusMap[t]){const{frameNumber:i,viewport:{id:r}}=n;this._statusMap[t]={request:e,callback:s,key:t,frameState:n,status:ne},this.pendingTilesRegister.register(r,i),e().then((e=>{this._statusMap[t].status=ie;const{frameNumber:s,viewport:{id:i}}=this._statusMap[t].frameState;this.pendingTilesRegister.deregister(i,s),this._statusMap[t].callback(e,n)})).catch((e=>{this._statusMap[t].status=re;const{frameNumber:n,viewport:{id:i}}=this._statusMap[t].frameState;this.pendingTilesRegister.deregister(i,n),s(e)}))}}update(e,t){if(this._statusMap[e]){const{frameNumber:s,viewport:{id:n}}=this._statusMap[e].frameState;this.pendingTilesRegister.deregister(n,s);const{frameNumber:i,viewport:{id:r}}=t;this.pendingTilesRegister.register(r,i),this._statusMap[e].frameState=t}}find(e){return this._statusMap[e]}hasPendingTiles(e,t){return!this.pendingTilesRegister.isZero(e,t)}}class ae extends z{constructor(e){super(e),(0,n.Z)(this,"_tileManager",void 0),this._tileManager=new oe}traversalFinished(e){return!this._tileManager.hasPendingTiles(e.viewport.id,this._frameNumber||0)}shouldRefine(e,t){return e._lodJudge=function(e,t){if(0===e.lodMetricValue||isNaN(e.lodMetricValue))return"DIG";const s=2*k(e,t);return s<2?"OUT":!e.header.children||s<=e.lodMetricValue?"DRAW":e.header.children?"DIG":"OUT"}(e,t),"DIG"===e._lodJudge}updateChildTiles(e,t){const s=e.header.children||[],n=e.children,i=e.tileset;for(const r of s){const s="".concat(r.id,"-").concat(t.viewport.id),o=n&&n.find((e=>e.id===s));if(o)o&&this.updateTile(o,t);else{let n=()=>this._loadTile(r.id,i);this._tileManager.find(s)?this._tileManager.update(s,t):(i.tileset.nodePages&&(n=()=>i.tileset.nodePagesTile.formTileFromNodePages(r.id)),this._tileManager.add(n,s,(t=>this._onTileLoad(t,e,s)),t))}}return!1}async _loadTile(e,t){const{loader:s}=t,n=t.getTileUrl("".concat(t.url,"/nodes/").concat(e)),i={...t.loadOptions,i3s:{...t.loadOptions.i3s,isTileHeader:!0}};return await(0,D.z)(n,s,i)}_onTileLoad(e,t,s){const n=new ee(t.tileset,e,t,s);t.children.push(n);const i=this._tileManager.find(n.id).frameState;this.updateTile(n,i),this._frameNumber===i.frameNumber&&(this.traversalFinished(i)||(new Date).getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(n,i)}}const ce={description:"",ellipsoid:o.H.WGS84,modelMatrix:new i.Z,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,maximumTilesSelected:0,debounceTime:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{},onTraversalComplete:e=>e,contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},le="Tiles In Tileset(s)",ue="Tiles In Memory",de="Tiles In View",he="Tiles To Render",Ae="Tiles Loaded",Be="Tiles Loading",fe="Tiles Unloaded",Ce="Failed Tile Loads",me="Points/Vertices",pe="Tile Memory Use";class ge{constructor(e,t){(0,n.Z)(this,"options",void 0),(0,n.Z)(this,"loadOptions",void 0),(0,n.Z)(this,"type",void 0),(0,n.Z)(this,"tileset",void 0),(0,n.Z)(this,"loader",void 0),(0,n.Z)(this,"url",void 0),(0,n.Z)(this,"basePath",void 0),(0,n.Z)(this,"modelMatrix",void 0),(0,n.Z)(this,"ellipsoid",void 0),(0,n.Z)(this,"lodMetricType",void 0),(0,n.Z)(this,"lodMetricValue",void 0),(0,n.Z)(this,"refine",void 0),(0,n.Z)(this,"root",void 0),(0,n.Z)(this,"roots",void 0),(0,n.Z)(this,"asset",void 0),(0,n.Z)(this,"description",void 0),(0,n.Z)(this,"properties",void 0),(0,n.Z)(this,"extras",void 0),(0,n.Z)(this,"attributions",void 0),(0,n.Z)(this,"credits",void 0),(0,n.Z)(this,"stats",void 0),(0,n.Z)(this,"contentFormats",{draco:!1,meshopt:!1,dds:!1,ktx2:!1}),(0,n.Z)(this,"traverseCounter",void 0),(0,n.Z)(this,"geometricError",void 0),(0,n.Z)(this,"selectedTiles",void 0),(0,n.Z)(this,"updatePromise",null),(0,n.Z)(this,"tilesetInitializationPromise",void 0),(0,n.Z)(this,"cartographicCenter",void 0),(0,n.Z)(this,"cartesianCenter",void 0),(0,n.Z)(this,"zoom",void 0),(0,n.Z)(this,"boundingVolume",void 0),(0,n.Z)(this,"gpuMemoryUsageInBytes",void 0),(0,n.Z)(this,"dynamicScreenSpaceErrorComputedDensity",void 0),(0,n.Z)(this,"_traverser",void 0),(0,n.Z)(this,"_cache",void 0),(0,n.Z)(this,"_requestScheduler",void 0),(0,n.Z)(this,"_frameNumber",void 0),(0,n.Z)(this,"_queryParamsString",void 0),(0,n.Z)(this,"_queryParams",void 0),(0,n.Z)(this,"_extensionsUsed",void 0),(0,n.Z)(this,"_tiles",void 0),(0,n.Z)(this,"_pendingCount",void 0),(0,n.Z)(this,"lastUpdatedVieports",void 0),(0,n.Z)(this,"_requestedTiles",void 0),(0,n.Z)(this,"_emptyTiles",void 0),(0,n.Z)(this,"frameStateData",void 0),(0,n.Z)(this,"maximumMemoryUsage",void 0),(0,c.h)(e),this.options={...ce,...t},this.tileset=e,this.loader=e.loader,this.type=e.type,this.url=e.url,this.basePath=e.basePath||l.XX(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=e.lodMetricType,this.lodMetricValue=e.lodMetricValue,this.refine=e.root.refine,this.loadOptions=this.options.loadOptions||{},this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new B,this._requestScheduler=new u.Z({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new a.Z({id:this.url}),this._initializeStats(),this._extensionsUsed=void 0,this.dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this.tilesetInitializationPromise=this._initializeTileSet(e)}destroy(){this._destroy()}isLoaded(){return 0===this._pendingCount&&0!==this._frameNumber&&0===this._requestedTiles.length}get tiles(){return Object.values(this._tiles)}get frameNumber(){return this._frameNumber}get queryParams(){return this._queryParamsString||(this._queryParamsString=function(e){const t=[];for(const s of Object.keys(e))t.push("".concat(s,"=").concat(e[s]));switch(t.length){case 0:return"";case 1:return"?".concat(t[0]);default:return"?".concat(t.join("&"))}}(this._queryParams)),this._queryParamsString}setProps(e){this.options={...this.options,...e}}setOptions(e){this.options={...this.options,...e}}getTileUrl(e){return e.startsWith("data:")?e:"".concat(e).concat(this.queryParams)}hasExtension(e){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(e)>-1)}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.tilesetInitializationPromise.then((()=>{!e&&this.lastUpdatedVieports?e=this.lastUpdatedVieports:this.lastUpdatedVieports=e,e&&this.doUpdate(e)}))}async selectTiles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return await this.tilesetInitializationPromise,e&&(this.lastUpdatedVieports=e),this.updatePromise||(this.updatePromise=new Promise((e=>{setTimeout((()=>{this.lastUpdatedVieports&&this.doUpdate(this.lastUpdatedVieports),e(this._frameNumber),this.updatePromise=null}),this.options.debounceTime)}))),this.updatePromise}doUpdate(e){if("loadTiles"in this.options&&!this.options.loadTiles)return;if(this.traverseCounter>0)return;const t=e instanceof Array?e:[e];this._cache.reset(),this._frameNumber++,this.traverseCounter=t.length;const s=[];for(const n of t){const e=n.id;this._needTraverse(e)?s.push(e):this.traverseCounter--}for(const n of t){const e=n.id;if(this.roots[e]||(this.roots[e]=this._initializeTileHeaders(this.tileset,null)),!s.includes(e))continue;const t=g(n,this._frameNumber);this._traverser.traverse(this.roots[e],t,this.options)}}_needTraverse(e){let t=e;return this.options.viewportTraversersMap&&(t=this.options.viewportTraversersMap[e]),t===e}_onTraversalEnd(e){const t=e.viewport.id;this.frameStateData[t]||(this.frameStateData[t]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});const s=this.frameStateData[t],n=Object.values(this._traverser.selectedTiles),[i,r]=function(e,t,s){if(0===s||e.length<=s)return[e,[]];const n=[],{longitude:i,latitude:r}=t.viewport;for(const[l,u]of e.entries()){const[e,t]=u.header.mbs,s=Math.abs(i-e),o=Math.abs(r-t),a=Math.sqrt(o*o+s*s);n.push([l,a])}const o=n.sort(((e,t)=>e[1]-t[1])),a=[];for(let l=0;l<s;l++)a.push(e[o[l][0]]);const c=[];for(let l=s;l<o.length;l++)c.push(e[o[l][0]]);return[a,c]}(n,e,this.options.maximumTilesSelected);s.selectedTiles=i;for(const o of r)o.unselect();s._requestedTiles=Object.values(this._traverser.requestedTiles),s._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,this.traverseCounter>0||this._updateTiles()}_updateTiles(){this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[];for(const e in this.frameStateData){const t=this.frameStateData[e];this.selectedTiles=this.selectedTiles.concat(t.selectedTiles),this._requestedTiles=this._requestedTiles.concat(t._requestedTiles),this._emptyTiles=this._emptyTiles.concat(t._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);for(const e of this.selectedTiles)this._tiles[e.id]=e;this._loadTiles(),this._unloadTiles(),this._updateStats()}_tilesChanged(e,t){if(e.length!==t.length)return!0;const s=new Set(e.map((e=>e.id))),n=new Set(t.map((e=>e.id)));let i=e.filter((e=>!n.has(e.id))).length>0;return i=i||t.filter((e=>!s.has(e.id))).length>0,i}_loadTiles(){for(const e of this._requestedTiles)e.contentUnloaded&&this._loadTile(e)}_unloadTiles(){this._cache.unloadTiles(this,((e,t)=>e._unloadTile(t)))}_updateStats(){let e=0,t=0;for(const s of this.selectedTiles)s.contentAvailable&&s.content&&(e++,s.content.pointCount?t+=s.content.pointCount:t+=s.content.vertexCount);this.stats.get(de).count=this.selectedTiles.length,this.stats.get(he).count=e,this.stats.get(me).count=t}async _initializeTileSet(e){this.type===S.i3.I3S&&(this.calculateViewPropsI3S(),e.root=await e.root),this.root=this._initializeTileHeaders(e,null),this.type===S.i3.TILES3D&&(this._initializeTiles3DTileset(e),this.calculateViewPropsTiles3D()),this.type===S.i3.I3S&&this._initializeI3STileset()}calculateViewPropsI3S(){var e;const t=this.tileset.fullExtent;if(t){const{xmin:e,xmax:s,ymin:n,ymax:i,zmin:a,zmax:c}=t;return this.cartographicCenter=new r.Z(e+(s-e)/2,n+(i-n)/2,a+(c-a)/2),this.cartesianCenter=o.H.WGS84.cartographicToCartesian(this.cartographicCenter,new r.Z),void(this.zoom=M(t,this.cartographicCenter,this.cartesianCenter))}const s=null===(e=this.tileset.store)||void 0===e?void 0:e.extent;if(s){const[e,t,n,i]=s;return this.cartographicCenter=new r.Z(e+(n-e)/2,t+(i-t)/2,0),this.cartesianCenter=o.H.WGS84.cartographicToCartesian(this.cartographicCenter,new r.Z),void(this.zoom=function(e,t,s){const[n,i,r,o]=e;return M({xmin:n,xmax:r,ymin:i,ymax:o,zmin:0,zmax:0},t,s)}(s,this.cartographicCenter,this.cartesianCenter))}console.warn("Extent is not defined in the tileset header"),this.cartographicCenter=new r.Z,this.zoom=1}calculateViewPropsTiles3D(){const e=this.root;(0,c.h)(e);const{center:t}=e.boundingVolume;if(!t)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new r.Z,void(this.zoom=1);0!==t[0]||0!==t[1]||0!==t[2]?this.cartographicCenter=o.H.WGS84.cartesianToCartographic(t,new r.Z):this.cartographicCenter=new r.Z(0,0,-o.H.WGS84.radii[0]),this.cartesianCenter=t,this.zoom=T(e.boundingVolume,this.cartographicCenter)}_initializeStats(){this.stats.get(le),this.stats.get(Be),this.stats.get(ue),this.stats.get(de),this.stats.get(he),this.stats.get(Ae),this.stats.get(fe),this.stats.get(Ce),this.stats.get(me),this.stats.get(pe,"memory")}_initializeTileHeaders(e,t){const s=new ee(this,e.root,t);if(t&&(t.children.push(s),s.depth=t.depth+1),this.type===S.i3.TILES3D){const e=[];for(e.push(s);e.length>0;){const t=e.pop();this.stats.get(le).incrementCount();const s=t.header.children||[];for(const n of s){const s=new ee(this,n,t);t.children.push(s),s.depth=t.depth+1,e.push(s)}}}return s}_initializeTraverser(){let e;switch(this.type){case S.i3.TILES3D:e=te;break;case S.i3.I3S:e=ae;break;default:e=z}return new e({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}_destroyTileHeaders(e){this._destroySubtree(e)}async _loadTile(e){let t;try{this._onStartTileLoading(),t=await e.loadContent()}catch(s){this._onTileLoadError(e,s)}finally{this._onEndTileLoading(),this._onTileLoad(e,t)}}_onTileLoadError(e,t){this.stats.get(Ce).incrementCount();const s=t.message||t.toString(),n=e.url;console.error("A 3D tile failed to load: ".concat(e.url," ").concat(s)),this.options.onTileError(e,s,n)}_onTileLoad(e,t){if(t){if(this.type===S.i3.I3S){var s,n;const e=(null===(s=this.tileset)||void 0===s||null===(n=s.nodePagesTile)||void 0===n?void 0:n.nodesInNodePages)||0;this.stats.get(le).reset(),this.stats.get(le).addCount(e)}e&&e.content&&function(e,t){(0,c.h)(e),(0,c.h)(t);const{rtcCenter:s,gltfUpAxis:n}=t,{computedTransform:a,boundingVolume:{center:l}}=e;let u=new i.Z(a);switch(s&&u.translate(s),n){case"Z":default:break;case"Y":const e=(new i.Z).rotateX(Math.PI/2);u=u.multiplyRight(e);break;case"X":const t=(new i.Z).rotateY(-Math.PI/2);u=u.multiplyRight(t)}t.isQuantized&&u.translate(t.quantizedVolumeOffset).scale(t.quantizedVolumeScale);const d=new r.Z(l);t.cartesianModelMatrix=u,t.cartesianOrigin=d;const h=o.H.WGS84.cartesianToCartographic(d,new r.Z),A=o.H.WGS84.eastNorthUpToFixedFrame(d).invert();t.cartographicModelMatrix=A.multiplyRight(u),t.cartographicOrigin=h,t.coordinateSystem||(t.modelMatrix=t.cartographicModelMatrix)}(e,e.content),this.updateContentTypes(e),this._addTileToCache(e),this.options.onTileLoad(e)}}updateContentTypes(e){if(this.type===S.i3.I3S)switch(e.header.isDracoGeometry&&(this.contentFormats.draco=!0),e.header.textureFormat){case"dds":this.contentFormats.dds=!0;break;case"ktx2":this.contentFormats.ktx2=!0}else if(this.type===S.i3.TILES3D){var t;const{extensionsRemoved:s=[]}=(null===(t=e.content)||void 0===t?void 0:t.gltf)||{};s.includes("KHR_draco_mesh_compression")&&(this.contentFormats.draco=!0),s.includes("EXT_meshopt_compression")&&(this.contentFormats.meshopt=!0),s.includes("KHR_texture_basisu")&&(this.contentFormats.ktx2=!0)}}_onStartTileLoading(){this._pendingCount++,this.stats.get(Be).incrementCount()}_onEndTileLoading(){this._pendingCount--,this.stats.get(Be).decrementCount()}_addTileToCache(e){this._cache.add(this,e,(t=>t._updateCacheStats(e)))}_updateCacheStats(e){this.stats.get(Ae).incrementCount(),this.stats.get(ue).incrementCount(),this.gpuMemoryUsageInBytes+=e.content.byteLength||0,this.stats.get(pe).count=this.gpuMemoryUsageInBytes}_unloadTile(e){this.gpuMemoryUsageInBytes-=e.content&&e.content.byteLength||0,this.stats.get(ue).decrementCount(),this.stats.get(fe).incrementCount(),this.stats.get(pe).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(e),e.unloadContent()}_destroy(){const e=[];for(this.root&&e.push(this.root);e.length>0;){const t=e.pop();for(const s of t.children)e.push(s);this._destroyTile(t)}this.root=null}_destroySubtree(e){const t=e,s=[];for(s.push(t);s.length>0;){e=s.pop();for(const t of e.children)s.push(t);e!==t&&this._destroyTile(e)}t.children=[]}_destroyTile(e){this._cache.unloadTile(this,e),this._unloadTile(e),e.destroy()}_initializeTiles3DTileset(e){if(this.asset=e.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=e.properties,this.geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed,this.extras=e.extras}_initializeI3STileset(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}},49125:()=>{}}]);