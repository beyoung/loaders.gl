(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[7049],{3905:(e,t,r)=>{"use strict";r.d(t,{Zo:()=>S,kt:()=>f});var n=r(67294);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var _=n.createContext({}),c=function(e){var t=n.useContext(_),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},S=function(e){var t=c(e.components);return n.createElement(_.Provider,{value:t},e.children)},u="mdxType",l={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},E=n.forwardRef((function(e,t){var r=e.components,s=e.mdxType,o=e.originalType,_=e.parentName,S=i(e,["components","mdxType","originalType","parentName"]),u=c(r),E=s,f=u["".concat(_,".").concat(E)]||u[E]||l[E]||o;return r?n.createElement(f,a(a({ref:t},S),{},{components:r})):n.createElement(f,a({ref:t},S))}));function f(e,t){var r=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=r.length,a=new Array(o);a[0]=E;var i={};for(var _ in t)hasOwnProperty.call(t,_)&&(i[_]=t[_]);i.originalType=e,i[u]="string"==typeof e?e:s,a[1]=i;for(var c=2;c<o;c++)a[c]=r[c];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}E.displayName="MDXCreateElement"},41559:(e,t,r)=>{"use strict";r.r(t),r.d(t,{assets:()=>We,contentTitle:()=>Fe,default:()=>Je,frontMatter:()=>Ke,metadata:()=>je,toc:()=>Ve});var n=r(87462),s=r(67294),o=r(3905),a=(r(73935),r(1418)),i=r(75433);const _=[{formatName:"Standard Image Formats",description:"Non-texture image formats. Compact on disk, but need to be fully decompressed into GPU texture memory, and mipmaps need to be generated by client.",codeSample:"load(url, ImageLoader)",images:[{format:"JPG",src:"shannon.jpg"},{format:"GIF",src:"shannon.gif"},{format:"PNG",src:"shannon.png"},{format:"BMP",src:"shannon.bmp"},{format:"WEBP",src:"shannon.webp"},{format:"AVIF",src:"shannon.avif"}]},{formatName:"Basis Universal",description:"Supercompressed GPU Texture Codec",link:"https://github.com/BinomialLLC/basis_universal",codeSample:"load(url, BasisLoader)",images:[{format:"BASIS",src:"alpha3.basis"},{format:"BASIS",src:"kodim01.basis"},{format:"BASIS",src:"kodim18.basis"},{format:"BASIS",src:"kodim20_1024x1024.basis"},{format:"BASIS",src:"kodim20.basis"}]},{formatName:"KTX",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"DXT1",src:"shannon-dxt1.ktx2"},{format:"DXT3",src:"shannon-dxt3.ktx2"},{format:"DXT5",src:"shannon-dxt5.ktx2"}]},{formatName:"KTX2",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"KTX2",src:"kodim23.ktx2",useBasis:!0}]},{formatName:"DDS: S3 Texture Compression (WEBGL_compressed_texture_s3tc)",description:"S3 (aka DXTn, DXTC, or BCn).",availability:"Common on desktop GPUs. DXT5 is usually the preferred version",link:"https://en.wikipedia.org/wiki/S3_Texture_Compression",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"DXT5",src:"shannon-dxt5.dds"},{format:"DXT3",src:"shannon-dxt3.dds"},{format:"DXT1",src:"shannon-dxt1.dds"}]},{formatName:"PVR: PowerVR Texture Compression (WEBGL_compressed_texture_pvrtc)",description:"Lossy, fixed-rate GPU texture compression format",availability:"iPhone, iPad and mobile devices with PowerVR chipsets.",link:"https://en.wikipedia.org/wiki/PVRTC",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"PVRTC (2BPP RGB)",src:"shannon-pvrtc-2bpp-rgb.pvr"},{format:"PVRTC (2BPP RGBA)",src:"shannon-pvrtc-2bpp-rgba.pvr"},{format:"PVRTC (4BPP RGB)",src:"shannon-pvrtc-4bpp-rgb.pvr"},{format:"PVRTC (2BPP RGBA)",src:"shannon-pvrtc-4bpp-rgba.pvr"}]},{formatName:"PVR: ATC (WEBGL_compressed_texture_atc)",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"ATC (RGB)",src:"shannon-atc-rgb.dds"},{format:"ATC (RGBA, Explicit)",src:"shannon-atc-rgba-explicit.dds"},{format:"ATC (RGBA, Interpolated)",src:"shannon-atc-rgba-interpolated.dds"}]},{formatName:"PVR: ASTC (WEBGL_compressed_texture_astc)",images:[{format:"ASTC 4x4",src:"shannon-astc-4x4.pvr"},{format:"ASTC 5x4",src:"shannon-astc-5x4.pvr"},{format:"ASTC 5x5",src:"shannon-astc-5x5.pvr"},{format:"ASTC 6x5",src:"shannon-astc-6x5.pvr"},{format:"ASTC 6x6",src:"shannon-astc-6x6.pvr"},{format:"ASTC 8x5",src:"shannon-astc-8x5.pvr"},{format:"ASTC 8x6",src:"shannon-astc-8x6.pvr"},{format:"ASTC 8x8",src:"shannon-astc-8x8.pvr"},{format:"ASTC 10x5",src:"shannon-astc-10x5.pvr"},{format:"ASTC 10x6",src:"shannon-astc-10x6.pvr"},{format:"ASTC 10x8",src:"shannon-astc-10x8.pvr"},{format:"ASTC 10x10",src:"shannon-astc-10x10.pvr"},{format:"ASTC 12x10",src:"shannon-astc-12x10.pvr"},{format:"ASTC 12x12",src:"shannon-astc-12x12.pvr"}]},{formatName:"PVR: ASTC (sRGB) (WEBGL_compressed_texture_astc)",images:[{format:"ASTC (sRGB) 4x4",src:"shannon-astc-srgb-4x4.pvr"},{format:"ASTC (sRGB) 5x4",src:"shannon-astc-srgb-5x4.pvr"},{format:"ASTC (sRGB) 5x5",src:"shannon-astc-srgb-5x5.pvr"},{format:"ASTC (sRGB) 6x5",src:"shannon-astc-srgb-6x5.pvr"},{format:"ASTC (sRGB) 6x6",src:"shannon-astc-srgb-6x6.pvr"},{format:"ASTC (sRGB) 8x5",src:"shannon-astc-srgb-8x5.pvr"},{format:"ASTC (sRGB) 8x6",src:"shannon-astc-srgb-8x6.pvr"},{format:"ASTC (sRGB) 8x8",src:"shannon-astc-srgb-8x8.pvr"},{format:"ASTC (sRGB) 10x5",src:"shannon-astc-srgb-10x5.pvr"},{format:"ASTC (sRGB) 10x6",src:"shannon-astc-srgb-10x6.pvr"},{format:"ASTC (sRGB) 10x8",src:"shannon-astc-srgb-10x8.pvr"},{format:"ASTC (sRGB) 10x10",src:"shannon-astc-srgb-10x10.pvr"},{format:"ASTC (sRGB) 12x10",src:"shannon-astc-srgb-12x10.pvr"},{format:"ASTC (sRGB) 12x12",src:"shannon-astc-srgb-12x12.pvr"}]},{formatName:"PVR: ETC1 (WEBGL_compressed_texture_etc1)",images:[{format:"ETC1",src:"shannon-etc1.pvr"}]},{formatName:"Crunch",description:"Advanced DXTn texture compression library.",link:"https://github.com/BinomialLLC/crunch",codeSample:"load(url, CrunchLoader)",images:[{format:"DXT1 (Crunch)",src:"shannon-dxt1.crn"},{format:"DXT5 (Crunch)",src:"shannon-dxt5.crn"}]}];var c=r(19521),S=r(45697),u=r.n(S),l=r(35936),E=r(30202),f=r(11459),T=r(33313);const d={id:"crunch",name:"Crunch",module:"textures",version:r(14428).q,worker:!0,extensions:["crn"],mimeTypes:["image/crn","image/x-crn","application/octet-stream"],binary:!0,options:{crunch:{libraryPath:"libs/"}}};var A=r(45475),R=r(48093),C=r(92859),h=r(25939),m=r(35889),p=r(97737),N=r(51621),O=r(25108);const{COMPRESSED_RGB_S3TC_DXT1_EXT:g,COMPRESSED_RGBA_S3TC_DXT1_EXT:P,COMPRESSED_RGBA_S3TC_DXT3_EXT:y,COMPRESSED_RGBA_S3TC_DXT5_EXT:G,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:D,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:x,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:w,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:b,COMPRESSED_RGB_ATC_WEBGL:B,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:M,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:L,COMPRESSED_RGB_ETC1_WEBGL:X,COMPRESSED_RGBA_ASTC_4X4_KHR:I,COMPRESSED_RGBA_ASTC_5X4_KHR:v,COMPRESSED_RGBA_ASTC_5X5_KHR:H,COMPRESSED_RGBA_ASTC_6X5_KHR:U,COMPRESSED_RGBA_ASTC_6X6_KHR:k,COMPRESSED_RGBA_ASTC_8X5_KHR:K,COMPRESSED_RGBA_ASTC_8X6_KHR:F,COMPRESSED_RGBA_ASTC_8X8_KHR:j,COMPRESSED_RGBA_ASTC_10X5_KHR:W,COMPRESSED_RGBA_ASTC_10X6_KHR:V,COMPRESSED_RGBA_ASTC_10X8_KHR:z,COMPRESSED_RGBA_ASTC_10X10_KHR:Z,COMPRESSED_RGBA_ASTC_12X10_KHR:J,COMPRESSED_RGBA_ASTC_12X12_KHR:q,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:Q,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:Y,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:$,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:ee,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:te,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:re,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:ne,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:se,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:oe,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:ae,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:ie,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:_e,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:ce,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:Se,COMPRESSED_R11_EAC:ue,COMPRESSED_SIGNED:le,COMPRESSED_RG11_EAC:Ee,COMPRESSED_SIGNED_RG11_EAC:fe,COMPRESSED_RGB8_ETC2:Te,COMPRESSED_RGBA8_ETC2_EAC:de,COMPRESSED_SRGB8_ETC2:Ae,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:Re,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:Ce,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:he,COMPRESSED_RED_RGTC1_EXT:me,COMPRESSED_SIGNED_RED_RGTC1_EXT:pe,COMPRESSED_RED_GREEN_RGTC2_EXT:Ne,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:Oe,COMPRESSED_SRGB_S3TC_DXT1_EXT:ge,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:Pe,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:ye,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:Ge}=l.GL_EXTENSIONS_CONSTANTS,De=c.ZP.button.withConfig({displayName:"compressed-texture__TextureButton",componentId:"sc-j0lv3n-0"})(["height:256px;width:256px;border:1px solid black;margin:1em;position:relative;margin-left:0;"]),xe=c.ZP.h1.withConfig({displayName:"compressed-texture__ImageFormatHeader",componentId:"sc-j0lv3n-1"})(["position:absolute;top:0;left:0;margin:0;color:white;font-size:16px;"]),we=c.ZP.h1.withConfig({displayName:"compressed-texture__ErrorFormatHeader",componentId:"sc-j0lv3n-2"})(["color:red;font-size:16px;"]),be=c.ZP.ul.withConfig({displayName:"compressed-texture__TextureInfo",componentId:"sc-j0lv3n-3"})(["position:absolute;transition:opacity 0.2s;top:20px;display:flex;flex-flow:column nowrap;align-items:flex-start;padding:10px;opacity:0.8;background-color:black;color:white;border-radius:5px;min-width:200px;list-style:none;font-size:14px;"]);(0,C.fh)([E.G,f.D,R.S]);const Be={canvas:u().object,image:u().object,gl:u().object,program:u().object};class Me extends s.PureComponent{constructor(e){super(e);const t=this.getLoadOptions();this.state={loadOptions:t,textureError:null,showStats:!1,stats:[],dataUrl:null}}async componentDidMount(){const e=await this.getTextureDataUrl();this.setState({dataUrl:e})}getExtension(e){const{gl:t}=this.props,r=["","WEBKIT_","MOZ_"];let n=null;for(const s in r)if(n=Boolean(t.getExtension(r[s]+e)),n)break;return n}getLoadOptions(){return{basis:{format:(0,T.h)()}}}async getTextureDataUrl(){const{loadOptions:e}=this.state,{canvas:t,gl:r,program:n,image:s}=this.props;try{const{arrayBuffer:t,length:o,src:a,useBasis:i}=await this.getLoadedData(s),_=await(0,h.A)(a,[f.D,d,E.G,R.S]),c={...e};i&&(c["compressed-texture"]={useBasis:!0});const S=_&&await(0,m.z)(t,_,c);switch(this.addStat("File Size",Math.floor(o/1024),"Kb"),_&&_.id){case"crunch":case"compressed-texture":this.renderEmptyTexture(r,n),this.renderCompressedTexture(r,n,S,_.name,a);break;case"image":this.renderEmptyTexture(r,n),this.renderImageTexture(r,n,S);break;case"basis":const e=S[0];this.renderEmptyTexture(r,n),this.renderCompressedTexture(r,n,e,_.name,a);break;default:throw new Error("Unknown texture loader")}}catch(o){O.error(o),this.renderEmptyTexture(r,n),this.setState({textureError:o.message})}return t.toDataURL()}async getLoadedData(e){let t=null,r=0,n="",s=!1;if(e instanceof File)t=await e.arrayBuffer(),r=e.size,n=e.name;else{n="https://raw.githubusercontent.com/visgl/loaders.gl/master/modules/textures/test/data/"+e.src;const o=await(0,p.dc)(n);t=await o.arrayBuffer(),r=t.byteLength,s=e.useBasis||!1}return{arrayBuffer:t,length:r,src:n,useBasis:s}}createCompressedTexture2D(e,t){return new N.Z(e,{data:t,compressed:!0,mipmaps:!1,parameters:{[e.TEXTURE_MAG_FILTER]:e.LINEAR,[e.TEXTURE_MIN_FILTER]:t.length>1?e.LINEAR_MIPMAP_NEAREST:e.LINEAR,[e.TEXTURE_WRAP_S]:e.CLAMP_TO_EDGE,[e.TEXTURE_WRAP_T]:e.CLAMP_TO_EDGE}}).handle}renderEmptyTexture(e,t){const r=new Uint8Array([68,0,0,255]),n=new N.Z(e,{width:1,height:1,data:r,mipmaps:!0,parameters:{[e.TEXTURE_MAG_FILTER]:e.LINEAR,[e.TEXTURE_MIN_FILTER]:e.LINEAR,[e.TEXTURE_WRAP_S]:e.CLAMP_TO_EDGE,[e.TEXTURE_WRAP_T]:e.CLAMP_TO_EDGE}}).handle;e.useProgram(t),e.bindTexture(e.TEXTURE_2D,n),e.drawArrays(e.TRIANGLE_STRIP,0,4)}renderImageTexture(e,t,r){const n=new N.Z(e,{data:r,parameters:{[e.TEXTURE_MAG_FILTER]:e.LINEAR,[e.TEXTURE_MIN_FILTER]:e.LINEAR,[e.TEXTURE_WRAP_S]:e.CLAMP_TO_EDGE,[e.TEXTURE_WRAP_T]:e.CLAMP_TO_EDGE}});e.useProgram(t),e.bindTexture(e.TEXTURE_2D,n.handle);const s=new Date;e.drawArrays(e.TRIANGLE_STRIP,0,4);const o=Date.now()-s;this.addStat("Upload time",Math.floor(o)+" ms"),this.addStat("Dimensions",r.width+" x "+r.height),this.addStat("Size in memory (Lvl 0)",Math.floor(r.width*r.height*4/1024),"Kb")}renderCompressedTexture(e,t,r,n,s){if(!r||!r.length)throw new Error(n+" loader doesn't support texture "+s+" format");const{format:o,width:a,height:i,levelSize:_}=r[0];if(!this.isFormatSupported(o))throw new Error("Texture format "+o+" not supported by this GPU");const c=new Date,S=this.createCompressedTexture2D(e,r);e.bindTexture(e.TEXTURE_2D,S),e.useProgram(t),e.drawArrays(e.TRIANGLE_STRIP,0,4);const u=Date.now()-c;this.addStat("Upload time",Math.floor(u)+" ms"),this.addStat("Dimensions",a+" x "+i),_&&this.addStat("Size in memory (Lvl 0)",Math.floor(_/1024),"Kb")}isFormatSupported(e){if("number"!=typeof e)throw new Error("Invalid internal format of compressed texture");const t=(0,A.U)(this.props.gl);switch(e){case g:case y:case G:case P:return t.has("dxt");case D:case x:case w:case b:return t.has("pvrtc");case B:case M:case L:return t.has("atc");case X:return t.has("etc1");case I:case v:case H:case U:case k:case K:case F:case j:case W:case V:case z:case Z:case J:case q:case Q:case Y:case $:case ee:case te:case re:case ne:case se:case oe:case ae:case ie:case _e:case ce:case Se:return t.has("astc");case ue:case le:case Ee:case fe:case Te:case de:case Ae:case Re:case Ce:case he:return t.has("etc2");case me:case pe:case Ne:case Oe:return t.has("rgtc");case ge:case Pe:case ye:case Ge:return t.has("dxt-srgb");default:return!1}}addStat(e,t,r){void 0===r&&(r="");const n=[...this.state.stats,{name:e,value:t,units:r}];this.setState({stats:n})}renderStats(){const{stats:e}=this.state;if(!e.length)return null;const t=[];for(let r=0;r<e.length;r++)t.push(s.createElement("li",{key:r},e[r].name+": "+e[r].value+e[r].units));return s.createElement(be,{style:{opacity:this.state.showStats?.8:0}},t)}render(){const{dataUrl:e,textureError:t}=this.state,{format:r,name:n}=this.props.image;return e?s.createElement(De,{style:{backgroundImage:"url("+e+")"},onMouseEnter:()=>this.setState({showStats:!0}),onMouseLeave:()=>this.setState({showStats:!1})},t?s.createElement(we,{style:{color:"red"}},t):s.createElement(xe,null,r||n),this.renderStats()):null}}Me.propTypes=Be,Me.defaultProps={canvas:null,image:null,gl:null,program:null};const Le=c.ZP.div.withConfig({displayName:"textures-uploader__Container",componentId:"sc-xhuue3-0"})(["display:flex;flex-flow:column nowrap;"]),Xe=c.ZP.div.withConfig({displayName:"textures-uploader__TextureFrame",componentId:"sc-xhuue3-1"})(["display:flex;width:256px;height:256px;align-items:center;justify-content:center;border:1px dashed black;"]),Ie=c.ZP.div.withConfig({displayName:"textures-uploader__ImageContainer",componentId:"sc-xhuue3-2"})(["display:flex;flex-flow:column nowrap;align-items:center;width:270px;"]),ve={canvas:u().object,gl:u().object,program:u().object};class He extends s.PureComponent{constructor(e){super(e),this.state={uploadedImage:null},this.handleLoadFile=this.handleLoadFile.bind(this),this.handleCleanTexture=this.handleCleanTexture.bind(this)}handleLoadFile(e){const t=e.dataTransfer.files[0];this.setState({uploadedImage:t}),e.preventDefault()}handleCleanTexture(){this.setState({uploadedImage:null})}render(){const{canvas:e,gl:t,program:r}=this.props,{uploadedImage:n,files:o}=this.state;return s.createElement("div",null,!n&&s.createElement(Le,null,s.createElement(Xe,{onDrop:this.handleLoadFile,onDragOver:e=>e.preventDefault()},"Drag&Drop texture"),s.createElement("input",{style:{display:"none"},type:"file",id:"fileInput",files:o})),s.createElement(Ie,null,n&&s.createElement(Me,{image:n,canvas:e,gl:t,program:r}),n&&s.createElement("button",{onClick:this.handleCleanTexture},"Clean")))}}He.propTypes=ve,He.defaultProps={canvas:null,gl:null,program:null};var Ue=r(25108);class ke extends s.PureComponent{constructor(e){super(e),this.state={canvas:null,gl:null,program:null}}componentDidMount(){const e=this.initializeWebGL(),t=e.getContext("webgl");(0,a.yW)(t),this.createAndFillBufferObject(t);const r=new i.Z(t,{vs:"\nprecision highp float;\n\nattribute vec2 position;\nvarying vec2 uv;\n\nvoid main() {\n  gl_Position = vec4(position, 0.0, 1.0);\n  uv = vec2(position.x * .5, -position.y * .5) + vec2(.5, .5);\n}\n",fs:"\nprecision highp float;\n\nuniform sampler2D tex;\nvarying vec2 uv;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(tex, uv).rgb, 1.);\n}\n"});this.setState({canvas:e,gl:t,program:r.handle})}initializeWebGL(){const e=document.createElement("canvas");return e.width=256,e.height=256,e}createAndFillBufferObject(e){const t=new Float32Array([-1,-1,-1,1,1,-1,1,1]),r=e.createBuffer();r||Ue.error("Failed to create the buffer object"),e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(0),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0)}renderTexturesBlocks(){const{canvas:e,gl:t,program:r}=this.state;return _.map(((n,o)=>s.createElement("div",{key:o},this.renderTexturesHeader(n),this.renderTextures(t,e,r,n.images),this.renderTexturesDescription(n))))}renderTexturesHeader(e){const{formatName:t,link:r}=e;return s.createElement("div",{style:{display:"flex",flexFlow:"column"}},s.createElement("h2",{style:{borderBottom:"1px solid black",marginBottom:0}},r?s.createElement("a",{style:{textDecoration:"none"},href:r},t):t))}renderTexturesDescription(e){const{description:t,codeSample:r,availability:n}=e;return s.createElement("div",null,t&&s.createElement("p",null,s.createElement("b",null,"Description: "),t),n&&s.createElement("p",null,s.createElement("b",null,"Availability: "),n),r&&s.createElement("div",null,s.createElement("p",null,s.createElement("code",null,r))))}renderTextures(e,t,r,n){return n.map(((n,o)=>s.createElement(Me,{key:o,image:n,canvas:t,gl:e,program:r})))}renderDescription(){return s.createElement("div",null,s.createElement("h1",null,"Texture Loaders"),s.createElement("p",null,"This page loads every \xa0",s.createElement("a",{href:"https://loaders.gl/modules/textures/docs/using-compressed-textures"},"texture format")," ","\xa0 supported by loaders.gl and attempts to display them in WebGL using the"," ",s.createElement("a",{href:"https://luma.gl"},s.createElement("b",null,"luma.gl"))," ",s.createElement("code",null,"Texture2D")," class."),s.createElement("p",null,"The ",s.createElement("code",null,"@loaders.gl/textures")," \xa0 module provides loaders for compressed textures stored in ",s.createElement("b",null,"KTX"),", ",s.createElement("b",null,"DDS")," and ",s.createElement("b",null,"PVR")," container files, plus ",s.createElement("b",null,"CRN")," ","(Crunch), and ",s.createElement("b",null,"Basis")," supercompressed textures."),s.createElement("p",null,"This page also shows which compressed texture types your device and browser supports."),s.createElement("p",null,s.createElement("i",null,"Note that multiple textures on this page will fail to display due to lack of GPU support (reported via WebGL extensions). For example: DXT formats are usually only supported on Desktops while PVRTC is typically only available on mobile devices with PowerVR chipsets.")),s.createElement("p",null,s.createElement("i",null,"Inspired by toji's awesome"," ",s.createElement("a",{href:"http://toji.github.io/texture-tester"},"texture-tester"))))}render(){const{gl:e,canvas:t,program:r}=this.state;return s.createElement("div",{style:{margin:30}},this.renderDescription(),e&&s.createElement(He,{canvas:t,gl:e,program:r}),e&&this.renderTexturesBlocks())}}const Ke={},Fe="Textures",je={unversionedId:"textures",id:"textures",title:"Textures",description:"",source:"@site/src/examples/textures.mdx",sourceDirName:".",slug:"/textures",permalink:"/examples/textures",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"examplesSidebar",previous:{title:"3D Tiles",permalink:"/examples/3d-tiles"},next:{title:"PointCloud",permalink:"/examples/pointcloud"}},We={},Ve=[],ze={toc:Ve},Ze="wrapper";function Je(e){let{components:t,...r}=e;return(0,o.kt)(Ze,(0,n.Z)({},ze,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"textures"},"Textures"),(0,o.kt)("div",{style:{height:"calc(100vh - var(--ifm-navbar-height))",overflowY:"scroll"}},(0,o.kt)(ke,{mdxType:"Demo"})))}Je.isMDXComponent=!0},54361:(e,t,r)=>{"use strict";r.d(t,{D0:()=>_,Ew:()=>c,Kn:()=>o,Lj:()=>S,Os:()=>l,Ss:()=>a,TW:()=>i,zH:()=>u});const n=e=>"boolean"==typeof e,s=e=>"function"==typeof e,o=e=>null!==e&&"object"==typeof e,a=e=>o(e)&&e.constructor==={}.constructor,i=e=>Boolean(e)&&"function"==typeof e[Symbol.iterator],_=e=>e&&"function"==typeof e[Symbol.asyncIterator],c=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,S=e=>"undefined"!=typeof Blob&&e instanceof Blob,u=e=>e&&"object"==typeof e&&e.isBuffer,l=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||o(e)&&s(e.tee)&&s(e.cancel)&&s(e.getReader))(e)||(e=>o(e)&&s(e.read)&&s(e.pipe)&&n(e.readable))(e)},35889:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var n=r(54361),s=r(7386),o=r(61727),a=r(52291);async function i(e,t,r,i){let _,c;Array.isArray(t)||(0,s.C)(t)?(_=t,c=r):(_=[],c=t);const S=(0,o.b)(c);let u=e;return"string"==typeof e&&(u=await S(e)),(0,n.Lj)(e)&&(u=await S(e)),Array.isArray(_),await(0,a.Q)(u,_,c)}},52291:(e,t,r)=>{"use strict";r.d(t,{Q:()=>F});var n=r(56369);class s{terminate(){}}var o=r(67625);const a=new Map;function i(e){(0,o.h)(e.source&&!e.url||!e.source&&e.url);let t=a.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return _((t=e,"try {\n  importScripts('"+t+"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}"));var t}(e.url),a.set(e.url,t)),e.source&&(t=_(e.source),a.set(e.source,t))),(0,o.h)(t),t}function _(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function c(e,t,r){void 0===t&&(t=!0);const n=r||new Set;if(e){if(S(e))n.add(e);else if(S(e.buffer))n.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"==typeof e)for(const s in e)c(e[s],t,n)}else;return void 0===r?Array.from(n):[]}function S(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}var u=r(25108);const l=()=>{};class E{static isSupported(){return"undefined"!=typeof Worker&&n.jU||void 0!==s&&!n.jU}constructor(e){this.terminated=!1,this._loadableURL="";const{name:t,source:r,url:s}=e;(0,o.h)(r||s),this.name=t,this.source=r,this.url=s,this.onMessage=l,this.onError=e=>u.log(e),this.worker=n.jU?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=l,this.onError=l,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||c(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker "+this.name+" from "+this.url+". ",e.message&&(t+=e.message+" in "),e.lineno&&(t+=":"+e.lineno+":"+e.colno),new Error(t)}_createBrowserWorker(){this._loadableURL=i({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>u.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./"+this.url;e=new s(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new s(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class f{constructor(e,t){this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){(0,o.h)(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){(0,o.h)(this.isRunning),this.isRunning=!1,this._reject(e)}}var T=r(25108);class d{static isSupported(){return E.isSupported()}constructor(e){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=()=>{},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e,t,r){void 0===t&&(t=(e,t,r)=>e.done(r)),void 0===r&&(r=(e,t)=>e.error(t));const n=new Promise((n=>(this.jobQueue.push({name:e,onMessage:t,onError:r,onStart:n}),this)));return this._startQueuedJob(),await n}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const n=new f(t.name,e);e.onMessage=e=>t.onMessage(n,e.type,e.payload),e.onError=e=>t.onError(n,e),t.onStart(n);try{await n.result}catch(r){T.error("Worker exception: "+r)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!n.jU||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new E({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return n.tq?this.maxMobileConcurrency:this.maxConcurrency}}const A={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class R{static isSupported(){return E.isSupported()}static getWorkerFarm(e){return void 0===e&&(e={}),R._workerFarm=R._workerFarm||new R({}),R._workerFarm.setProps(e),R._workerFarm}constructor(e){this.workerPools=new Map,this.props={...A},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:r,url:n}=e;let s=this.workerPools.get(t);return s||(s=new d({name:t,source:r,url:n}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}var C=r(34329);var h=r(25108);async function m(e,t,r,s,a){const i=e.id,_=function(e,t){void 0===t&&(t={});const r=t[e.id]||{},s=n.jU?e.id+"-worker.js":e.id+"-worker-node.js";let a=r.workerUrl;if(a||"compression"!==e.id||(a=t.workerUrl),"test"===t._workerType&&(a="modules/"+e.module+"/dist/"+s),!a){let t=e.version;"latest"===t&&(t=C.e);const r=t?"@"+t:"";a="https://unpkg.com/@loaders.gl/"+e.module+r+"/dist/"+s}return(0,o.h)(a),a}(e,r),c=R.getWorkerFarm(r).getWorkerPool({name:i,url:_});r=JSON.parse(JSON.stringify(r)),s=JSON.parse(JSON.stringify(s||{}));const S=await c.startJob("process-on-worker",p.bind(null,a));S.postMessage("process",{input:t,options:r,context:s});const u=await S.result;return await u.result}async function p(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:o,input:a,options:i}=n;try{const r=await e(a,i);t.postMessage("done",{id:o,result:r})}catch(s){const e=s instanceof Error?s.message:"unknown error";t.postMessage("error",{id:o,error:e})}break;default:h.warn("parse-with-worker unknown message "+r)}}var N=r(7386),O=r(54361),g=r(488),P=r(56525),y=r(78346);const G=262144;const D=262144;const x=1048576;var w=r(82282),b=r(7598);function B(e,t){return w.jU?async function*(e,t){const r=e.getReader();let n;try{for(;;){const e=n||r.read();null!=t&&t._streamReadAhead&&(n=r.read());const{done:s,value:o}=await e;if(s)return;yield(0,b.rJ)(o)}}catch(s){r.releaseLock()}}(e,t):async function*(e,t){for await(const r of e)yield(0,b.rJ)(r)}(e)}function M(e,t){if("string"==typeof e)return function*(e,t){const r=(null==t?void 0:t.chunkSize)||G;let n=0;const s=new TextEncoder;for(;n<e.length;){const t=Math.min(e.length-n,r),o=e.slice(n,n+t);n+=t,yield s.encode(o)}}(e,t);if(e instanceof ArrayBuffer)return function(e,t){return void 0===t&&(t={}),function*(){const{chunkSize:r=D}=t;let n=0;for(;n<e.byteLength;){const t=Math.min(e.byteLength-n,r),s=new ArrayBuffer(t),o=new Uint8Array(e,n,t);new Uint8Array(s).set(o),n+=t,yield s}}()}(e,t);if((0,O.Lj)(e))return async function*(e,t){const r=(null==t?void 0:t.chunkSize)||x;let n=0;for(;n<e.size;){const t=n+r,s=await e.slice(n,t).arrayBuffer();n=t,yield s}}(e,t);if((0,O.Os)(e))return B(e,t);if((0,O.Ew)(e)){return B(e.body,t)}throw new Error("makeIterator")}var L=r(46832);const X="Cannot convert supplied data type";async function I(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||n)return function(e,t,r){if(t.text&&"string"==typeof e)return e;if((0,O.zH)(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const n=e.byteLength||e.length;return 0===e.byteOffset&&n===r.byteLength||(r=r.slice(e.byteOffset,e.byteOffset+n)),r}throw new Error(X)}(e,t);if((0,O.Lj)(e)&&(e=await(0,L.L1)(e)),(0,O.Ew)(e)){const r=e;return await(0,L.mm)(r),t.binary?await r.arrayBuffer():await r.text()}if((0,O.Os)(e)&&(e=M(e,r)),(0,O.TW)(e)||(0,O.D0)(e))return(0,y.GZ)(e);throw new Error(X)}var v=r(61727),H=r(27346),U=r(80072);var k=r(86865),K=r(25939);async function F(e,t,r,s){!t||Array.isArray(t)||(0,N.C)(t)||(s=void 0,r=t,t=void 0),e=await e,r=r||{};const a=(0,k.vM)(e),i=function(e,t){if(e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...e]:e}return r&&r.length?r:void 0}(t,s),_=await(0,K.A)(e,i,r);return _?(s=function(e,t,r){if(r)return r;const n={fetch:(0,v.b)(t,e),...e};if(n.url){const e=(0,H.k)(n.url);n.baseUrl=e,n.queryString=(0,H.S)(n.url),n.filename=U.vB(e),n.baseUrl=U.XX(e)}return Array.isArray(n.loaders)||(n.loaders=null),n}({url:a,_parse:F,loaders:i},r=(0,g.GR)(r,_,i,a),s||null),await async function(e,t,r,s){if(function(e,t){void 0===t&&(t=C.q),(0,o.h)(e,"no worker provided");const r=e.version}(e),r=(0,P.N)(e.options,r),(0,O.Ew)(t)){const e=t,{ok:r,redirected:n,status:o,statusText:a,type:i,url:_}=e,c=Object.fromEntries(e.headers.entries());s.response={headers:c,ok:r,redirected:n,status:o,statusText:a,type:i,url:_}}t=await I(t,e,r);const a=e;if(a.parseTextSync&&"string"==typeof t)return a.parseTextSync(t,r,s);if(function(e,t){return!!R.isSupported()&&!!(n.jU||null!=t&&t._nodeWorkers)&&e.worker&&(null==t?void 0:t.worker)}(e,r))return await m(e,t,r,s,F);if(a.parseText&&"string"==typeof t)return await a.parseText(t,r,s);if(a.parse)return await a.parse(t,r,s);throw(0,o.h)(!a.parseSync),new Error(e.id+" loader - no parser found and worker is disabled")}(_,e,r,s)):null}},92859:(e,t,r)=>{"use strict";r.d(t,{fh:()=>a,kO:()=>i});var n=r(7386),s=r(488);const o=()=>{const e=(0,s.rx)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function a(e){const t=o();e=Array.isArray(e)?e:[e];for(const r of e){const e=(0,n.T)(r);t.find((t=>e===t))||t.unshift(e)}}function i(){return o()}},25939:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(80072),s=r(28490),o=r(7386);const a=new(r(18686).Z)({id:"loaders.gl"});var i=r(86865),_=r(92859),c=r(54361),S=r(27346);const u=/\.([^.]+)$/;async function l(e,t,r,n){if(void 0===t&&(t=[]),!f(e))return null;let s=E(e,t,{...r,nothrow:!0},n);if(s)return s;if((0,c.Lj)(e)&&(s=E(e=await e.slice(0,10).arrayBuffer(),t,r,n)),!(s||null!=r&&r.nothrow))throw new Error(T(e));return s}function E(e,t,r,n){if(void 0===t&&(t=[]),!f(e))return null;if(t&&!Array.isArray(t))return(0,o.T)(t);let s=[];t&&(s=s.concat(t)),null!=r&&r.ignoreRegisteredLoaders||s.push(...(0,_.kO)()),function(e){for(const t of e)(0,o.T)(t)}(s);const c=function(e,t,r,n){const s=(0,i.vM)(e),o=(0,i.Ry)(e),_=(0,S.k)(s)||(null==n?void 0:n.url);let c=null,l="";null!=r&&r.mimeType&&(c=d(t,null==r?void 0:r.mimeType),l="match forced by supplied MIME type "+(null==r?void 0:r.mimeType));c=c||function(e,t){const r=t&&u.exec(t),n=r&&r[1];return n?function(e,t){t=t.toLowerCase();for(const r of e)for(const e of r.extensions)if(e.toLowerCase()===t)return r;return null}(e,n):null}(t,_),l=l||(c?"matched url "+_:""),c=c||d(t,o),l=l||(c?"matched MIME type "+o:""),c=c||function(e,t){if(!t)return null;for(const r of e)if("string"==typeof t){if(A(t,r))return r}else if(ArrayBuffer.isView(t)){if(R(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer){if(R(t,0,r))return r}return null}(t,e),l=l||(c?"matched initial data "+C(e):""),null!=r&&r.fallbackMimeType&&(c=c||d(t,null==r?void 0:r.fallbackMimeType),l=l||(c?"matched fallback MIME type "+o:""));var E;l&&a.log(1,"selectLoader selected "+(null==(E=c)?void 0:E.name)+": "+l+".");return c}(e,s,r,n);if(!(c||null!=r&&r.nothrow))throw new Error(T(e));return c}function f(e){return!(e instanceof Response&&204===e.status)}function T(e){const t=(0,i.vM)(e),r=(0,i.Ry)(e);let s="No valid loader found (";s+=t?n.vB(t)+", ":"no url provided, ",s+="MIME type: "+(r?'"'+r+'"':"not provided")+", ";const o=e?C(e):"";return s+=o?' first bytes: "'+o+'"':"first bytes: not available",s+=")",s}function d(e,t){for(const r of e){if(r.mimeTypes&&r.mimeTypes.includes(t))return r;if(t==="application/x."+r.id)return r}return null}function A(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function R(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some((r=>function(e,t,r,n){if(n instanceof ArrayBuffer)return(0,s.Xq)(n,e,n.byteLength);switch(typeof n){case"function":return n(e);case"string":return n===h(e,t,n.length);default:return!1}}(e,t,0,r)))}function C(e,t){if(void 0===t&&(t=5),"string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return h(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return h(e,0,t)}return""}function h(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let s="";for(let o=0;o<r;o++)s+=String.fromCharCode(n.getUint8(t+o));return s}},97737:(e,t,r)=>{"use strict";r.d(t,{dc:()=>o});var n=r(92730),s=r(46832);async function o(e,t){if("string"==typeof e){const s=(0,n.i3)(e);var r,o;if(function(e){return!function(e){return e.startsWith("http:")||e.startsWith("https:")}(e)&&!function(e){return e.startsWith("data:")}(e)}(s))if(null!=(r=globalThis.loaders)&&r.fetchNode)return null==(o=globalThis.loaders)?void 0:o.fetchNode(s,t);return await fetch(s,t)}return await(0,s.L1)(e)}},61727:(e,t,r)=>{"use strict";r.d(t,{b:()=>a});var n=r(54361),s=r(97737),o=r(488);function a(e,t){const r=(0,o.pm)(),a=e||r;return"function"==typeof a.fetch?a.fetch:(0,n.Kn)(a.fetch)?e=>(0,s.dc)(e,a.fetch):null!=t&&t.fetch?null==t?void 0:t.fetch:s.dc}},7386:(e,t,r)=>{"use strict";r.d(t,{C:()=>s,T:()=>o});var n=r(61573);function s(e){var t;if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(null==(t=e)?void 0:t.extensions)}function o(e){var t,r;let o;return(0,n.h)(e,"null loader"),(0,n.h)(s(e),"invalid loader"),Array.isArray(e)&&(o=e[1],e=e[0],e={...e,options:{...e.options,...o}}),(null!=(t=e)&&t.parseTextSync||null!=(r=e)&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}},488:(e,t,r)=>{"use strict";r.d(t,{pm:()=>l,rx:()=>u,GR:()=>E});var n=r(54361),s=r(18686),o=r(25108);const a=new s.Z({id:"loaders.gl"});class i{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var _=r(82282);const c={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){this.console=o}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.error.bind(this.console,...t)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:_.jU,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},S={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function u(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}function l(){const e=u();return e.globalOptions=e.globalOptions||{...c},e.globalOptions}function E(e,t,r,n){return r=r||[],function(e,t){f(e,null,c,S,t);for(const r of t){const n=e&&e[r.id]||{},s=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};f(n,r.id,s,o,t)}}(e,r=Array.isArray(r)?r:[r]),d(t,e,n)}function f(e,t,r,s,o){const i=t||"Top level",_=t?t+".":"";for(const c in e){const S=!t&&(0,n.Kn)(e[c]);if(!(c in r)&&!("baseUri"===c&&!t)&&!("workerUrl"===c&&t))if(c in s)a.warn(i+" loader option '"+_+c+"' no longer supported, use '"+s[c]+"'")();else if(!S){const e=T(c,o);a.warn(i+" loader option '"+_+c+"' not recognized. "+e)()}}}function T(e,t){const r=e.toLowerCase();let n="";for(const s of t)for(const t in s.options){if(e===t)return"Did you mean '"+s.id+"."+t+"'?";const o=t.toLowerCase();(r.startsWith(o)||o.startsWith(r))&&(n=n||"Did you mean '"+s.id+"."+t+"'?")}return n}function d(e,t,r){const n={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(n,r),null===n.log&&(n.log=new i),A(n,l()),A(n,t),n}function A(e,t){for(const r in t)if(r in t){const s=t[r];(0,n.Ss)(s)&&(0,n.Ss)(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}},86865:(e,t,r)=>{"use strict";r.d(t,{Cu:()=>S,Ry:()=>c,vM:()=>_});var n=r(54361);const s=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,o=/^([-\w.]+\/[-\w.+]+)/;function a(e){const t=s.exec(e);return t?t[1]:""}var i=r(27346);function _(e){if((0,n.Ew)(e)){return e.url}if((0,n.Lj)(e)){return e.name||""}return"string"==typeof e?e:""}function c(e){if((0,n.Ew)(e)){const t=e,r=t.headers.get("content-type")||"",n=(0,i.k)(t.url);return function(e){const t=o.exec(e);return t?t[1]:e}(r)||a(n)}if((0,n.Lj)(e)){return e.type||""}return"string"==typeof e?a(e):""}function S(e){if((0,n.Ew)(e)){return e.headers["content-length"]||-1}if((0,n.Lj)(e)){return e.size}return"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}},46832:(e,t,r)=>{"use strict";r.d(t,{L1:()=>o,mm:()=>a});var n=r(54361),s=r(86865);async function o(e){if((0,n.Ew)(e))return e;const t={},r=(0,s.Cu)(e);r>=0&&(t["content-length"]=String(r));const o=(0,s.vM)(e),a=(0,s.Ry)(e);a&&(t["content-type"]=a);const i=await async function(e){const t=5;if("string"==typeof e)return"data:,"+e.slice(0,t);if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const r=new FileReader;r.onload=t=>{var r;return e(null==t||null==(r=t.target)?void 0:r.result)},r.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){return"data:base64,"+function(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}(e.slice(0,t))}return null}(e);i&&(t["x-first-bytes"]=i),"string"==typeof e&&(e=(new TextEncoder).encode(e));const _=new Response(e,{headers:t});return Object.defineProperty(_,"url",{value:o}),_}async function a(e){if(!e.ok){const t=await async function(e){let t="Failed to fetch resource "+e.url+" ("+e.status+"): ";try{const r=e.headers.get("Content-Type");let n=e.statusText;null!=r&&r.includes("application/json")&&(n+=" "+await e.text()),t+=n,t=t.length>60?t.slice(0,60)+"...":t}catch(r){}return t}(e);throw new Error(t)}}},27346:(e,t,r)=>{"use strict";r.d(t,{S:()=>s,k:()=>o});const n=/\?.*/;function s(e){const t=e.match(n);return t&&t[0]}function o(e){return e.replace(n,"")}},48093:(e,t,r)=>{"use strict";r.d(t,{S:()=>N});const n="undefined"!=typeof __VERSION__?__VERSION__:"latest";var s,o=r(61573),a=r(82282);const i=null==(s=globalThis.loaders)?void 0:s.parseImageNode,_="undefined"!=typeof Image,c="undefined"!=typeof ImageBitmap,S=Boolean(i),u=!!a.jU||S;var l=r(74885);const E=/^data:image\/svg\+xml/,f=/\.svg((\?|#).*)?$/;function T(e){return e&&(E.test(e)||f.test(e))}function d(e,t){if(T(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function A(e,t,r){const n=function(e,t){if(T(t)){let t=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(r){throw new Error(r.message)}return"data:image/svg+xml;base64,"+btoa(t)}return d(e,t)}(e,r),s=self.URL||self.webkitURL,o="string"!=typeof n&&s.createObjectURL(n);try{return await async function(e,t){const r=new Image;if(r.src=e,t.image&&t.image.decode&&r.decode)return await r.decode(),r;return await new Promise(((t,n)=>{try{r.onload=()=>t(r),r.onerror=t=>n(new Error("Could not load image "+e+": "+t))}catch(s){n(s)}}))}(o||n,t)}finally{o&&s.revokeObjectURL(o)}}var R=r(25108);const C={};let h=!0;async function m(e,t,r){let n;if(T(r)){n=await A(e,t,r)}else n=d(e,r);const s=t&&t.imagebitmap;return await async function(e,t){void 0===t&&(t=null);!function(e){for(const t in e||C)return!1;return!0}(t)&&h||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(r){R.warn(r),h=!1}return await createImageBitmap(e)}(n,s)}var p=r(98746);const N={id:"image",module:"images",name:"Images",version:n,mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(e,t,r){const n=((t=t||{}).image||{}).type||"auto",{url:s}=r||{};let a;switch(function(e){switch(e){case"auto":case"data":return function(){if(c)return"imagebitmap";if(_)return"image";if(u)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return c||_||u;case"imagebitmap":return c;case"image":return _;case"data":return u;default:throw new Error("@loaders.gl/images: image "+e+" not supported in this environment")}}(e),e}}(n)){case"imagebitmap":a=await m(e,t,s);break;case"image":a=await A(e,t,s);break;case"data":a=await async function(e,t){var r;const{mimeType:n}=(0,p.I)(e)||{},s=null==(r=globalThis.loaders)?void 0:r.parseImageNode;return(0,o.h)(s),await s(e,n)}(e);break;default:(0,o.h)(!1)}return"data"===n&&(a=(0,l.n$)(a)),a},tests:[e=>Boolean((0,p.I)(new DataView(e)))],options:{image:{type:"auto",decode:!0}}}},98746:(e,t,r)=>{"use strict";function n(e){return function(e,t,r){void 0===r&&(r=0);const n=(s=t,[...s].map((e=>e.charCodeAt(0))));var s;for(let o=0;o<n.length;++o)if(n[o]!==e[o+r])return!1;return!0}(e,"ftyp",4)?0==(96&e[8])?null:function(e){switch((t=e,r=8,n=12,String.fromCharCode(...t.slice(r,n))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var t,r,n}(e):null}r.d(t,{I:()=>a});const s=!1,o=!0;function a(e){const t=i(e);return function(e){const t=i(e),r=t.byteLength>=24&&2303741511===t.getUint32(0,s);if(!r)return null;return{mimeType:"image/png",width:t.getUint32(16,s),height:t.getUint32(20,s)}}(t)||function(e){const t=i(e),r=t.byteLength>=3&&65496===t.getUint16(0,s)&&255===t.getUint8(2);if(!r)return null;const{tableMarkers:n,sofMarkers:o}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let a=2;for(;a+9<t.byteLength;){const e=t.getUint16(a,s);if(o.has(e))return{mimeType:"image/jpeg",height:t.getUint16(a+5,s),width:t.getUint16(a+7,s)};if(!n.has(e))return null;a+=2,a+=t.getUint16(a,s)}return null}(t)||function(e){const t=i(e),r=t.byteLength>=10&&1195984440===t.getUint32(0,s);if(!r)return null;return{mimeType:"image/gif",width:t.getUint16(6,o),height:t.getUint16(8,o)}}(t)||function(e){const t=i(e),r=t.byteLength>=14&&16973===t.getUint16(0,s)&&t.getUint32(2,o)===t.byteLength;if(!r)return null;return{mimeType:"image/bmp",width:t.getUint32(18,o),height:t.getUint32(22,o)}}(t)||function(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),r=n(t);if(!r)return null;return{mimeType:r.mimeType,width:0,height:0}}(t)}function i(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}},74885:(e,t,r)=>{"use strict";function n(e){const t=o(e);if(!t)throw new Error("Not an image");return t}function s(e){switch(n(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function o(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"==typeof e&&e.data&&e.width&&e.height?"data":null}r.d(t,{n$:()=>s})},28490:(e,t,r)=>{"use strict";function n(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),s=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==s[o])return!1;return!0}function s(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),s=n.reduce(((e,t)=>e+t.byteLength),0),o=new Uint8Array(s);let a=0;for(const i of n)o.set(i,a),a+=i.byteLength;return o.buffer}function o(e,t,r){const n=void 0!==r?new Uint8Array(e).subarray(t,t+r):new Uint8Array(e).subarray(t);return new Uint8Array(n).buffer}r.d(t,{JY:()=>s,Xq:()=>n,qv:()=>o})},7598:(e,t,r)=>{"use strict";function n(e){if((t=e)&&"object"==typeof t&&t.isBuffer)return e;var t;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}r.d(t,{rJ:()=>n})},61573:(e,t,r)=>{"use strict";function n(e,t){if(!e)throw new Error(t||"loader assertion failed.")}r.d(t,{h:()=>n})},82282:(e,t,r)=>{"use strict";r.d(t,{jU:()=>s});var n=r(34155);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==r.g&&r.g,"undefined"!=typeof document&&document;const s=Boolean("object"!=typeof n||"[object process]"!==String(n)||n.browser),o=void 0!==n&&n.version&&/v([0-9]*)/.exec(n.version);o&&parseFloat(o[1])},78346:(e,t,r)=>{"use strict";r.d(t,{Ed:()=>s,GZ:()=>o});var n=r(28490);async function s(e,t){for(;;){const{done:r,value:n}=await e.next();if(r)return void e.return();if(t(n))return}}async function o(e){const t=[];for await(const r of e)t.push(r);return(0,n.JY)(...t)}},56525:(e,t,r)=>{"use strict";function n(e,t){return s(e||{},t)}function s(e,t){const r={...e};for(const[n,o]of Object.entries(t))o&&"object"==typeof o&&!Array.isArray(o)?r[n]=s(r[n]||{},t[n]):r[n]=t[n];return r}r.d(t,{N:()=>n})},92730:(e,t,r)=>{"use strict";r.d(t,{i3:()=>o});let n="";const s={};function o(e){for(const t in s)if(e.startsWith(t)){const r=s[t];e=e.replace(t,r)}return e.startsWith("http://")||e.startsWith("https://")||(e=""+n+e),e}},80072:(e,t,r)=>{"use strict";r.d(t,{XX:()=>a,vB:()=>o,DB:()=>i});var n=r(34155);function s(){var e;if(void 0!==n&&void 0!==n.cwd)return n.cwd();const t=null==(e=window.location)?void 0:e.pathname;return(null==t?void 0:t.slice(0,t.lastIndexOf("/")+1))||""}function o(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function a(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}function i(){const e=[];for(let s=0;s<arguments.length;s++)e[s]=s<0||arguments.length<=s?void 0:arguments[s];let t,r="",n=!1;for(let o=e.length-1;o>=-1&&!n;o--){let a;o>=0?a=e[o]:(void 0===t&&(t=s()),a=t),0!==a.length&&(r=a+"/"+r,n=a.charCodeAt(0)===_)}return r=function(e,t){let r,n="",s=-1,o=0,a=!1;for(let i=0;i<=e.length;++i){if(i<e.length)r=e.charCodeAt(i);else{if(r===_)break;r=_}if(r===_){if(s===i-1||1===o);else if(s!==i-1&&2===o){if(n.length<2||!a||n.charCodeAt(n.length-1)!==c||n.charCodeAt(n.length-2)!==c)if(n.length>2){const e=n.length-1;let t=e;for(;t>=0&&n.charCodeAt(t)!==_;--t);if(t!==e){n=-1===t?"":n.slice(0,t),s=i,o=0,a=!1;continue}}else if(2===n.length||1===n.length){n="",s=i,o=0,a=!1;continue}t&&(n.length>0?n+="/..":n="..",a=!0)}else{const t=e.slice(s+1,i);n.length>0?n+="/"+t:n=t,a=!1}s=i,o=0}else r===c&&-1!==o?++o:o=-1}return n}(r,!n),n?"/"+r:r.length>0?r:"."}const _=47,c=46},30202:(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var n=r(14428),s=r(33313);const o={...{name:"Basis",id:"basis",module:"textures",version:n.q,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},parse:s.Z}},11459:(e,t,r)=>{"use strict";r.d(t,{D:()=>N});var n=r(14428),s=r(59560),o=r(61573),a=r(35936),i=r(28926);const _={MAGIC_NUMBER:542327876,HEADER_LENGTH:31,MAGIC_NUMBER_INDEX:0,HEADER_SIZE_INDEX:1,HEADER_FLAGS_INDEX:2,HEADER_HEIGHT_INDEX:3,HEADER_WIDTH_INDEX:4,MIPMAPCOUNT_INDEX:7,HEADER_PF_FLAGS_INDEX:20,HEADER_PF_FOURCC_INDEX:21,DDSD_MIPMAPCOUNT:131072,DDPF_FOURCC:4},c={DXT1:a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_S3TC_DXT1_EXT,DXT3:a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT3_EXT,DXT5:a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT5_EXT,"ATC ":a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_ATC_WEBGL,ATCA:a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,ATCI:a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL},S={DXT1:l,DXT3:E,DXT5:E,"ATC ":l,ATCA:E,ATCI:E};function u(e){const t=new Int32Array(e,0,_.HEADER_LENGTH),r=t[_.HEADER_PF_FOURCC_INDEX];(0,o.h)(Boolean(t[_.HEADER_PF_FLAGS_INDEX]&_.DDPF_FOURCC),"DDS: Unsupported format, must contain a FourCC code");const n=(s=r,String.fromCharCode(255&s,s>>8&255,s>>16&255,s>>24&255));var s;const a=c[n],u=S[n];(0,o.h)(a&&u,"DDS: Unknown pixel format "+r);let l=1;t[_.HEADER_FLAGS_INDEX]&_.DDSD_MIPMAPCOUNT&&(l=Math.max(1,t[_.MIPMAPCOUNT_INDEX]));const E=t[_.HEADER_WIDTH_INDEX],f=t[_.HEADER_HEIGHT_INDEX],T=t[_.HEADER_SIZE_INDEX]+4,d=new Uint8Array(e,T);return(0,i.J)(d,{mipMapLevels:l,width:E,height:f,sizeFunction:u,internalFormat:a})}function l(e,t){return(e+3>>2)*(t+3>>2)*8}function E(e,t){return(e+3>>2)*(t+3>>2)*16}const f={MAGIC_NUMBER:55727696,MAGIC_NUMBER_EXTRA:1347834371,HEADER_LENGTH:13,HEADER_SIZE:52,MAGIC_NUMBER_INDEX:0,PIXEL_FORMAT_INDEX:2,COLOUR_SPACE_INDEX:4,HEIGHT_INDEX:6,WIDTH_INDEX:7,MIPMAPCOUNT_INDEX:11,METADATA_SIZE_INDEX:12},T={0:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG],1:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG],2:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG],3:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG],6:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_ETC1_WEBGL],7:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_S3TC_DXT1_EXT],9:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT3_EXT],11:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT5_EXT],22:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB8_ETC2],23:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA8_ETC2_EAC],24:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2],25:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_R11_EAC],26:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RG11_EAC],27:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_4X4_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR],28:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5X4_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR],29:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5X5_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR],30:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6X5_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR],31:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6X6_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR],32:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8X5_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR],33:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8X6_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR],34:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8X8_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR],35:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10X5_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR],36:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10X6_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR],37:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10X8_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR],38:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10X10_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR],39:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12X10_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR],40:[a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12X12_KHR,a.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR]},d={0:A,1:A,2:R,3:R,6:C,7:C,9:h,11:h,22:C,23:h,24:C,25:C,26:h,27:h,28:function(e,t){return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16},29:function(e,t){return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16},30:function(e,t){return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16},31:function(e,t){return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16},32:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16},33:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16},34:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16},35:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16},36:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16},37:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16},38:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16},39:function(e,t){return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16},40:function(e,t){return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16}};function A(e,t){return(e=Math.max(e,16))*(t=Math.max(t,8))/4}function R(e,t){return(e=Math.max(e,8))*(t=Math.max(t,8))/2}function C(e,t){return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8}function h(e,t){return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16}function m(e){if((0,s.j)(e))return(0,s.P)(e);if(function(e){return new Uint32Array(e,0,_.HEADER_LENGTH)[_.MAGIC_NUMBER_INDEX]===_.MAGIC_NUMBER}(e))return u(e);if(function(e){const t=new Uint32Array(e,0,f.HEADER_LENGTH)[f.MAGIC_NUMBER_INDEX];return t===f.MAGIC_NUMBER||t===f.MAGIC_NUMBER_EXTRA}(e))return function(e){const t=new Uint32Array(e,0,f.HEADER_LENGTH),r=t[f.PIXEL_FORMAT_INDEX],n=t[f.COLOUR_SPACE_INDEX],s=T[r]||[],o=s.length>1&&n?s[1]:s[0],a=d[r],_=t[f.MIPMAPCOUNT_INDEX],c=t[f.WIDTH_INDEX],S=t[f.HEIGHT_INDEX],u=f.HEADER_SIZE+t[f.METADATA_SIZE_INDEX],l=new Uint8Array(e,u);return(0,i.J)(l,{mipMapLevels:_,width:c,height:S,sizeFunction:a,internalFormat:o})}(e);throw new Error("Texture container format not recognized")}var p=r(33313);const N={...{name:"Texture Containers",id:"compressed-texture",module:"textures",version:n.q,worker:!0,extensions:["ktx","ktx2","dds","pvr"],mimeTypes:["image/ktx2","image/ktx","image/vnd-ms.dds","image/x-dds","application/octet-stream"],binary:!0,options:{"compressed-texture":{libraryPath:"libs/",useBasis:!1}}},parse:async(e,t)=>{var r;if(null!=t&&null!=(r=t["compressed-texture"])&&r.useBasis){t.basis={format:{alpha:"BC3",noAlpha:"BC1"},...t.basis,containerFormat:"ktx2",module:"encoder"};return(await(0,p.Z)(e,t))[0]}return m(e)}}},35936:(e,t,r)=>{"use strict";r.d(t,{GL_EXTENSIONS_CONSTANTS:()=>n});const n={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919}},33313:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E,h:()=>C});var n=r(94236);const s={TRANSCODER:"basis_transcoder.js",TRANSCODER_WASM:"basis_transcoder.wasm",ENCODER:"basis_encoder.js",ENCODER_WASM:"basis_encoder.wasm"};let o,a;async function i(e){const t=e.modules||{};return t.basis?t.basis:(o=o||async function(e){let t=null,r=null;return[t,r]=await Promise.all([await(0,n.Y)(s.TRANSCODER,"textures",e),await(0,n.Y)(s.TRANSCODER_WASM,"textures",e)]),t=t||globalThis.BASIS,await function(e,t){const r={};t&&(r.wasmBinary=t);return new Promise((t=>{e(r).then((e=>{const{BasisFile:r,initializeBasis:n}=e;n(),t({BasisFile:r})}))}))}(t,r)}(e),await o)}async function _(e){const t=e.modules||{};return t.basisEncoder?t.basisEncoder:(a=a||async function(e){let t=null,r=null;return[t,r]=await Promise.all([await(0,n.Y)(s.ENCODER,"textures",e),await(0,n.Y)(s.ENCODER_WASM,"textures",e)]),t=t||globalThis.BASIS,await function(e,t){const r={};t&&(r.wasmBinary=t);return new Promise((t=>{e(r).then((e=>{const{BasisFile:r,KTX2File:n,initializeBasis:s,BasisEncoder:o}=e;s(),t({BasisFile:r,KTX2File:n,BasisEncoder:o})}))}))}(t,r)}(e),await a)}var c=r(35936),S=r(45475),u=r(59560);const l={etc1:{basisFormat:0,compressed:!0,format:c.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:c.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:c.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:c.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:c.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:c.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};async function E(e,t){if("auto"===t.basis.containerFormat){if((0,u.j)(e)){return d((await _(t)).KTX2File,e,t)}const{BasisFile:r}=await i(t);return f(r,e,t)}if("encoder"===t.basis.module){const r=await _(t);return"ktx2"===t.basis.containerFormat?d(r.KTX2File,e,t):f(r.BasisFile,e,t)}{const{BasisFile:r}=await i(t);return f(r,e,t)}}function f(e,t,r){const n=new e(new Uint8Array(t));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");const e=n.getNumImages(),t=[];for(let s=0;s<e;s++){const e=n.getNumLevels(s),o=[];for(let t=0;t<e;t++)o.push(T(n,s,t,r));t.push(o)}return t}finally{n.close(),n.delete()}}function T(e,t,r,n){const s=e.getImageWidth(t,r),o=e.getImageHeight(t,r),a=e.getHasAlpha(),{compressed:i,format:_,basisFormat:c}=R(n,a),S=e.getImageTranscodedSizeInBytes(t,r,c),u=new Uint8Array(S);if(!e.transcodeImage(u,t,r,c,0,0))throw new Error("failed to start Basis transcoding");return{width:s,height:o,data:u,compressed:i,format:_,hasAlpha:a}}function d(e,t,r){const n=new e(new Uint8Array(t));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");const e=n.getLevels(),t=[];for(let s=0;s<e;s++){t.push(A(n,s,r));break}return[t]}finally{n.close(),n.delete()}}function A(e,t,r){const{alphaFlag:n,height:s,width:o}=e.getImageLevelInfo(t,0,0),{compressed:a,format:i,basisFormat:_}=R(r,n),c=e.getImageTranscodedSizeInBytes(t,0,0,_),S=new Uint8Array(c);if(!e.transcodeImage(S,t,0,0,_,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:s,data:S,compressed:a,levelSize:c,hasAlpha:n,format:i}}function R(e,t){let r=e&&e.basis&&e.basis.format;return"auto"===r&&(r=C()),"object"==typeof r&&(r=t?r.alpha:r.noAlpha),r=r.toLowerCase(),l[r]}function C(){const e=(0,S.U)();return e.has("astc")?"astc-4x4":e.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:e.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:e.has("etc1")?"etc1":e.has("etc2")?"etc2":"rgb565"}},59560:(e,t,r)=>{"use strict";r.d(t,{j:()=>_,P:()=>c});var n=r(31029),s=r(28926),o=r(35936);const a={131:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB_S3TC_DXT1_EXT,132:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB_S3TC_DXT1_EXT,133:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT1_EXT,134:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,135:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT3_EXT,136:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,137:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_S3TC_DXT5_EXT,138:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,139:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RED_RGTC1_EXT,140:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SIGNED_RED_RGTC1_EXT,141:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RED_GREEN_RGTC2_EXT,142:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT,147:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB8_ETC2,148:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ETC2,149:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,150:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,151:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA8_ETC2_EAC,152:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,153:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_R11_EAC,154:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SIGNED_R11_EAC,155:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RG11_EAC,156:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SIGNED_RG11_EAC,157:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_4x4_KHR,158:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,159:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5x4_KHR,160:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR,161:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5x5_KHR,162:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,163:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6x5_KHR,164:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,165:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6x6_KHR,166:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,167:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x5_KHR,168:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,169:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x6_KHR,170:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,171:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x8_KHR,172:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,173:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x5_KHR,174:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,175:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x6_KHR,176:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,177:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x8_KHR,178:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,179:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x10_KHR,180:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,181:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12x10_KHR,182:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,183:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12x12_KHR,184:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR,1000054e3:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,1000054001:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,1000066e3:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_4x4_KHR,1000066001:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5x4_KHR,1000066002:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_5x5_KHR,1000066003:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6x5_KHR,1000066004:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_6x6_KHR,1000066005:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x5_KHR,1000066006:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x6_KHR,1000066007:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_8x8_KHR,1000066008:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x5_KHR,1000066009:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x6_KHR,1000066010:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x8_KHR,1000066011:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_10x10_KHR,1000066012:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12x10_KHR,1000066013:o.GL_EXTENSIONS_CONSTANTS.COMPRESSED_RGBA_ASTC_12x12_KHR};const i=[171,75,84,88,32,50,48,187,13,10,26,10];function _(e){const t=new Uint8Array(e);return!(t.byteLength<i.length||t[0]!==i[0]||t[1]!==i[1]||t[2]!==i[2]||t[3]!==i[3]||t[4]!==i[4]||t[5]!==i[5]||t[6]!==i[6]||t[7]!==i[7]||t[8]!==i[8]||t[9]!==i[9]||t[10]!==i[10]||t[11]!==i[11])}function c(e){const t=new Uint8Array(e),r=(0,n.ij)(t),o=Math.max(1,r.levels.length),i=r.pixelWidth,_=r.pixelHeight,c=(S=r.vkFormat,a[S]);var S;return(0,s.J)(r.levels,{mipMapLevels:o,width:i,height:_,sizeFunction:e=>e.uncompressedByteLength,internalFormat:c})}},28926:(e,t,r)=>{"use strict";function n(e,t){const r=new Array(t.mipMapLevels);let n=t.width,a=t.height,i=0;for(let _=0;_<t.mipMapLevels;++_){const c=o(t,n,a,e,_),S=s(e,_,i,c);r[_]={compressed:!0,format:t.internalFormat,data:S,width:n,height:a,levelSize:c},n=Math.max(1,n>>1),a=Math.max(1,a>>1),i+=c}return r}function s(e,t,r,n){return Array.isArray(e)?e[t].levelData:new Uint8Array(e.buffer,e.byteOffset+r,n)}function o(e,t,r,n,s){return Array.isArray(n)?e.sizeFunction(n[s]):e.sizeFunction(t,r)}r.d(t,{J:()=>n})},45475:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});const n=["","WEBKIT_","MOZ_"],s={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let o=null;function a(e){if(!o){e=e||function(){try{return document.createElement("canvas").getContext("webgl")}catch(e){return null}}()||void 0,o=new Set;for(const t of n)for(const r in s)if(e&&e.getExtension(""+t+r)){const e=s[r];o.add(e)}}return o}},14428:(e,t,r)=>{"use strict";r.d(t,{q:()=>n});const n="undefined"!=typeof __VERSION__?__VERSION__:"beta"},67625:(e,t,r)=>{"use strict";function n(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}r.d(t,{h:()=>n})},56369:(e,t,r)=>{"use strict";r.d(t,{hJ:()=>o,jU:()=>s,tq:()=>a});var n=r(34155);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==r.g&&r.g,"undefined"!=typeof document&&document;const s="object"!=typeof n||"[object process]"!==String(n)||n.browser,o="function"==typeof importScripts,a="undefined"!=typeof window&&void 0!==window.orientation,i=void 0!==n&&n.version&&/v([0-9]*)/.exec(n.version);i&&parseFloat(i[1])},34329:(e,t,r)=>{"use strict";r.d(t,{e:()=>s,q:()=>o});var n=r(25108);const s="beta";const o=(null!=(a=globalThis._loadersgl_)&&a.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},"undefined"==typeof __VERSION__?(n.warn("loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN."),globalThis._loadersgl_.version=s):globalThis._loadersgl_.version=__VERSION__),globalThis._loadersgl_.version);var a},94236:(e,t,r)=>{"use strict";r.d(t,{Y:()=>c});var n=r(56369),s=r(34184),o=r(67625),a=r(34329),i=r(25108);const _={};async function c(e,t,r,c){return void 0===t&&(t=null),void 0===r&&(r={}),void 0===c&&(c=null),t&&(e=function(e,t,r,s){void 0===r&&(r={});void 0===s&&(s=null);if(!r.useLocalLibraries&&e.startsWith("http"))return e;s=s||e;const i=r.modules||{};if(i[s])return i[s];if(!n.jU)return"modules/"+t+"/dist/libs/"+s;if(r.CDN)return(0,o.h)(r.CDN.startsWith("http")),r.CDN+"/"+t+"@"+a.q+"/dist/libs/"+s;if(n.hJ)return"../src/libs/"+s;return"modules/"+t+"/src/libs/"+s}(e,t,r,c)),_[e]=_[e]||async function(e){if(e.endsWith("wasm"))return await async function(e){if(n.jU||!s.readFileAsArrayBuffer||e.startsWith("http")){const t=await fetch(e);return await t.arrayBuffer()}return await s.readFileAsArrayBuffer(e)}(e);if(!n.jU)try{return s&&s.requireFromFile&&await s.requireFromFile(e)}catch(r){return i.error(r),null}if(n.hJ)return importScripts(e);const t=await async function(e){if(n.jU||!s.readFileAsText||e.startsWith("http")){const t=await fetch(e);return await t.text()}return await s.readFileAsText(e)}(e);return function(e,t){if(!n.jU)return s.requireFromString&&s.requireFromString(e,t);if(n.hJ)return eval.call(globalThis,e),null;const r=document.createElement("script");r.id=t;try{r.appendChild(document.createTextNode(e))}catch(o){r.text=e}return document.body.appendChild(r),null}(t,e)}(e),await _[e]}},31029:(e,t,r)=>{"use strict";r.d(t,{ij:()=>d});var n=r(48764).lW;new Uint8Array([0]);const s=[171,75,84,88,32,50,48,187,13,10,26,10];var o,a,i,_,c,S,u,l;!function(e){e[e.NONE=0]="NONE",e[e.BASISLZ=1]="BASISLZ",e[e.ZSTD=2]="ZSTD",e[e.ZLIB=3]="ZLIB"}(o||(o={})),function(e){e[e.BASICFORMAT=0]="BASICFORMAT"}(a||(a={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ETC1S=163]="ETC1S",e[e.UASTC=166]="UASTC"}(i||(i={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SRGB=1]="SRGB"}(_||(_={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LINEAR=1]="LINEAR",e[e.SRGB=2]="SRGB",e[e.ITU=3]="ITU",e[e.NTSC=4]="NTSC",e[e.SLOG=5]="SLOG",e[e.SLOG2=6]="SLOG2"}(c||(c={})),function(e){e[e.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",e[e.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(S||(S={})),function(e){e[e.RGB=0]="RGB",e[e.RRR=3]="RRR",e[e.GGG=4]="GGG",e[e.AAA=15]="AAA"}(u||(u={})),function(e){e[e.RGB=0]="RGB",e[e.RGBA=3]="RGBA",e[e.RRR=4]="RRR",e[e.RRRG=5]="RRRG"}(l||(l={}));class E{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=o.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:a.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:i.UNSPECIFIED,colorPrimaries:_.SRGB,transferFunction:_.SRGB,flags:S.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null}}class f{constructor(e,t,r,n){this._dataView=new DataView(e.buffer,e.byteOffset+t,r),this._littleEndian=n,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const r=this._offset;let n=0;for(;this._dataView.getUint8(this._offset)!==t&&n<e;)n++,this._offset++;return n<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,n)}}function T(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):n.from(e).toString("utf8")}function d(e){const t=new Uint8Array(e.buffer,e.byteOffset,s.length);if(t[0]!==s[0]||t[1]!==s[1]||t[2]!==s[2]||t[3]!==s[3]||t[4]!==s[4]||t[5]!==s[5]||t[6]!==s[6]||t[7]!==s[7]||t[8]!==s[8]||t[9]!==s[9]||t[10]!==s[10]||t[11]!==s[11])throw new Error("Missing KTX 2.0 identifier.");const r=new E,n=17*Uint32Array.BYTES_PER_ELEMENT,o=new f(e,s.length,n,!0);r.vkFormat=o._nextUint32(),r.typeSize=o._nextUint32(),r.pixelWidth=o._nextUint32(),r.pixelHeight=o._nextUint32(),r.pixelDepth=o._nextUint32(),r.layerCount=o._nextUint32(),r.faceCount=o._nextUint32();const a=o._nextUint32();r.supercompressionScheme=o._nextUint32();const i=o._nextUint32(),_=o._nextUint32(),c=o._nextUint32(),S=o._nextUint32(),u=o._nextUint64(),l=o._nextUint64(),d=new f(e,s.length+n,3*a*8,!0);for(let s=0;s<a;s++)r.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const A=new f(e,i,_,!0),R={vendorId:A._skip(4)._nextUint16(),descriptorType:A._nextUint16(),versionNumber:A._nextUint16(),descriptorBlockSize:A._nextUint16(),colorModel:A._nextUint8(),colorPrimaries:A._nextUint8(),transferFunction:A._nextUint8(),flags:A._nextUint8(),texelBlockDimension:{x:A._nextUint8()+1,y:A._nextUint8()+1,z:A._nextUint8()+1,w:A._nextUint8()+1},bytesPlane:[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],samples:[]},C=(R.descriptorBlockSize/4-6)/4;for(let s=0;s<C;s++)R.samples[s]={bitOffset:A._nextUint16(),bitLength:A._nextUint8(),channelID:A._nextUint8(),samplePosition:[A._nextUint8(),A._nextUint8(),A._nextUint8(),A._nextUint8()],sampleLower:A._nextUint32(),sampleUpper:A._nextUint32()};r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(R);const h=new f(e,c,S,!0);for(;h._offset<S;){const e=h._nextUint32(),t=h._scan(e),n=T(t),s=h._scan(e-t.byteLength);r.keyValue[n]=n.match(/^ktx/i)?T(s):s,e%4&&h._skip(4-e%4)}if(l<=0)return r;const m=new f(e,u,l,!0),p=m._nextUint16(),N=m._nextUint16(),O=m._nextUint32(),g=m._nextUint32(),P=m._nextUint32(),y=m._nextUint32(),G=[];for(let s=0;s<a;s++)G.push({imageFlags:m._nextUint32(),rgbSliceByteOffset:m._nextUint32(),rgbSliceByteLength:m._nextUint32(),alphaSliceByteOffset:m._nextUint32(),alphaSliceByteLength:m._nextUint32()});const D=u+m._offset,x=D+O,w=x+g,b=w+P,B=new Uint8Array(e.buffer,e.byteOffset+D,O),M=new Uint8Array(e.buffer,e.byteOffset+x,g),L=new Uint8Array(e.buffer,e.byteOffset+w,P),X=new Uint8Array(e.buffer,e.byteOffset+b,y);return r.globalData={endpointCount:p,selectorCount:N,imageDescs:G,endpointsData:B,selectorsData:M,tablesData:L,extendedData:X},r}},34184:()=>{}}]);