"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[590],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>f});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var d=r.createContext({}),s=function(e){var n=r.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},p=function(e){var n=s(e.components);return r.createElement(d.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,d=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=s(t),m=o,f=c["".concat(d,".").concat(m)]||c[m]||u[m]||i;return t?r.createElement(f,a(a({ref:n},p),{},{components:t})):r.createElement(f,a({ref:n},p))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=m;var l={};for(var d in n)hasOwnProperty.call(n,d)&&(l[d]=n[d]);l.originalType=e,l[c]="string"==typeof e?e:o,a[1]=l;for(var s=2;s<i;s++)a[s]=t[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},62361:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=t(87462),o=(t(67294),t(3905));const i={},a="Managing Dependencies",l={unversionedId:"developer-guide/dependencies",id:"developer-guide/dependencies",title:"Managing Dependencies",description:"This section is work in progress, not all options are implemented/finalized",source:"@site/../docs/developer-guide/dependencies.md",sourceDirName:"developer-guide",slug:"/developer-guide/dependencies",permalink:"/docs/developer-guide/dependencies",draft:!1,editUrl:"https://github.com/uber-web/loaders.gl/tree/master/website/../docs/developer-guide/dependencies.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Polyfills",permalink:"/docs/developer-guide/polyfills"},next:{title:"Creating New Loaders and Writers",permalink:"/docs/developer-guide/creating-loaders-and-writers"}},d={},s=[{value:"Loading Dependencies from Alternate CDN",id:"loading-dependencies-from-alternate-cdn",level:3},{value:"Loading Dependencies from Your Own Server",id:"loading-dependencies-from-your-own-server",level:3},{value:"Bundling Dependencies",id:"bundling-dependencies",level:3}],p={toc:s},c="wrapper";function u(e){let{components:n,...t}=e;return(0,o.kt)(c,(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"managing-dependencies"},"Managing Dependencies"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"This section is work in progress, not all options are implemented/finalized")),(0,o.kt)("p",null,"Parsers and encoders for some formats are quite complex and can be quite big in terms of code size."),(0,o.kt)("h3",{id:"loading-dependencies-from-alternate-cdn"},"Loading Dependencies from Alternate CDN"),(0,o.kt)("p",null,"By default, loaders.gl loads pre-built workers and a number of bigger external libraries from the ",(0,o.kt)("a",{parentName:"p",href:"https://unpkg.com/"},"https://unpkg.com/")," CDN."),(0,o.kt)("p",null,"It is possible to specify other CDNs using ",(0,o.kt)("inlineCode",{parentName:"p"},"options.cdn"),"."),(0,o.kt)("p",null,"Keep in mind that it is typically not sufficient to point to a server that just serves the data of the files in question. Browsers do a number of security checks on cross-origin content and requires certain response headers to be properly set, and unfortunately, error messages are not always helpful."),(0,o.kt)("p",null,"To determine your candidate CDN service is doing what is needed, check with ",(0,o.kt)("inlineCode",{parentName:"p"},"curl -u <url>")," and look for headers like:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"content-type: application/javascript; charset=utf-8\naccess-control-allow-origin: *\n")),(0,o.kt)("h3",{id:"loading-dependencies-from-your-own-server"},"Loading Dependencies from Your Own Server"),(0,o.kt)("p",null,"By setting ",(0,o.kt)("inlineCode",{parentName:"p"},"options.cdn: false")," and doing some extra setup, you can load dependencies from your own server. This removes the impact of a potentially flaky CDN."),(0,o.kt)("p",null,"Options:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Load from ",(0,o.kt)("inlineCode",{parentName:"li"},"node_modules/@loaders.gl/<module>/dist/libs/...")),(0,o.kt)("li",{parentName:"ul"},"Load from a modules directory ",(0,o.kt)("inlineCode",{parentName:"li"},"libs/...")),(0,o.kt)("li",{parentName:"ul"},"Load from unique locations - ",(0,o.kt)("inlineCode",{parentName:"li"},"options.modules[<dependency name>]")," can be set to url strings.")),(0,o.kt)("h3",{id:"bundling-dependencies"},"Bundling Dependencies"),(0,o.kt)("p",null,"It is also possible to include dependencies in your application bundle"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"PRO: Doesn't require copying/configuring/serving supporting modules."),(0,o.kt)("li",{parentName:"ul"},"CON: Increases the size of your application bundle")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"options.modules")," will let your application ",(0,o.kt)("inlineCode",{parentName:"p"},"import")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"require")," dependencies (thus bundling them) and supply them to loaders.gl."),(0,o.kt)("p",null,"See each loader module for information on its dependencies."),(0,o.kt)("p",null,"Example: bundling the entire ",(0,o.kt)("inlineCode",{parentName:"p"},"draco3d")," library:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import draco from 'draco3d';\nimport {setLoaderOptions} from '@loaders.gl/core';\nsetLoaderOptions({\n  modules: {\n    draco3d\n  }\n});\n")))}u.isMDXComponent=!0}}]);