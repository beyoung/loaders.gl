"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[2646],{3905:(t,e,a)=>{a.d(e,{Zo:()=>m,kt:()=>c});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var d=n.createContext({}),p=function(t){var e=n.useContext(d),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},m=function(t){var e=p(t.components);return n.createElement(d.Provider,{value:e},t.children)},s="mdxType",k={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},u=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,d=t.parentName,m=o(t,["components","mdxType","originalType","parentName"]),s=p(a),u=r,c=s["".concat(d,".").concat(u)]||s[u]||k[u]||l;return a?n.createElement(c,i(i({ref:e},m),{},{components:a})):n.createElement(c,i({ref:e},m))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=u;var o={};for(var d in e)hasOwnProperty.call(e,d)&&(o[d]=e[d]);o.originalType=t,o[s]="string"==typeof t?t:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},58186:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>d,contentTitle:()=>i,default:()=>k,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const l={},i="I3SLoader",o={unversionedId:"modules/i3s/api-reference/i3s-loader",id:"modules/i3s/api-reference/i3s-loader",title:"I3SLoader",description:"A loader for loading an Indexed 3d Scene (I3S) layer, and its geometries and textures data.",source:"@site/../docs/modules/i3s/api-reference/i3s-loader.md",sourceDirName:"modules/i3s/api-reference",slug:"/modules/i3s/api-reference/i3s-loader",permalink:"/docs/modules/i3s/api-reference/i3s-loader",draft:!1,editUrl:"https://github.com/visgl/loaders.gl/tree/master/website/../docs/modules/i3s/api-reference/i3s-loader.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"GLBWriter",permalink:"/docs/modules/gltf/api-reference/glb-writer"},next:{title:"ImageLoader",permalink:"/docs/modules/images/api-reference/image-loader"}},d={},p=[{value:"I3S Layer type support",id:"i3s-layer-type-support",level:2},{value:"I3S Aspects support",id:"i3s-aspects-support",level:2},{value:"Texture formats",id:"texture-formats",level:2},{value:"Terms",id:"terms",level:2},{value:"Usage",id:"usage",level:2},{value:"Options",id:"options",level:2},{value:"Data formats",id:"data-formats",level:2},{value:"Tileset Object",id:"tileset-object",level:3},{value:"Tile Object",id:"tile-object",level:3},{value:"Tile Content",id:"tile-content",level:3}],m={toc:p},s="wrapper";function k(t){let{components:e,...a}=t;return(0,r.kt)(s,(0,n.Z)({},m,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"i3sloader"},"I3SLoader"),(0,r.kt)("p",{class:"badges"},(0,r.kt)("img",{src:"https://img.shields.io/badge/From-v2.1-blue.svg?style=flat-square",alt:"From-v2.1"})),(0,r.kt)("p",null,"A loader for loading an ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Esri/i3s-spec"},"Indexed 3d Scene (I3S) layer"),", and its geometries and textures data."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Loader"),(0,r.kt)("th",{parentName:"tr",align:null},"Characteristic"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"File Format"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec"},"I3S Layer"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"File Type"),(0,r.kt)("td",{parentName:"tr",align:null},"Json, Binary")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"File Extension"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},".json")," (layer), ",(0,r.kt)("inlineCode",{parentName:"td"},".bin")," (geometries)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"File Format"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://www.opengeospatial.org/standards/i3s"},"i3s"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Data Format"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#data-formats"},"Data formats"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Supported APIs"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"load"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"parse"))))),(0,r.kt)("h2",{id:"i3s-layer-type-support"},"I3S Layer type support"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Layer Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Supported"),(0,r.kt)("th",{parentName:"tr",align:null},"I3S Spec Link"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3DObject"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.7/3Dobject_ReadMe.md"},"https://github.com/Esri/i3s-spec/blob/master/docs/1.7/3Dobject_ReadMe.md"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Integrated Mesh"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.7/IntegratedMesh_ReadMe.md"},"https://github.com/Esri/i3s-spec/blob/master/docs/1.7/IntegratedMesh_ReadMe.md"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Points"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.7/Point_ReadMe.md"},"https://github.com/Esri/i3s-spec/blob/master/docs/1.7/Point_ReadMe.md"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PointClouds"),(0,r.kt)("td",{parentName:"tr",align:null},"no"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/2.0/pcsl_ReadMe.md"},"https://github.com/Esri/i3s-spec/blob/master/docs/2.0/pcsl_ReadMe.md"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Building Scene Layer"),(0,r.kt)("td",{parentName:"tr",align:null},"experimental"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/BSL_ReadMe.md"},"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/BSL_ReadMe.md"))))),(0,r.kt)("h2",{id:"i3s-aspects-support"},"I3S Aspects support"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Aspect"),(0,r.kt)("th",{parentName:"tr",align:null},"Supported"),(0,r.kt)("th",{parentName:"tr",align:null},"I3S Spec Link"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Node pages"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/nodePage.cmn.md"},"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/nodePage.cmn.md"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Compressed attributes"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/compressedAttributes.cmn.md"},"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/compressedAttributes.cmn.md"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PBR materials"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/pbrMetallicRoughness.cmn.md"},"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/pbrMetallicRoughness.cmn.md"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Feature attributes"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/attributeStorageInfo.cmn.md"},"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/attributeStorageInfo.cmn.md"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Texture Atlas"),(0,r.kt)("td",{parentName:"tr",align:null},"yes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/texture.cmn.md#atlas-usage-and-regions"},"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/texture.cmn.md#atlas-usage-and-regions"))))),(0,r.kt)("h2",{id:"texture-formats"},"Texture formats"),(0,r.kt)("p",null,"I3S textures specification - ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/texture.cmn.md"},"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/texture.cmn.md")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Texture"),(0,r.kt)("th",{parentName:"tr",align:null},"Supported"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"JPEG"),(0,r.kt)("td",{parentName:"tr",align:null},"yes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PNG"),(0,r.kt)("td",{parentName:"tr",align:null},"yes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},".dds with DXT1 (no alpha)"),(0,r.kt)("td",{parentName:"tr",align:null},"yes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},".dds with DXT5 (alpha channel)"),(0,r.kt)("td",{parentName:"tr",align:null},"yes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ktx-etc2"),(0,r.kt)("td",{parentName:"tr",align:null},"not tested")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Basis Universal Texture format in Khronos KTX2"),(0,r.kt)("td",{parentName:"tr",align:null},"yes")))),(0,r.kt)("h2",{id:"terms"},"Terms"),(0,r.kt)("p",null,"The terms and concepts used in ",(0,r.kt)("inlineCode",{parentName:"p"},"i3s")," module have the corresponding parts ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Esri/i3s-spec/blob/master/format/Indexed%203d%20Scene%20Layer%20Format%20Specification.md"},"I3S Spec"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tileset"),": I3S Indexed 3D Layer File."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tile"),": I3S node file."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tileContent"),": I3S node content: geometries, textures, etc.")),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"As an I3S tileset contains multiple file formats, ",(0,r.kt)("inlineCode",{parentName:"p"},"I3SLoader")," is needed to be explicitly specified when using ",(0,r.kt)("a",{parentName:"p",href:"https://loaders.gl/modules/core/docs/api-reference/load"},(0,r.kt)("inlineCode",{parentName:"a"},"load"))," function."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Load I3S tileset and render with ",(0,r.kt)("a",{parentName:"strong",href:"https://deck.gl/#/"},"deck.gl"))),(0,r.kt)("p",null,"A simple react app uses ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/visgl/loaders.gl/blob/master/modules/i3s/src/i3s-loader.ts"},(0,r.kt)("inlineCode",{parentName:"a"},"I3SLoader"))," to load ",(0,r.kt)("a",{parentName:"p",href:"https://www.arcgis.com/home/item.html?id=d3344ba99c3f4efaa909ccfbcc052ed5"},"San Francisco Buildings"),", render with ",(0,r.kt)("a",{parentName:"p",href:"https://deck.gl/"},"deck.gl's")," ",(0,r.kt)("a",{parentName:"p",href:"https://deck.gl/docs/api-reference/geo-layers/tile-3d-layer"},(0,r.kt)("inlineCode",{parentName:"a"},"Tile3Dlayer"))," and dynamically load/unload tiles based on current viewport and adjust the level of details when zooming in and out."),(0,r.kt)("table",{style:{border:0,align:"center"}},(0,r.kt)("tbody",null,(0,r.kt)("img",{style:{maxHeight:200},src:"https://raw.github.com/visgl/deck.gl-data/master/images/whats-new/esri-i3s.gif"}))),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://codepen.io/belom88/pen/JjamLvx"},"Example Codepen")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import React, {Component} from 'react';\n\nimport {StaticMap} from 'react-map-gl';\nimport DeckGL from '@deck.gl/react';\nimport {MapController} from '@deck.gl/core';\nimport {Tile3DLayer} from '@deck.gl/geo-layers';\nimport {I3SLoader} from '@loaders.gl/i3s';\n\n// How to get mapbox token https://docs.mapbox.com/help/how-mapbox-works/access-tokens/\nconst MAPBOX_TOKEN = ''; // add your Mapbox token here\n\nconst INITIAL_VIEW_STATE = {\n  longitude: -120,\n  latitude: 34,\n  height: 600,\n  width: 800,\n  pitch: 45,\n  maxPitch: 85,\n  bearing: 0,\n  minZoom: 2,\n  maxZoom: 30,\n  zoom: 14.5\n};\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {viewState: INITIAL_VIEW_STATE};\n  }\n\n  _onTilesetLoad(tileset) {\n    // update viewport to the tileset center\n    const {zoom, cartographicCenter} = tileset;\n    const [longitude, latitude] = cartographicCenter;\n\n    const viewState = {\n      ...this.state.viewState,\n      zoom: zoom + 2.5,\n      longitude,\n      latitude\n    };\n\n    this.setState({viewState});\n  }\n\n  render() {\n    const {viewState} = this.state;\n\n    // construct Tile3DLayer to render I3S tileset\n    const layer = new Tile3DLayer({\n      id: 'tile-3d-layer',\n      // Tileset entry point: Indexed 3D layer file url\n      data: 'https://tiles.arcgis.com/tiles/z2tnIkrLQ2BRzr6P/arcgis/rest/services/SanFrancisco_Bldgs/SceneServer/layers/0',\n      loader: I3SLoader,\n      onTilesetLoad: this._onTilesetLoad.bind(this)\n    });\n\n    return (\n      <DeckGL\n        layers={[layer]}\n        viewState={viewState}\n        controller={{type: MapController}}\n        onViewStateChange={({viewState}) => {\n          // update viewState when interacting with map\n          this.setState({viewState});\n        }}\n      >\n        <StaticMap\n          mapStyle={'mapbox://styles/mapbox/dark-v9'}\n          mapboxApiAccessToken={MAPBOX_TOKEN}\n          preventStyleDiffing\n        />\n      </DeckGL>\n    );\n  }\n}\n")),(0,r.kt)("p",null,"A more complex example can be found ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/visgl/loaders.gl/tree/master/examples/website/i3s"},"here"),", checkout website ",(0,r.kt)("a",{parentName:"p",href:"https://loaders.gl/examples/i3s"},"example"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Basic API Usage")),(0,r.kt)("p",null,"Basic API usage is illustrated in the following snippet. Create a ",(0,r.kt)("inlineCode",{parentName:"p"},"Tileset3D")," instance, point it a valid tileset URL, set up callbacks, and keep feeding in new camera positions:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import {load} from '@loaders.gl/core';\nimport {I3SLoader} from '@loaders.gl/i3s';\nimport {Tileset3D} from '@loaders.gl/tiles';\nimport {WebMercatorViewport} from '@deck.gl/core';\n\nconst tileseturl =\n  'https://tiles.arcgis.com/tiles/z2tnIkrLQ2BRzr6P/arcgis/rest/services/SanFrancisco_Bldgs/SceneServer/layers/0';\n\nconst tileset = await load(tileseturl, I3SLoader);\n\nconst tileset3d = new Tileset3D(tilesetJson, {\n  onTileLoad: tile => console.log(tile)\n});\n\n// initial viewport\n// viewport should be deck.gl WebMercatorViewport instance\nconst viewport = new WebMercatorViewport({latitude, longitude, zoom, ...})\ntileset3d.update(viewport);\n\n// Viewport changes (pan zoom etc)\ntileset3d.update(viewport);\n\n// Visible tiles\nconst visibleTiles = tileset3d.tiles.filter(tile => tile.selected);\n\n// Note that visibleTiles will likely not immediately include all tiles\n// tiles will keep loading and file `onTileLoad` callbacks\n")),(0,r.kt)("h2",{id:"options"},"Options"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"options.i3s.isTileset")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Bool")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"auto")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"auto")),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to load ",(0,r.kt)("inlineCode",{parentName:"td"},"Tileset")," (Layer 3D Index) file. If ",(0,r.kt)("inlineCode",{parentName:"td"},"auto"),", will decide if follow ",(0,r.kt)("inlineCode",{parentName:"td"},"ArcGIS")," tile layers' url convention")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"options.i3s.isTileHeader")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Bool")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"auto")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"auto")),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to load ",(0,r.kt)("inlineCode",{parentName:"td"},"TileHeader"),"(node) file. If ",(0,r.kt)("inlineCode",{parentName:"td"},"auto"),", will decide if follow ",(0,r.kt)("inlineCode",{parentName:"td"},"argis")," url convention")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"options.i3s.loadContent")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Bool")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true")),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to load tile content (geometries, texture, etc.). Note: I3S dataset, each tile node has separate urls pointing to tile metadata and its actual tile payload. If ",(0,r.kt)("inlineCode",{parentName:"td"},"loadContent")," is true, i3s loader will make a request to fetch the content fiile and decoded to the format as specified in ",(0,r.kt)("a",{parentName:"td",href:"#tile-object"},"Tile Object"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"options.i3s.token")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"null")),(0,r.kt)("td",{parentName:"tr",align:null},"Authorization token for the layer")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"options.i3s.tileset")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"null")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Tileset")," object loaded by I3SLoader or follow the data format specified in ",(0,r.kt)("a",{parentName:"td",href:"#tileset-object"},"Tileset Object"),". It is required when loading i3s geometry content")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"options.i3s.tile")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"null")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Tile")," object loaded by I3SLoader or follow the data format ",(0,r.kt)("a",{parentName:"td",href:"#tile-object"},"Tile Object"),". It is required when loading i3s geometry content")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"options.i3s.useDracoGeometry")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Bool")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true")),(0,r.kt)("td",{parentName:"tr",align:null},"Use 'Draco' compressed geometry to show if applicable")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"options.i3s.useCompressedTextures")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Bool")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true")),(0,r.kt)("td",{parentName:"tr",align:null},'Use "Compressed textures" (',(0,r.kt)("em",{parentName:"td"},".dds or "),".ktx) if available and supported by GPU")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"options.i3s.decodeTextures")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Bool")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true")),(0,r.kt)("td",{parentName:"tr",align:null},"Decode texture image to ImageBitmap or compressed texture object (if supported by GPU)")))),(0,r.kt)("h2",{id:"data-formats"},"Data formats"),(0,r.kt)("p",null,"Loaded data conforms to the 3D Tiles loader category specification with the following exceptions."),(0,r.kt)("h3",{id:"tileset-object"},"Tileset Object"),(0,r.kt)("p",null,"The following fields are guaranteed. Additionally, the loaded tileset object will contain all the data fetched from the provided url."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Contents"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"type")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Value is ",(0,r.kt)("inlineCode",{parentName:"td"},"i3s"),". Indicates the returned object is an ",(0,r.kt)("inlineCode",{parentName:"td"},"i3s")," tileset.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lodMetricType")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Root's level of detail (LoD) metric type, which is used to decide if a tile is sufficient for current viewport. Only support ",(0,r.kt)("inlineCode",{parentName:"td"},"maxScreenThreshold")," for now. Check I3S ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/lodSelection.cmn.md"},"lodSelection")," for more details.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lodMetricValue")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Number")),(0,r.kt)("td",{parentName:"tr",align:null},"Root's level of detail (LoD) metric value.")))),(0,r.kt)("h3",{id:"tile-object"},"Tile Object"),(0,r.kt)("p",null,"The following fields are guaranteed. Additionally, the loaded tile object will contain all the data fetched from the provided url."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Contents"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Identifier of the tile, unique in a tileset")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"refine")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Refinement type of the tile, currently only support ",(0,r.kt)("inlineCode",{parentName:"td"},"REPLACE"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"type")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Type of the tile, value is ",(0,r.kt)("inlineCode",{parentName:"td"},"mesh")," (currently only support ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec"},"I3S MeshPyramids"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"url")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The url of this tile.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"contentUrl")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The url of this tile.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"featureUrl")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The url of this tile.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"textureUrl")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The url of this tile.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"boundingVolume")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"A bounding volume in Cartesian coordinates converted from i3s node's ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/format/Indexed%203d%20Scene%20Layer%20Format%20Specification.md"},(0,r.kt)("inlineCode",{parentName:"a"},"mbs"))," that encloses a tile or its content. Exactly one box, region, or sphere property is required.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lodMetricType")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Level of Detail (LoD) metric type, which is used to decide if a tile is sufficient for current viewport. Only support ",(0,r.kt)("inlineCode",{parentName:"td"},"maxScreenThreshold")," for now. Check I3S ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/Esri/i3s-spec/blob/master/docs/1.8/lodSelection.cmn.md"},"lodSelection")," for more details.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lodMetricValue")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Level of Detail (LoD) metric value.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"content")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"The actual payload of the tile or the url point to the actual payload. If ",(0,r.kt)("inlineCode",{parentName:"td"},"option.loadContent")," is enabled, content will be populated with the loaded value following the Tile Content section")))),(0,r.kt)("h3",{id:"tile-content"},"Tile Content"),(0,r.kt)("p",null,"After content is loaded, the following fields are guaranteed. But different tiles may have different extra content fields."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Contents"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"cartesianOrigin")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Number[3]")),(0,r.kt)("td",{parentName:"tr",align:null},'"Center" of tile geometry in WGS84 fixed frame coordinates')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"cartographicOrigin")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Number[3]")),(0,r.kt)("td",{parentName:"tr",align:null},'"Origin" in lng/lat (center of tile\'s bounding volume)')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"modelMatrix")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Number[16]")),(0,r.kt)("td",{parentName:"tr",align:null},"Transforms tile geometry positions to fixed frame coordinates")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"vertexCount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Number")),(0,r.kt)("td",{parentName:"tr",align:null},"Transforms tile geometry positions to fixed frame coordinates")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"attributes")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"Each attribute follows luma.gl ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/visgl/luma.gl/blob/master/docs/api-reference/webgl/README.md"},"accessor")," properties")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"texture")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"Loaded texture by ",(0,r.kt)("a",{parentName:"td",href:"https://loaders.gl/modules/images/docs/api-reference/image-loader"},(0,r.kt)("inlineCode",{parentName:"a"},"loaders.gl/image")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"featureData")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")),(0,r.kt)("td",{parentName:"tr",align:null},"Loaded feature data for parsing the geometies (Will be deprecated in 2.x)")))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"attributes")," contains following fields"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Contents"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"attributes.positions")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{value, type, size, normalized}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"attributes.normals")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{value, type, size, normalized}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"attributes.colors")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{value, type, size, normalized}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"attributes.texCoords")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Object")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{value, type, size, normalized}"))))))}k.isMDXComponent=!0}}]);