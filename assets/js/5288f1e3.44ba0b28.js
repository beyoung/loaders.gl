"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[4507],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(a),f=r,m=c["".concat(s,".").concat(f)]||c[f]||u[f]||i;return a?n.createElement(m,o(o({ref:t},d),{},{components:a})):n.createElement(m,o({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=f;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}f.displayName="MDXCreateElement"},77363:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={},o="Preferred JavaScript APIs",l={unversionedId:"developer-guide/concepts/javascript-apis",id:"developer-guide/concepts/javascript-apis",title:"Preferred JavaScript APIs",description:"loaders.gl supports input and output of data from JavaScript/TypeScript programs. To do this it is necessary to use platform APIs for",source:"@site/../docs/developer-guide/concepts/javascript-apis.md",sourceDirName:"developer-guide/concepts",slug:"/developer-guide/concepts/javascript-apis",permalink:"/docs/developer-guide/concepts/javascript-apis",draft:!1,editUrl:"https://github.com/visgl/loaders.gl/tree/master/website/../docs/developer-guide/concepts/javascript-apis.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Development Environment",permalink:"/docs/developer-guide/dev-env"},next:{title:"Binary Data",permalink:"/docs/developer-guide/concepts/binary-data"}},s={},p=[{value:"Loading data with <code>fetch()</code>",id:"loading-data-with-fetch",level:2},{value:"Local file access",id:"local-file-access",level:2},{value:"Saving data",id:"saving-data",level:2},{value:"Binary data APIs",id:"binary-data-apis",level:2},{value:"Image APIs",id:"image-apis",level:2}],d={toc:p},c="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"preferred-javascript-apis"},"Preferred JavaScript APIs"),(0,r.kt)("p",null,"loaders.gl supports input and output of data from JavaScript/TypeScript programs. To do this it is necessary to use platform APIs for "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"loading data from files and URLs"),(0,r.kt)("li",{parentName:"ul"},"writing data to files"),(0,r.kt)("li",{parentName:"ul"},"manipulating binary data"),(0,r.kt)("li",{parentName:"ul"},"parsing images"),(0,r.kt)("li",{parentName:"ul"},"etc")),(0,r.kt)("p",null,"Over the years, a number of different JavaScript APIs have emerged. Depending on the version of JavaScript supported by a browser or the version of Node.js being used. In addition, the set of available APIs move "),(0,r.kt)("h2",{id:"loading-data-with-fetch"},"Loading data with ",(0,r.kt)("inlineCode",{parentName:"h2"},"fetch()")),(0,r.kt)("p",null,"loaders.gl standardizes on the ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()")," API. The result of a ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch")," operation is a ",(0,r.kt)("inlineCode",{parentName:"p"},"Response")," object which can be passed to many loaders.gl functions, meaning that the application can call ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()")," itself to fully control the requests."),(0,r.kt)("admonition",{title:"rmation",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()")," API emerged in browsers, but is now also supported natively on Node, starting with Node.js v18.\nFor older Node.js versions, ",(0,r.kt)("inlineCode",{parentName:"p"},"@loaders.gl/polyfills")," installs polyfills of ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Response")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Headers")," classes.")),(0,r.kt)("h2",{id:"local-file-access"},"Local file access"),(0,r.kt)("p",null,"loaders.gl offers a ",(0,r.kt)("inlineCode",{parentName:"p"},"FileSystem"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"ReadableFile")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"WritableFile")," interfaces, and various implementations of these."),(0,r.kt)("p",null,"For local file access in the browser, the ",(0,r.kt)("inlineCode",{parentName:"p"},"File")," class (a derivate of ",(0,r.kt)("inlineCode",{parentName:"p"},"Blob"),", see below) is the tool of choice.\nIt is not clear if a counterpart to the ",(0,r.kt)("inlineCode",{parentName:"p"},"File")," class will eventually be supported by Node.js. "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note that reading local files in the browser has limitations. Actual file paths are obscured and files can only be created as a result of an interactive file selection or file drop action by the user.")),(0,r.kt)("h2",{id:"saving-data"},"Saving data"),(0,r.kt)("p",null,"Saving data from a browser is either done by POST requests to a server, or via local downloads. "),(0,r.kt)("h2",{id:"binary-data-apis"},"Binary data APIs"),(0,r.kt)("p",null,"The choice of binary data API in JavaScript usually comes down to either using Node.js ",(0,r.kt)("inlineCode",{parentName:"p"},"Buffer")," class or a combination of ",(0,r.kt)("inlineCode",{parentName:"p"},"ArrayBuffer"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"TextEncoder"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"TextDecoder")," classes."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Buffer")," class in Node.js is not supported by browsers. Polyfills are available, but they can add considerable size (~50KB) to an application, and can cause small but frustrating bundling issues. "),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Therefore loaders.gl tries to avoid use of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Buffer")," class in its core libraries and loaders, preferring to use ",(0,r.kt)("inlineCode",{parentName:"p"},"ArrayBuffer"),", typed arrays and ",(0,r.kt)("inlineCode",{parentName:"p"},"Blob"),"s.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Blob")," (and ",(0,r.kt)("inlineCode",{parentName:"p"},"File"),") classes in the browser have some unique advantages. They leverage an efficient blob storage mechanism in the browser, and they also enable partial, random-access reads from large blobs in that storage or from local files. ",(0,r.kt)("inlineCode",{parentName:"p"},"Blob"),"s are available in Node starting with Node.js v18. For lower versions, a polyfill will be installed by ",(0,r.kt)("inlineCode",{parentName:"p"},"@laoders.gl/polyfills"),"."),(0,r.kt)("h2",{id:"image-apis"},"Image APIs"),(0,r.kt)("p",null,"The preferred image platform API is the ",(0,r.kt)("inlineCode",{parentName:"p"},"ImageBitmap"),". It is currently only supported on modern browsers, not in Node.js. "),(0,r.kt)("p",null,"At this stage loaders.gl does not provide an ImageBitmap polyfill, and it is not clear if future versions of Node.js would support something similar natively."))}u.isMDXComponent=!0}}]);