"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[8878],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>g});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),d=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=d(e.components);return a.createElement(p.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),m=d(n),c=r,g=m["".concat(p,".").concat(c)]||m[c]||u[c]||i;return n?a.createElement(g,l(l({ref:t},s),{},{components:n})):a.createElement(g,l({ref:t},s))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=c;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[m]="string"==typeof e?e:r,l[1]=o;for(var d=2;d<i;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},90273:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var a=n(83117),r=(n(67294),n(3905));const i={},l="GeoJSONTiler",o={unversionedId:"modules/mvt/api-reference/geojson-tiler",id:"modules/mvt/api-reference/geojson-tiler",title:"GeoJSONTiler",description:"The GeoJSONTiler slices large GeoJSON data into small vector tiles on the fly.",source:"@site/../docs/modules/mvt/api-reference/geojson-tiler.md",sourceDirName:"modules/mvt/api-reference",slug:"/modules/mvt/api-reference/geojson-tiler",permalink:"/docs/modules/mvt/api-reference/geojson-tiler",draft:!1,editUrl:"https://github.com/uber-web/loaders.gl/tree/master/website/../docs/modules/mvt/api-reference/geojson-tiler.md",tags:[],version:"current",frontMatter:{}},p={},d=[{value:"Install",id:"install",level:3},{value:"Usage",id:"usage",level:3},{value:"Options",id:"options",level:3},{value:"Attribution",id:"attribution",level:2}],s={toc:d},m="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"geojsontiler"},"GeoJSONTiler"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"GeoJSONTiler")," slices large GeoJSON data into small vector tiles on the fly."),(0,r.kt)("p",null,"The primary intended use case is to enable rendering and interacting with large geospatial datasets\nin the browser (without requiring data to be pre-tiled and tiles to be served from a server)."),(0,r.kt)("p",null,"The resulting tiles conform to the JSON output of the ",(0,r.kt)("a",{parentName:"p",href:"./mvt-loader"},(0,r.kt)("inlineCode",{parentName:"a"},"MVTLoader")),"\n(which loads pre-tiled tiles in the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mapbox/vector-tile-spec/"},"vector tile specification"),"\ninto GeoJSON format)."),(0,r.kt)("p",null,"To make data rendering and interaction fast, the GeoJSON content in the generated tiles\nis not only cut out from the larger input GeoJSON. It are also optimized further to only\nretain the minimum level of detail appropriate for each zoom level\n(shapes are simplified and tiny polygons and line segments are filtered out)."),(0,r.kt)("h3",{id:"install"},"Install"),(0,r.kt)("p",null,"Install using NPM (",(0,r.kt)("inlineCode",{parentName:"p"},"npm install @loaders.gl/mvt"),") or Yarn (",(0,r.kt)("inlineCode",{parentName:"p"},"yarn install @loaders.gl/mvt"),")."),(0,r.kt)("p",null,"TBD - Or use a browser build directly:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://unpkg.com/@loaders.gl/mvt/dist.min.js"><\/script>\n')),(0,r.kt)("h3",{id:"usage"},"Usage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import {GeoJSONTiler} from '@loaders.gl/mvt';\n\n// build an initial index of tiles\nconst tileSource = new GeoJSONTiler(geoJSON);\n\n// request a particular tile\nconst features = tileSource.getTile(z, x, y).features;\n\n// show an array of tile coordinates created so far\nconsole.log(tileSource.tileCoords); // [{z: 0, x: 0, y: 0}, ...]\n")),(0,r.kt)("h3",{id:"options"},"Options"),(0,r.kt)("p",null,"You can fine-tune the results with an options object,\nalthough the defaults are sensible and work well for most use cases."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"indexMaxZoom")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"5")),(0,r.kt)("td",{parentName:"tr",align:null},"Max zoom in the initial tile index")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"indexMaxPoints")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"100000")),(0,r.kt)("td",{parentName:"tr",align:null},"Max number of points per tile in the index")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"maxZoom")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"14")),(0,r.kt)("td",{parentName:"tr",align:null},"Max zoom to preserve detail on; can't be higher than 24")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tolerance")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"3")),(0,r.kt)("td",{parentName:"tr",align:null},"Simplification tolerance (higher means simpler)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"extent")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"4096")),(0,r.kt)("td",{parentName:"tr",align:null},"tile extent (both width and height)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"buffer")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"64")),(0,r.kt)("td",{parentName:"tr",align:null},"Tile buffer on each side")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"promoteId")),(0,r.kt)("td",{parentName:"tr",align:null},"N/A"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of a feature property to use for feature.id.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"generateId")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to generate feature ids.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"debug")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"0")),(0,r.kt)("td",{parentName:"tr",align:null},"Logging level (0 to disable, 1 or 2)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lineMetrics")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null},"Enable line metrics tracking for LineString/MultiLineString features")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import {GeoJSONTiler} from '@loaders.gl/mvt`\nconst tileSource = new GeoJSONTiler(parsedGeojson, {\n    indexMaxZoom: 5,  // max zoom in the initial tile index\n    maxZoom: 14,      // max zoom to preserve detail on; can't be higher than 24\n    tolerance: 3,     // simplification tolerance (higher means simpler)\n    extent: 4096,     // tile extent (both width and height)\n    buffer: 64,   // tile buffer on each side\n    debug: 0,     // logging level (0 to disable, 1 or 2)\n    lineMetrics: false, // whether to enable line metrics tracking for LineString/MultiLineString features\n    promoteId: null,    // name of a feature property to promote to feature.id. Cannot be used with `generateId`\n    generateId: false,  // whether to generate feature ids. Cannot be used with `promoteId`\n    indexMaxPoints: 100000 // max number of points per tile in the index\n});\n")),(0,r.kt)("p",null,"Remarks:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"GeoJSONTiler only operates on zoom levels up to 24."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"generateId")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"promoteId")," cannot both be specified at the same time."),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"promoteId")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"generateId")," options ignore existing ",(0,r.kt)("inlineCode",{parentName:"li"},"id")," values on the feature objects."),(0,r.kt)("li",{parentName:"ul"},"By default, tiles at zoom levels above ",(0,r.kt)("inlineCode",{parentName:"li"},"indexMaxZoom")," are generated on the fly, but you can pre-generate all possible tiles for ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," by setting ",(0,r.kt)("inlineCode",{parentName:"li"},"indexMaxZoom")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"maxZoom")," to the same value, setting ",(0,r.kt)("inlineCode",{parentName:"li"},"indexMaxPoints")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"0"),", and then accessing the resulting tile coordinates from the ",(0,r.kt)("inlineCode",{parentName:"li"},"tileCoords")," property of ",(0,r.kt)("inlineCode",{parentName:"li"},"tileSource"),".")),(0,r.kt)("h2",{id:"attribution"},"Attribution"),(0,r.kt)("p",null,"This class is a fork of Mapbox / Vladimir Agafonkin's wonderful ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mapbox/geojson-vt"},"geojson-vt")," module."),(0,r.kt)("p",null,"This directory is forked from Mapbox's ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mapbox/geojson-vt"},"https://github.com/mapbox/geojson-vt")," under ISC License."))}u.isMDXComponent=!0}}]);