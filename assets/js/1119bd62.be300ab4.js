(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[7049],{96706:(e,t,r)=>{"use strict";r.d(t,{Y:()=>c});var n=r(96013),a=r(49125),s=r(96040);const o="3.3.2",i={};async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t&&(e=function(e,t,r){if(e.startsWith("http"))return e;const a=r.modules||{};if(a[e])return a[e];if(!n.jU)return"modules/".concat(t,"/dist/libs/").concat(e);if(r.CDN)return(0,s.h)(r.CDN.startsWith("http")),"".concat(r.CDN,"/").concat(t,"@").concat(o,"/dist/libs/").concat(e);if(n.hJ)return"../src/libs/".concat(e);return"modules/".concat(t,"/src/libs/").concat(e)}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})),i[e]=i[e]||async function(e){if(e.endsWith("wasm")){const t=await fetch(e);return await t.arrayBuffer()}if(!n.jU)try{return a&&a.requireFromFile&&await a.requireFromFile(e)}catch{return null}if(n.hJ)return importScripts(e);const t=await fetch(e);return function(e,t){if(!n.jU)return a.requireFromString&&a.requireFromString(e,t);if(n.hJ)return eval.call(n.CO,e),null;const r=document.createElement("script");r.id=t;try{r.appendChild(document.createTextNode(e))}catch(s){r.text=e}return document.body.appendChild(r),null}(await t.text(),e)}(e),await i[e]}},96280:(e,t,r)=>{"use strict";r.r(t),r.d(t,{assets:()=>ke,contentTitle:()=>Ke,default:()=>ze,frontMatter:()=>Ne,metadata:()=>Fe,toc:()=>Ve});var n=r(83117),a=r(67294),s=r(3905),o=(r(73935),r(1418)),i=r(75433);const c=[{formatName:"Standard Image Formats",description:"Non-texture image formats. Compact on disk, but need to be fully decompressed into GPU texture memory, and mipmaps need to be generated by client.",codeSample:"load(url, ImageLoader)",images:[{format:"JPG",src:"shannon.jpg"},{format:"GIF",src:"shannon.gif"},{format:"PNG",src:"shannon.png"},{format:"BMP",src:"shannon.bmp"},{format:"WEBP",src:"shannon.webp"},{format:"AVIF",src:"shannon.avif"}]},{formatName:"Basis Universal",description:"Supercompressed GPU Texture Codec",link:"https://github.com/BinomialLLC/basis_universal",codeSample:"load(url, BasisLoader)",images:[{format:"BASIS",src:"alpha3.basis"},{format:"BASIS",src:"kodim01.basis"},{format:"BASIS",src:"kodim18.basis"},{format:"BASIS",src:"kodim20_1024x1024.basis"},{format:"BASIS",src:"kodim20.basis"}]},{formatName:"KTX",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"DXT1",src:"shannon-dxt1.ktx2"},{format:"DXT3",src:"shannon-dxt3.ktx2"},{format:"DXT5",src:"shannon-dxt5.ktx2"}]},{formatName:"KTX2",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"KTX2",src:"kodim23.ktx2",useBasis:!0}]},{formatName:"DDS: S3 Texture Compression (WEBGL_compressed_texture_s3tc)",description:"S3 (aka DXTn, DXTC, or BCn).",availability:"Common on desktop GPUs. DXT5 is usually the preferred version",link:"https://en.wikipedia.org/wiki/S3_Texture_Compression",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"DXT5",src:"shannon-dxt5.dds"},{format:"DXT3",src:"shannon-dxt3.dds"},{format:"DXT1",src:"shannon-dxt1.dds"}]},{formatName:"PVR: PowerVR Texture Compression (WEBGL_compressed_texture_pvrtc)",description:"Lossy, fixed-rate GPU texture compression format",availability:"iPhone, iPad and mobile devices with PowerVR chipsets.",link:"https://en.wikipedia.org/wiki/PVRTC",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"PVRTC (2BPP RGB)",src:"shannon-pvrtc-2bpp-rgb.pvr"},{format:"PVRTC (2BPP RGBA)",src:"shannon-pvrtc-2bpp-rgba.pvr"},{format:"PVRTC (4BPP RGB)",src:"shannon-pvrtc-4bpp-rgb.pvr"},{format:"PVRTC (2BPP RGBA)",src:"shannon-pvrtc-4bpp-rgba.pvr"}]},{formatName:"PVR: ATC (WEBGL_compressed_texture_atc)",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"ATC (RGB)",src:"shannon-atc-rgb.dds"},{format:"ATC (RGBA, Explicit)",src:"shannon-atc-rgba-explicit.dds"},{format:"ATC (RGBA, Interpolated)",src:"shannon-atc-rgba-interpolated.dds"}]},{formatName:"PVR: ASTC (WEBGL_compressed_texture_astc)",images:[{format:"ASTC 4x4",src:"shannon-astc-4x4.pvr"},{format:"ASTC 5x4",src:"shannon-astc-5x4.pvr"},{format:"ASTC 5x5",src:"shannon-astc-5x5.pvr"},{format:"ASTC 6x5",src:"shannon-astc-6x5.pvr"},{format:"ASTC 6x6",src:"shannon-astc-6x6.pvr"},{format:"ASTC 8x5",src:"shannon-astc-8x5.pvr"},{format:"ASTC 8x6",src:"shannon-astc-8x6.pvr"},{format:"ASTC 8x8",src:"shannon-astc-8x8.pvr"},{format:"ASTC 10x5",src:"shannon-astc-10x5.pvr"},{format:"ASTC 10x6",src:"shannon-astc-10x6.pvr"},{format:"ASTC 10x8",src:"shannon-astc-10x8.pvr"},{format:"ASTC 10x10",src:"shannon-astc-10x10.pvr"},{format:"ASTC 12x10",src:"shannon-astc-12x10.pvr"},{format:"ASTC 12x12",src:"shannon-astc-12x12.pvr"}]},{formatName:"PVR: ASTC (sRGB) (WEBGL_compressed_texture_astc)",images:[{format:"ASTC (sRGB) 4x4",src:"shannon-astc-srgb-4x4.pvr"},{format:"ASTC (sRGB) 5x4",src:"shannon-astc-srgb-5x4.pvr"},{format:"ASTC (sRGB) 5x5",src:"shannon-astc-srgb-5x5.pvr"},{format:"ASTC (sRGB) 6x5",src:"shannon-astc-srgb-6x5.pvr"},{format:"ASTC (sRGB) 6x6",src:"shannon-astc-srgb-6x6.pvr"},{format:"ASTC (sRGB) 8x5",src:"shannon-astc-srgb-8x5.pvr"},{format:"ASTC (sRGB) 8x6",src:"shannon-astc-srgb-8x6.pvr"},{format:"ASTC (sRGB) 8x8",src:"shannon-astc-srgb-8x8.pvr"},{format:"ASTC (sRGB) 10x5",src:"shannon-astc-srgb-10x5.pvr"},{format:"ASTC (sRGB) 10x6",src:"shannon-astc-srgb-10x6.pvr"},{format:"ASTC (sRGB) 10x8",src:"shannon-astc-srgb-10x8.pvr"},{format:"ASTC (sRGB) 10x10",src:"shannon-astc-srgb-10x10.pvr"},{format:"ASTC (sRGB) 12x10",src:"shannon-astc-srgb-12x10.pvr"},{format:"ASTC (sRGB) 12x12",src:"shannon-astc-srgb-12x12.pvr"}]},{formatName:"PVR: ETC1 (WEBGL_compressed_texture_etc1)",images:[{format:"ETC1",src:"shannon-etc1.pvr"}]},{formatName:"Crunch",description:"Advanced DXTn texture compression library.",link:"https://github.com/BinomialLLC/crunch",codeSample:"load(url, CrunchLoader)",images:[{format:"DXT1 (Crunch)",src:"shannon-dxt1.crn"},{format:"DXT5 (Crunch)",src:"shannon-dxt5.crn"}]}];var _=r(19521),l=r(45697),u=r.n(l),E=r(41762),S=r(27785),f=r(19616),R=r(13363);const d={id:"crunch",name:"Crunch",module:"textures",version:r(480).q,worker:!0,extensions:["crn"],mimeTypes:["image/crn","image/x-crn","application/octet-stream"],binary:!0,options:{crunch:{libraryPath:"libs/"}}};var p=r(1715),A=r(72617),m=r(75243),C=r(18150),h=r(6109),T=r(24789),P=r(51621);const{COMPRESSED_RGB_S3TC_DXT1_EXT:D,COMPRESSED_RGBA_S3TC_DXT1_EXT:g,COMPRESSED_RGBA_S3TC_DXT3_EXT:x,COMPRESSED_RGBA_S3TC_DXT5_EXT:y,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:B,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:G,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:M,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:w,COMPRESSED_RGB_ATC_WEBGL:b,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:O,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:H,COMPRESSED_RGB_ETC1_WEBGL:v,COMPRESSED_RGBA_ASTC_4X4_KHR:L,COMPRESSED_RGBA_ASTC_5X4_KHR:X,COMPRESSED_RGBA_ASTC_5X5_KHR:I,COMPRESSED_RGBA_ASTC_6X5_KHR:U,COMPRESSED_RGBA_ASTC_6X6_KHR:N,COMPRESSED_RGBA_ASTC_8X5_KHR:K,COMPRESSED_RGBA_ASTC_8X6_KHR:F,COMPRESSED_RGBA_ASTC_8X8_KHR:k,COMPRESSED_RGBA_ASTC_10X5_KHR:V,COMPRESSED_RGBA_ASTC_10X6_KHR:j,COMPRESSED_RGBA_ASTC_10X8_KHR:W,COMPRESSED_RGBA_ASTC_10X10_KHR:z,COMPRESSED_RGBA_ASTC_12X10_KHR:Z,COMPRESSED_RGBA_ASTC_12X12_KHR:q,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:J,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:Y,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:$,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:Q,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:ee,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:te,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:re,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:ne,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:ae,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:se,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:oe,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:ie,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:ce,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:_e,COMPRESSED_R11_EAC:le,COMPRESSED_SIGNED:ue,COMPRESSED_RG11_EAC:Ee,COMPRESSED_SIGNED_RG11_EAC:Se,COMPRESSED_RGB8_ETC2:fe,COMPRESSED_RGBA8_ETC2_EAC:Re,COMPRESSED_SRGB8_ETC2:de,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:pe,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:Ae,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:me,COMPRESSED_RED_RGTC1_EXT:Ce,COMPRESSED_SIGNED_RED_RGTC1_EXT:he,COMPRESSED_RED_GREEN_RGTC2_EXT:Te,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:Pe,COMPRESSED_SRGB_S3TC_DXT1_EXT:De,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:ge,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:xe,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:ye}=E.p,Be=_.ZP.button.withConfig({displayName:"compressed-texture__TextureButton",componentId:"sc-j0lv3n-0"})(["height:256px;width:256px;border:1px solid black;margin:1em;position:relative;margin-left:0;"]),Ge=_.ZP.h1.withConfig({displayName:"compressed-texture__ImageFormatHeader",componentId:"sc-j0lv3n-1"})(["position:absolute;top:0;left:0;margin:0;color:white;font-size:16px;"]),Me=_.ZP.h1.withConfig({displayName:"compressed-texture__ErrorFormatHeader",componentId:"sc-j0lv3n-2"})(["color:red;font-size:16px;"]),we=_.ZP.ul.withConfig({displayName:"compressed-texture__TextureInfo",componentId:"sc-j0lv3n-3"})(["position:absolute;transition:opacity 0.2s;top:20px;display:flex;flex-flow:column nowrap;align-items:flex-start;padding:10px;opacity:0.8;background-color:black;color:white;border-radius:5px;min-width:200px;list-style:none;font-size:14px;"]);(0,m.fh)([S.Ge,f.Dq,A.S]);const be={canvas:u().object,image:u().object,gl:u().object,program:u().object};class Oe extends a.PureComponent{constructor(e){super(e);const t=this.getLoadOptions();this.state={loadOptions:t,textureError:null,showStats:!1,stats:[],dataUrl:null}}async componentDidMount(){const e=await this.getTextureDataUrl();this.setState({dataUrl:e})}getExtension(e){const{gl:t}=this.props,r=["","WEBKIT_","MOZ_"];let n=null;for(const a in r)if(n=Boolean(t.getExtension(r[a]+e)),n)break;return n}getLoadOptions(){return{basis:{format:(0,R.h)()}}}async getTextureDataUrl(){const{loadOptions:e}=this.state,{canvas:t,gl:r,program:n,image:a}=this.props;try{const{arrayBuffer:t,length:s,src:o,useBasis:i}=await this.getLoadedData(a),c=await(0,C.A)(o,[f.Dq,d,S.Ge,A.S]),_={...e};i&&(_["compressed-texture"]={useBasis:!0});const l=c&&await(0,h.z)(t,c,_);switch(this.addStat("File Size",Math.floor(s/1024),"Kb"),c&&c.id){case"crunch":case"compressed-texture":this.renderEmptyTexture(r,n),this.renderCompressedTexture(r,n,l,c.name,o);break;case"image":this.renderEmptyTexture(r,n),this.renderImageTexture(r,n,l);break;case"basis":const e=l[0];this.renderEmptyTexture(r,n),this.renderCompressedTexture(r,n,e,c.name,o);break;default:throw new Error("Unknown texture loader")}}catch(s){console.error(s),this.renderEmptyTexture(r,n),this.setState({textureError:s.message})}return t.toDataURL()}async getLoadedData(e){let t=null,r=0,n="",a=!1;if(e instanceof File)t=await e.arrayBuffer(),r=e.size,n=e.name;else{n="https://raw.githubusercontent.com/visgl/loaders.gl/master/modules/textures/test/data/"+e.src;const s=await(0,T.d)(n);t=await s.arrayBuffer(),r=t.byteLength,a=e.useBasis||!1}return{arrayBuffer:t,length:r,src:n,useBasis:a}}createCompressedTexture2D(e,t){return new P.Z(e,{data:t,compressed:!0,mipmaps:!1,parameters:{[e.TEXTURE_MAG_FILTER]:e.LINEAR,[e.TEXTURE_MIN_FILTER]:t.length>1?e.LINEAR_MIPMAP_NEAREST:e.LINEAR,[e.TEXTURE_WRAP_S]:e.CLAMP_TO_EDGE,[e.TEXTURE_WRAP_T]:e.CLAMP_TO_EDGE}}).handle}renderEmptyTexture(e,t){const r=new Uint8Array([68,0,0,255]),n=new P.Z(e,{width:1,height:1,data:r,mipmaps:!0,parameters:{[e.TEXTURE_MAG_FILTER]:e.LINEAR,[e.TEXTURE_MIN_FILTER]:e.LINEAR,[e.TEXTURE_WRAP_S]:e.CLAMP_TO_EDGE,[e.TEXTURE_WRAP_T]:e.CLAMP_TO_EDGE}}).handle;e.useProgram(t),e.bindTexture(e.TEXTURE_2D,n),e.drawArrays(e.TRIANGLE_STRIP,0,4)}renderImageTexture(e,t,r){const n=new P.Z(e,{data:r,parameters:{[e.TEXTURE_MAG_FILTER]:e.LINEAR,[e.TEXTURE_MIN_FILTER]:e.LINEAR,[e.TEXTURE_WRAP_S]:e.CLAMP_TO_EDGE,[e.TEXTURE_WRAP_T]:e.CLAMP_TO_EDGE}});e.useProgram(t),e.bindTexture(e.TEXTURE_2D,n.handle);const a=new Date;e.drawArrays(e.TRIANGLE_STRIP,0,4);const s=Date.now()-a;this.addStat("Upload time",Math.floor(s)+" ms"),this.addStat("Dimensions",r.width+" x "+r.height),this.addStat("Size in memory (Lvl 0)",Math.floor(r.width*r.height*4/1024),"Kb")}renderCompressedTexture(e,t,r,n,a){if(!r||!r.length)throw new Error(n+" loader doesn't support texture "+a+" format");const{format:s,width:o,height:i,levelSize:c}=r[0];if(!this.isFormatSupported(s))throw new Error("Texture format "+s+" not supported by this GPU");const _=new Date,l=this.createCompressedTexture2D(e,r);e.bindTexture(e.TEXTURE_2D,l),e.useProgram(t),e.drawArrays(e.TRIANGLE_STRIP,0,4);const u=Date.now()-_;this.addStat("Upload time",Math.floor(u)+" ms"),this.addStat("Dimensions",o+" x "+i),c&&this.addStat("Size in memory (Lvl 0)",Math.floor(c/1024),"Kb")}isFormatSupported(e){if("number"!=typeof e)throw new Error("Invalid internal format of compressed texture");const t=(0,p.U)(this.props.gl);switch(e){case D:case x:case y:case g:return t.has("dxt");case B:case G:case M:case w:return t.has("pvrtc");case b:case O:case H:return t.has("atc");case v:return t.has("etc1");case L:case X:case I:case U:case N:case K:case F:case k:case V:case j:case W:case z:case Z:case q:case J:case Y:case $:case Q:case ee:case te:case re:case ne:case ae:case se:case oe:case ie:case ce:case _e:return t.has("astc");case le:case ue:case Ee:case Se:case fe:case Re:case de:case pe:case Ae:case me:return t.has("etc2");case Ce:case he:case Te:case Pe:return t.has("rgtc");case De:case ge:case xe:case ye:return t.has("dxt-srgb");default:return!1}}addStat(e,t,r){void 0===r&&(r="");const n=[...this.state.stats,{name:e,value:t,units:r}];this.setState({stats:n})}renderStats(){const{stats:e}=this.state;if(!e.length)return null;const t=[];for(let r=0;r<e.length;r++)t.push(a.createElement("li",{key:r},e[r].name+": "+e[r].value+e[r].units));return a.createElement(we,{style:{opacity:this.state.showStats?.8:0}},t)}render(){const{dataUrl:e,textureError:t}=this.state,{format:r,name:n}=this.props.image;return e?a.createElement(Be,{style:{backgroundImage:"url("+e+")"},onMouseEnter:()=>this.setState({showStats:!0}),onMouseLeave:()=>this.setState({showStats:!1})},t?a.createElement(Me,{style:{color:"red"}},t):a.createElement(Ge,null,r||n),this.renderStats()):null}}Oe.propTypes=be,Oe.defaultProps={canvas:null,image:null,gl:null,program:null};const He=_.ZP.div.withConfig({displayName:"textures-uploader__Container",componentId:"sc-xhuue3-0"})(["display:flex;flex-flow:column nowrap;"]),ve=_.ZP.div.withConfig({displayName:"textures-uploader__TextureFrame",componentId:"sc-xhuue3-1"})(["display:flex;width:256px;height:256px;align-items:center;justify-content:center;border:1px dashed black;"]),Le=_.ZP.div.withConfig({displayName:"textures-uploader__ImageContainer",componentId:"sc-xhuue3-2"})(["display:flex;flex-flow:column nowrap;align-items:center;width:270px;"]),Xe={canvas:u().object,gl:u().object,program:u().object};class Ie extends a.PureComponent{constructor(e){super(e),this.state={uploadedImage:null},this.handleLoadFile=this.handleLoadFile.bind(this),this.handleCleanTexture=this.handleCleanTexture.bind(this)}handleLoadFile(e){const t=e.dataTransfer.files[0];this.setState({uploadedImage:t}),e.preventDefault()}handleCleanTexture(){this.setState({uploadedImage:null})}render(){const{canvas:e,gl:t,program:r}=this.props,{uploadedImage:n,files:s}=this.state;return a.createElement("div",null,!n&&a.createElement(He,null,a.createElement(ve,{onDrop:this.handleLoadFile,onDragOver:e=>e.preventDefault()},"Drag&Drop texture"),a.createElement("input",{style:{display:"none"},type:"file",id:"fileInput",files:s})),a.createElement(Le,null,n&&a.createElement(Oe,{image:n,canvas:e,gl:t,program:r}),n&&a.createElement("button",{onClick:this.handleCleanTexture},"Clean")))}}Ie.propTypes=Xe,Ie.defaultProps={canvas:null,gl:null,program:null};class Ue extends a.PureComponent{constructor(e){super(e),this.state={canvas:null,gl:null,program:null}}componentDidMount(){const e=this.initializeWebGL(),t=e.getContext("webgl");(0,o.yW)(t),this.createAndFillBufferObject(t);const r=new i.Z(t,{vs:"\nprecision highp float;\n\nattribute vec2 position;\nvarying vec2 uv;\n\nvoid main() {\n  gl_Position = vec4(position, 0.0, 1.0);\n  uv = vec2(position.x * .5, -position.y * .5) + vec2(.5, .5);\n}\n",fs:"\nprecision highp float;\n\nuniform sampler2D tex;\nvarying vec2 uv;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(tex, uv).rgb, 1.);\n}\n"});this.setState({canvas:e,gl:t,program:r.handle})}initializeWebGL(){const e=document.createElement("canvas");return e.width=256,e.height=256,e}createAndFillBufferObject(e){const t=new Float32Array([-1,-1,-1,1,1,-1,1,1]),r=e.createBuffer();r||console.error("Failed to create the buffer object"),e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(0),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0)}renderTexturesBlocks(){const{canvas:e,gl:t,program:r}=this.state;return c.map(((n,s)=>a.createElement("div",{key:s},this.renderTexturesHeader(n),this.renderTextures(t,e,r,n.images),this.renderTexturesDescription(n))))}renderTexturesHeader(e){const{formatName:t,link:r}=e;return a.createElement("div",{style:{display:"flex",flexFlow:"column"}},a.createElement("h2",{style:{borderBottom:"1px solid black",marginBottom:0}},r?a.createElement("a",{style:{textDecoration:"none"},href:r},t):t))}renderTexturesDescription(e){const{description:t,codeSample:r,availability:n}=e;return a.createElement("div",null,t&&a.createElement("p",null,a.createElement("b",null,"Description: "),t),n&&a.createElement("p",null,a.createElement("b",null,"Availability: "),n),r&&a.createElement("div",null,a.createElement("p",null,a.createElement("code",null,r))))}renderTextures(e,t,r,n){return n.map(((n,s)=>a.createElement(Oe,{key:s,image:n,canvas:t,gl:e,program:r})))}renderDescription(){return a.createElement("div",null,a.createElement("h1",null,"Texture Loaders"),a.createElement("p",null,"This page loads every \xa0",a.createElement("a",{href:"https://loaders.gl/modules/textures/docs/using-compressed-textures"},"texture format")," ","\xa0 supported by loaders.gl and attempts to display them in WebGL using the"," ",a.createElement("a",{href:"https://luma.gl"},a.createElement("b",null,"luma.gl"))," ",a.createElement("code",null,"Texture2D")," class."),a.createElement("p",null,"The ",a.createElement("code",null,"@loaders.gl/textures")," \xa0 module provides loaders for compressed textures stored in ",a.createElement("b",null,"KTX"),", ",a.createElement("b",null,"DDS")," and ",a.createElement("b",null,"PVR")," container files, plus ",a.createElement("b",null,"CRN")," ","(Crunch), and ",a.createElement("b",null,"Basis")," supercompressed textures."),a.createElement("p",null,"This page also shows which compressed texture types your device and browser supports."),a.createElement("p",null,a.createElement("i",null,"Note that multiple textures on this page will fail to display due to lack of GPU support (reported via WebGL extensions). For example: DXT formats are usually only supported on Desktops while PVRTC is typically only available on mobile devices with PowerVR chipsets.")),a.createElement("p",null,a.createElement("i",null,"Inspired by toji's awesome"," ",a.createElement("a",{href:"http://toji.github.io/texture-tester"},"texture-tester"))))}render(){const{gl:e,canvas:t,program:r}=this.state;return a.createElement("div",{style:{margin:30}},this.renderDescription(),e&&a.createElement(Ie,{canvas:t,gl:e,program:r}),e&&this.renderTexturesBlocks())}}const Ne={},Ke="Textures",Fe={unversionedId:"textures",id:"textures",title:"Textures",description:"",source:"@site/src/examples/textures.mdx",sourceDirName:".",slug:"/textures",permalink:"/examples/textures",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"examplesSidebar",previous:{title:"Examples",permalink:"/examples/"},next:{title:"glTF",permalink:"/examples/gltf"}},ke={},Ve=[],je={toc:Ve},We="wrapper";function ze(e){let{components:t,...r}=e;return(0,s.kt)(We,(0,n.Z)({},je,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"textures"},"Textures"),(0,s.kt)("div",{style:{height:"100vh",overflowY:"scroll"}},(0,s.kt)(Ue,{mdxType:"Demo"})))}ze.isMDXComponent=!0},50061:(e,t,r)=>{"use strict";r.d(t,{D0:()=>c,Ew:()=>_,Kn:()=>s,Lj:()=>l,Os:()=>E,Ss:()=>o,TW:()=>i,zH:()=>u});const n=e=>"boolean"==typeof e,a=e=>"function"==typeof e,s=e=>null!==e&&"object"==typeof e,o=e=>s(e)&&e.constructor==={}.constructor,i=e=>e&&"function"==typeof e[Symbol.iterator],c=e=>e&&"function"==typeof e[Symbol.asyncIterator],_=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,l=e=>"undefined"!=typeof Blob&&e instanceof Blob,u=e=>e&&"object"==typeof e&&e.isBuffer,E=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||s(e)&&a(e.tee)&&a(e.cancel)&&a(e.getReader))(e)||(e=>s(e)&&a(e.read)&&a(e.pipe)&&n(e.readable))(e)},6109:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var n=r(50061),a=r(75955),s=r(91426),o=r(21843);async function i(e,t,r,i){Array.isArray(t)||(0,a.C)(t)||(void 0,r=t,t=void 0);const c=(0,s.b)(r);let _=e;return"string"==typeof e&&(_=await c(e)),(0,n.Lj)(e)&&(_=await c(e)),await(0,o.Q)(_,t,r)}},21843:(e,t,r)=>{"use strict";r.d(t,{Q:()=>y});var n=r(96040),a=r(57254),s=r(96013),o=r(13842),i=r(9164);async function c(e,t,r,n,a){const s=e.id,c=(0,i.j)(e,r),l=o.Z.getWorkerFarm(r).getWorkerPool({name:s,url:c});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",_.bind(null,a));u.postMessage("process",{input:t,options:r,context:n});const E=await u.result;return await E.result}async function _(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:s,input:o,options:i}=n;try{const r=await e(o,i);t.postMessage("done",{id:s,result:r})}catch(a){const e=a instanceof Error?a.message:"unknown error";t.postMessage("error",{id:s,error:e})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}var l=r(75955),u=r(50061),E=r(46974),S=r(57288);const f=262144;const R=262144;const d=1048576;var p=r(78713);function A(e){if((t=e)&&"object"==typeof t&&t.isBuffer)return e;var t;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function m(e,t){return p.jU?async function*(e,t){const r=e.getReader();let n;try{for(;;){const e=n||r.read();null!=t&&t._streamReadAhead&&(n=r.read());const{done:a,value:s}=await e;if(a)return;yield A(s)}}catch(a){r.releaseLock()}}(e,t):async function*(e,t){for await(const r of e)yield A(r)}(e)}function C(e,t){if("string"==typeof e)return function*(e,t){const r=(null==t?void 0:t.chunkSize)||f;let n=0;const a=new TextEncoder;for(;n<e.length;){const t=Math.min(e.length-n,r),s=e.slice(n,n+t);n+=t,yield a.encode(s)}}(e,t);if(e instanceof ArrayBuffer)return function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{chunkSize:r=R}=t;let n=0;for(;n<e.byteLength;){const t=Math.min(e.byteLength-n,r),a=new ArrayBuffer(t),s=new Uint8Array(e,n,t);new Uint8Array(a).set(s),n+=t,yield a}}(e,t);if((0,u.Lj)(e))return async function*(e,t){const r=(null==t?void 0:t.chunkSize)||d;let n=0;for(;n<e.size;){const t=n+r,a=await e.slice(n,t).arrayBuffer();n=t,yield a}}(e,t);if((0,u.Os)(e))return m(e,t);if((0,u.Ew)(e)){return m(e.body,t)}throw new Error("makeIterator")}var h=r(64294);const T="Cannot convert supplied data type";async function P(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||n)return function(e,t,r){if(t.text&&"string"==typeof e)return e;if((0,u.zH)(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const n=e.byteLength||e.length;return 0===e.byteOffset&&n===r.byteLength||(r=r.slice(e.byteOffset,e.byteOffset+n)),r}throw new Error(T)}(e,t);if((0,u.Lj)(e)&&(e=await(0,h.L1)(e)),(0,u.Ew)(e)){const r=e;return await(0,h.mm)(r),t.binary?await r.arrayBuffer():await r.text()}if((0,u.Os)(e)&&(e=C(e,r)),(0,u.TW)(e)||(0,u.D0)(e))return(0,S.GZ)(e);throw new Error(T)}var D=r(91426);var g=r(10669),x=r(18150);async function y(e,t,r,i){(0,n.h)(!i||"object"==typeof i),!t||Array.isArray(t)||(0,l.C)(t)||(i=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:_}=(0,g.l)(e),S=function(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...e]:e}return r&&r.length?r:null}(t,i),f=await(0,x.A)(e,S,r);return f?(i=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(r)return r;const n={fetch:(0,D.b)(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}({url:_,parse:y,loaders:S},r=(0,E.GR)(r,f,S,_),i),await async function(e,t,r,i){if((0,a.z)(e),(0,u.Ew)(t)){const e=t,{ok:r,redirected:n,status:a,statusText:s,type:o,url:c}=e,_=Object.fromEntries(e.headers.entries());i.response={headers:_,ok:r,redirected:n,status:a,statusText:s,type:o,url:c}}if(t=await P(t,e,r),e.parseTextSync&&"string"==typeof t)return r.dataType="text",e.parseTextSync(t,r,i,e);if(function(e,t){return!!o.Z.isSupported()&&!!(s.jU||null!=t&&t._nodeWorkers)&&e.worker&&(null==t?void 0:t.worker)}(e,r))return await c(e,t,r,i,y);if(e.parseText&&"string"==typeof t)return await e.parseText(t,r,i,e);if(e.parse)return await e.parse(t,r,i,e);throw(0,n.h)(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}(f,e,r,i)):null}},75243:(e,t,r)=>{"use strict";r.d(t,{fh:()=>o,kO:()=>i});var n=r(75955),a=r(46974);const s=()=>{const e=(0,a.rx)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function o(e){const t=s();e=Array.isArray(e)?e:[e];for(const r of e){const e=(0,n.T)(r);t.find((t=>e===t))||t.unshift(e)}}function i(){return s()}},18150:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(20331),a=r(25438),s=r(75955);const o=new(r(56426).Z)({id:"loaders.gl"});var i=r(10669),c=r(75243),_=r(50061);const l=/\.([^.]+)$/;async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!S(e))return null;let a=E(e,t,{...r,nothrow:!0},n);if(a)return a;if((0,_.Lj)(e)&&(a=E(e=await e.slice(0,10).arrayBuffer(),t,r,n)),!(a||null!=r&&r.nothrow))throw new Error(f(e));return a}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!S(e))return null;if(t&&!Array.isArray(t))return(0,s.T)(t);let a=[];t&&(a=a.concat(t)),null!=r&&r.ignoreRegisteredLoaders||a.push(...(0,c.kO)()),function(e){for(const t of e)(0,s.T)(t)}(a);const _=function(e,t,r,n){const{url:a,type:s}=(0,i.l)(e),c=a||(null==n?void 0:n.url);let _=null,u="";null!=r&&r.mimeType&&(_=R(t,null==r?void 0:r.mimeType),u="match forced by supplied MIME type ".concat(null==r?void 0:r.mimeType));var E;_=_||function(e,t){const r=t&&l.exec(t),n=r&&r[1];return n?function(e,t){t=t.toLowerCase();for(const r of e)for(const e of r.extensions)if(e.toLowerCase()===t)return r;return null}(e,n):null}(t,c),u=u||(_?"matched url ".concat(c):""),_=_||R(t,s),u=u||(_?"matched MIME type ".concat(s):""),_=_||function(e,t){if(!t)return null;for(const r of e)if("string"==typeof t){if(d(t,r))return r}else if(ArrayBuffer.isView(t)){if(p(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer){if(p(t,0,r))return r}return null}(t,e),u=u||(_?"matched initial data ".concat(A(e)):""),_=_||R(t,null==r?void 0:r.fallbackMimeType),u=u||(_?"matched fallback MIME type ".concat(s):""),u&&o.log(1,"selectLoader selected ".concat(null===(E=_)||void 0===E?void 0:E.name,": ").concat(u,"."));return _}(e,a,r,n);if(!(_||null!=r&&r.nothrow))throw new Error(f(e));return _}function S(e){return!(e instanceof Response&&204===e.status)}function f(e){const{url:t,type:r}=(0,i.l)(e);let a="No valid loader found (";a+=t?"".concat(n.vB(t),", "):"no url provided, ",a+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const s=e?A(e):"";return a+=s?' first bytes: "'.concat(s,'"'):"first bytes: not available",a+=")",a}function R(e,t){for(const r of e){if(r.mimeTypes&&r.mimeTypes.includes(t))return r;if(t==="application/x.".concat(r.id))return r}return null}function d(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function p(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some((n=>function(e,t,r,n){if(n instanceof ArrayBuffer)return(0,a.Xq)(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":return n===m(e,t,n.length);default:return!1}}(e,t,r,n)))}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return m(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return m(e,0,t)}return""}function m(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let a="";for(let s=0;s<r;s++)a+=String.fromCharCode(n.getUint8(t+s));return a}},24789:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var n=r(94434),a=r(64294);async function s(e,t){if("string"==typeof e){e=(0,n.i3)(e);let r=t;return null!=t&&t.fetch&&"function"!=typeof(null==t?void 0:t.fetch)&&(r=t.fetch),await fetch(e,r)}return await(0,a.L1)(e)}},91426:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var n=r(50061),a=r(24789),s=r(46974);function o(e,t){const r=(0,s.pm)(),o=e||r;return"function"==typeof o.fetch?o.fetch:(0,n.Kn)(o.fetch)?e=>(0,a.d)(e,o):null!=t&&t.fetch?null==t?void 0:t.fetch:a.d}},75955:(e,t,r)=>{"use strict";r.d(t,{C:()=>a,T:()=>s});var n=r(1e3);function a(e){var t;if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(null===(t=e)||void 0===t?void 0:t.extensions)}function s(e){var t,r;let s;return(0,n.h)(e,"null loader"),(0,n.h)(a(e),"invalid loader"),Array.isArray(e)&&(s=e[1],e=e[0],e={...e,options:{...e.options,...s}}),(null!==(t=e)&&void 0!==t&&t.parseTextSync||null!==(r=e)&&void 0!==r&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}},46974:(e,t,r)=>{"use strict";r.d(t,{pm:()=>u,rx:()=>l,GR:()=>E});var n=r(50061),a=r(4942);const s=new(r(56426).Z)({id:"loaders.gl"});class o{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var i=r(78713);const c={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){(0,a.Z)(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.console.error.bind(this.console,...t)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:i.jU,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},_={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function l(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const u=()=>{const e=l();return e.globalOptions=e.globalOptions||{...c},e.globalOptions};function E(e,t,r,n){return r=r||[],function(e,t){S(e,null,c,_,t);for(const r of t){const n=e&&e[r.id]||{},a=r.options&&r.options[r.id]||{},s=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};S(n,r.id,a,s,t)}}(e,r=Array.isArray(r)?r:[r]),R(t,e,n)}function S(e,t,r,a,o){const i=t||"Top level",c=t?"".concat(t,"."):"";for(const _ in e){const l=!t&&(0,n.Kn)(e[_]);if(!(_ in r)&&!("baseUri"===_&&!t)&&!("workerUrl"===_&&t))if(_ in a)s.warn("".concat(i," loader option '").concat(c).concat(_,"' no longer supported, use '").concat(a[_],"'"))();else if(!l){const e=f(_,o);s.warn("".concat(i," loader option '").concat(c).concat(_,"' not recognized. ").concat(e))()}}}function f(e,t){const r=e.toLowerCase();let n="";for(const a of t)for(const t in a.options){if(e===t)return"Did you mean '".concat(a.id,".").concat(t,"'?");const s=t.toLowerCase();(r.startsWith(s)||s.startsWith(r))&&(n=n||"Did you mean '".concat(a.id,".").concat(t,"'?"))}return n}function R(e,t,r){const n={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(n,r),null===n.log&&(n.log=new o),d(n,u()),d(n,t),n}function d(e,t){for(const r in t)if(r in t){const a=t[r];(0,n.Ss)(a)&&(0,n.Ss)(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}},10669:(e,t,r)=>{"use strict";r.d(t,{C:()=>l,l:()=>_});var n=r(50061);const a=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,s=/^([-\w.]+\/[-\w.+]+)/;function o(e){const t=s.exec(e);return t?t[1]:e}function i(e){const t=a.exec(e);return t?t[1]:""}const c=/\?.*/;function _(e){if((0,n.Ew)(e)){const t=u(e.url||"");return{url:t,type:o(e.headers.get("content-type")||"")||i(t)}}return(0,n.Lj)(e)?{url:u(e.name||""),type:e.type||""}:"string"==typeof e?{url:u(e),type:i(e)}:{url:"",type:""}}function l(e){return(0,n.Ew)(e)?e.headers["content-length"]||-1:(0,n.Lj)(e)?e.size:"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function u(e){return e.replace(c,"")}},64294:(e,t,r)=>{"use strict";r.d(t,{L1:()=>s,mm:()=>o});var n=r(50061),a=r(10669);async function s(e){if((0,n.Ew)(e))return e;const t={},r=(0,a.C)(e);r>=0&&(t["content-length"]=String(r));const{url:s,type:o}=(0,a.l)(e);o&&(t["content-type"]=o);const i=await async function(e){const t=5;if("string"==typeof e)return"data:,".concat(e.slice(0,t));if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const r=new FileReader;r.onload=t=>{var r;return e(null==t||null===(r=t.target)||void 0===r?void 0:r.result)},r.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){const r=function(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}(e.slice(0,t));return"data:base64,".concat(r)}return null}(e);i&&(t["x-first-bytes"]=i),"string"==typeof e&&(e=(new TextEncoder).encode(e));const c=new Response(e,{headers:t});return Object.defineProperty(c,"url",{value:s}),c}async function o(e){if(!e.ok){const t=await async function(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch(r){}return t}(e);throw new Error(t)}}},72617:(e,t,r)=>{"use strict";r.d(t,{S:()=>s});var n=r(5716),a=r(79325);const s={id:"image",module:"images",name:"Images",version:"3.4.0-alpha.2",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:n.Z,tests:[e=>Boolean((0,a.I)(new DataView(e)))],options:{image:{type:"auto",decode:!0}}}},79325:(e,t,r)=>{"use strict";function n(e){return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=(a=t,[...a].map((e=>e.charCodeAt(0))));var a;for(let s=0;s<n.length;++s)if(n[s]!==e[s+r])return!1;return!0}(e,"ftyp",4)?0==(96&e[8])?null:function(e){switch((t=e,r=8,n=12,String.fromCharCode(...t.slice(r,n))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var t,r,n}(e):null}r.d(t,{I:()=>o});const a=!1,s=!0;function o(e){const t=i(e);return function(e){const t=i(e),r=t.byteLength>=24&&2303741511===t.getUint32(0,a);if(!r)return null;return{mimeType:"image/png",width:t.getUint32(16,a),height:t.getUint32(20,a)}}(t)||function(e){const t=i(e),r=t.byteLength>=3&&65496===t.getUint16(0,a)&&255===t.getUint8(2);if(!r)return null;const{tableMarkers:n,sofMarkers:s}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let o=2;for(;o+9<t.byteLength;){const e=t.getUint16(o,a);if(s.has(e))return{mimeType:"image/jpeg",height:t.getUint16(o+5,a),width:t.getUint16(o+7,a)};if(!n.has(e))return null;o+=2,o+=t.getUint16(o,a)}return null}(t)||function(e){const t=i(e),r=t.byteLength>=10&&1195984440===t.getUint32(0,a);if(!r)return null;return{mimeType:"image/gif",width:t.getUint16(6,s),height:t.getUint16(8,s)}}(t)||function(e){const t=i(e),r=t.byteLength>=14&&16973===t.getUint16(0,a)&&t.getUint32(2,s)===t.byteLength;if(!r)return null;return{mimeType:"image/bmp",width:t.getUint32(18,s),height:t.getUint32(22,s)}}(t)||function(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),r=n(t);if(!r)return null;return{mimeType:r.mimeType,width:0,height:0}}(t)}function i(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}},80897:(e,t,r)=>{"use strict";function n(e){const t=o(e);if(!t)throw new Error("Not an image");return t}function a(e){return s(e)}function s(e){switch(n(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function o(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"==typeof e&&e.data&&e.width&&e.height?"data":null}r.d(t,{Ad:()=>a,n$:()=>s})},5716:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(1e3),a=r(78713);const{_parseImageNode:s}=globalThis,o="undefined"!=typeof Image,i="undefined"!=typeof ImageBitmap,c=Boolean(s),_=!!a.jU||c;var l=r(80897);const u=/^data:image\/svg\+xml/,E=/\.svg((\?|#).*)?$/;function S(e){return e&&(u.test(e)||E.test(e))}function f(e,t){if(S(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function R(e,t,r){const n=function(e,t){if(S(t)){let t=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(r){throw new Error(r.message)}return"data:image/svg+xml;base64,".concat(btoa(t))}return f(e,t)}(e,r),a=self.URL||self.webkitURL,s="string"!=typeof n&&a.createObjectURL(n);try{return await async function(e,t){const r=new Image;if(r.src=e,t.image&&t.image.decode&&r.decode)return await r.decode(),r;return await new Promise(((t,n)=>{try{r.onload=()=>t(r),r.onerror=t=>n(new Error("Could not load image ".concat(e,": ").concat(t)))}catch(a){n(a)}}))}(s||n,t)}finally{s&&a.revokeObjectURL(s)}}const d={};let p=!0;async function A(e,t,r){let n;if(S(r)){n=await R(e,t,r)}else n=f(e,r);const a=t&&t.imagebitmap;return await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e){for(const t in e||d)return!1;return!0}(t)&&p||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),p=!1}return await createImageBitmap(e)}(n,a)}var m=r(79325);async function C(e,t,r){const a=((t=t||{}).image||{}).type||"auto",{url:s}=r||{};let c;switch(function(e){switch(e){case"auto":case"data":return function(){if(i)return"imagebitmap";if(o)return"image";if(_)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return i||o||_;case"imagebitmap":return i;case"image":return o;case"data":return _;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}(e),e}}(a)){case"imagebitmap":c=await A(e,t,s);break;case"image":c=await R(e,t,s);break;case"data":c=await async function(e,t){const{mimeType:r}=(0,m.I)(e)||{},a=globalThis._parseImageNode;return(0,n.h)(a),await a(e,r)}(e);break;default:(0,n.h)(!1)}return"data"===a&&(c=(0,l.n$)(c)),c}},25438:(e,t,r)=>{"use strict";function n(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),a=new Uint8Array(t);for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}function a(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),a=n.reduce(((e,t)=>e+t.byteLength),0),s=new Uint8Array(a);let o=0;for(const i of n)s.set(i,o),o+=i.byteLength;return s.buffer}function s(e,t,r){const n=void 0!==r?new Uint8Array(e).subarray(t,t+r):new Uint8Array(e).subarray(t);return new Uint8Array(n).buffer}r.d(t,{JY:()=>a,Xq:()=>n,qv:()=>s})},1e3:(e,t,r)=>{"use strict";function n(e,t){if(!e)throw new Error(t||"loader assertion failed.")}r.d(t,{h:()=>n})},78713:(e,t,r)=>{"use strict";r.d(t,{jU:()=>n});"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==r.g&&r.g,"undefined"!=typeof document&&document;const n=Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser),a="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);a&&parseFloat(a[1])},57288:(e,t,r)=>{"use strict";r.d(t,{Ed:()=>a,GZ:()=>s});var n=r(25438);async function a(e,t){for(;;){const{done:r,value:n}=await e.next();if(r)return void e.return();if(t(n))return}}async function s(e){const t=[];for await(const r of e)t.push(r);return(0,n.JY)(...t)}},94434:(e,t,r)=>{"use strict";r.d(t,{i3:()=>s});let n="";const a={};function s(e){for(const t in a)if(e.startsWith(t)){const r=a[t];e=e.replace(t,r)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat(n).concat(e)),e}},20331:(e,t,r)=>{"use strict";function n(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function a(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}r.d(t,{XX:()=>a,vB:()=>n})},27785:(e,t,r)=>{"use strict";r.d(t,{Ge:()=>i});var n=r(96013),a=r(480),s=r(13363);const o={name:"Basis",id:n.jU?"basis":"basis-nodejs",module:"textures",version:a.q,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},i={...o,parse:s.Z}},19616:(e,t,r)=>{"use strict";r.d(t,{Dq:()=>D});var n=r(480),a=r(88642),s=r(1e3),o=r(41762),i=r(33098);const c={MAGIC_NUMBER:542327876,HEADER_LENGTH:31,MAGIC_NUMBER_INDEX:0,HEADER_SIZE_INDEX:1,HEADER_FLAGS_INDEX:2,HEADER_HEIGHT_INDEX:3,HEADER_WIDTH_INDEX:4,MIPMAPCOUNT_INDEX:7,HEADER_PF_FLAGS_INDEX:20,HEADER_PF_FOURCC_INDEX:21,DDSD_MIPMAPCOUNT:131072,DDPF_FOURCC:4},_={DXT1:o.p.COMPRESSED_RGB_S3TC_DXT1_EXT,DXT3:o.p.COMPRESSED_RGBA_S3TC_DXT3_EXT,DXT5:o.p.COMPRESSED_RGBA_S3TC_DXT5_EXT,"ATC ":o.p.COMPRESSED_RGB_ATC_WEBGL,ATCA:o.p.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,ATCI:o.p.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL},l={DXT1:E,DXT3:S,DXT5:S,"ATC ":E,ATCA:S,ATCI:S};function u(e){const t=new Int32Array(e,0,c.HEADER_LENGTH),r=t[c.HEADER_PF_FOURCC_INDEX];(0,s.h)(Boolean(t[c.HEADER_PF_FLAGS_INDEX]&c.DDPF_FOURCC),"DDS: Unsupported format, must contain a FourCC code");const n=(a=r,String.fromCharCode(255&a,a>>8&255,a>>16&255,a>>24&255));var a;const o=_[n],u=l[n];(0,s.h)(o&&u,"DDS: Unknown pixel format ".concat(r));let E=1;t[c.HEADER_FLAGS_INDEX]&c.DDSD_MIPMAPCOUNT&&(E=Math.max(1,t[c.MIPMAPCOUNT_INDEX]));const S=t[c.HEADER_WIDTH_INDEX],f=t[c.HEADER_HEIGHT_INDEX],R=t[c.HEADER_SIZE_INDEX]+4,d=new Uint8Array(e,R);return(0,i.J)(d,{mipMapLevels:E,width:S,height:f,sizeFunction:u,internalFormat:o})}function E(e,t){return(e+3>>2)*(t+3>>2)*8}function S(e,t){return(e+3>>2)*(t+3>>2)*16}const f={MAGIC_NUMBER:55727696,MAGIC_NUMBER_EXTRA:1347834371,HEADER_LENGTH:13,HEADER_SIZE:52,MAGIC_NUMBER_INDEX:0,PIXEL_FORMAT_INDEX:2,COLOUR_SPACE_INDEX:4,HEIGHT_INDEX:6,WIDTH_INDEX:7,MIPMAPCOUNT_INDEX:11,METADATA_SIZE_INDEX:12},R={0:[o.p.COMPRESSED_RGB_PVRTC_2BPPV1_IMG],1:[o.p.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG],2:[o.p.COMPRESSED_RGB_PVRTC_4BPPV1_IMG],3:[o.p.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG],6:[o.p.COMPRESSED_RGB_ETC1_WEBGL],7:[o.p.COMPRESSED_RGB_S3TC_DXT1_EXT],9:[o.p.COMPRESSED_RGBA_S3TC_DXT3_EXT],11:[o.p.COMPRESSED_RGBA_S3TC_DXT5_EXT],22:[o.p.COMPRESSED_RGB8_ETC2],23:[o.p.COMPRESSED_RGBA8_ETC2_EAC],24:[o.p.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2],25:[o.p.COMPRESSED_R11_EAC],26:[o.p.COMPRESSED_RG11_EAC],27:[o.p.COMPRESSED_RGBA_ASTC_4X4_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR],28:[o.p.COMPRESSED_RGBA_ASTC_5X4_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR],29:[o.p.COMPRESSED_RGBA_ASTC_5X5_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR],30:[o.p.COMPRESSED_RGBA_ASTC_6X5_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR],31:[o.p.COMPRESSED_RGBA_ASTC_6X6_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR],32:[o.p.COMPRESSED_RGBA_ASTC_8X5_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR],33:[o.p.COMPRESSED_RGBA_ASTC_8X6_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR],34:[o.p.COMPRESSED_RGBA_ASTC_8X8_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR],35:[o.p.COMPRESSED_RGBA_ASTC_10X5_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR],36:[o.p.COMPRESSED_RGBA_ASTC_10X6_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR],37:[o.p.COMPRESSED_RGBA_ASTC_10X8_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR],38:[o.p.COMPRESSED_RGBA_ASTC_10X10_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR],39:[o.p.COMPRESSED_RGBA_ASTC_12X10_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR],40:[o.p.COMPRESSED_RGBA_ASTC_12X12_KHR,o.p.COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR]},d={0:p,1:p,2:A,3:A,6:m,7:m,9:C,11:C,22:m,23:C,24:m,25:m,26:C,27:C,28:function(e,t){return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16},29:function(e,t){return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16},30:function(e,t){return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16},31:function(e,t){return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16},32:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16},33:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16},34:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16},35:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16},36:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16},37:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16},38:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16},39:function(e,t){return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16},40:function(e,t){return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16}};function p(e,t){return(e=Math.max(e,16))*(t=Math.max(t,8))/4}function A(e,t){return(e=Math.max(e,8))*(t=Math.max(t,8))/2}function m(e,t){return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8}function C(e,t){return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16}function h(e){if((0,a.j)(e))return(0,a.P)(e);if(function(e){return new Uint32Array(e,0,c.HEADER_LENGTH)[c.MAGIC_NUMBER_INDEX]===c.MAGIC_NUMBER}(e))return u(e);if(function(e){const t=new Uint32Array(e,0,f.HEADER_LENGTH)[f.MAGIC_NUMBER_INDEX];return t===f.MAGIC_NUMBER||t===f.MAGIC_NUMBER_EXTRA}(e))return function(e){const t=new Uint32Array(e,0,f.HEADER_LENGTH),r=t[f.PIXEL_FORMAT_INDEX],n=t[f.COLOUR_SPACE_INDEX],a=R[r]||[],s=a.length>1&&n?a[1]:a[0],o=d[r],c=t[f.MIPMAPCOUNT_INDEX],_=t[f.WIDTH_INDEX],l=t[f.HEIGHT_INDEX],u=f.HEADER_SIZE+t[f.METADATA_SIZE_INDEX],E=new Uint8Array(e,u);return(0,i.J)(E,{mipMapLevels:c,width:_,height:l,sizeFunction:o,internalFormat:s})}(e);throw new Error("Texture container format not recognized")}var T=r(13363);const P={name:"Texture Containers",id:"compressed-texture",module:"textures",version:n.q,worker:!0,extensions:["ktx","ktx2","dds","pvr"],mimeTypes:["image/ktx2","image/ktx","image/vnd-ms.dds","image/x-dds","application/octet-stream"],binary:!0,options:{"compressed-texture":{libraryPath:"libs/",useBasis:!1}}},D={...P,parse:async(e,t)=>t["compressed-texture"].useBasis?(t.basis={format:{alpha:"BC3",noAlpha:"BC1"},...t.basis,containerFormat:"ktx2",module:"encoder"},(await(0,T.Z)(e,t))[0]):h(e)}},41762:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});const n={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919}},13363:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R,h:()=>h});var n=r(96706);const a="3.4.0-alpha.2",s="https://unpkg.com/@loaders.gl/textures@".concat(a,"/dist/libs/basis_encoder.wasm"),o="https://unpkg.com/@loaders.gl/textures@".concat(a,"/dist/libs/basis_encoder.js");let i,c;async function _(e){const t=e.modules||{};return t.basis?t.basis:(i=i||async function(e){let t=null,r=null;return[t,r]=await Promise.all([await(0,n.Y)("basis_transcoder.js","textures",e),await(0,n.Y)("basis_transcoder.wasm","textures",e)]),t=t||globalThis.BASIS,await function(e,t){const r={};t&&(r.wasmBinary=t);return new Promise((t=>{e(r).then((e=>{const{BasisFile:r,initializeBasis:n}=e;n(),t({BasisFile:r})}))}))}(t,r)}(e),await i)}async function l(e){const t=e.modules||{};return t.basisEncoder?t.basisEncoder:(c=c||async function(e){let t=null,r=null;return[t,r]=await Promise.all([await(0,n.Y)(o,"textures",e),await(0,n.Y)(s,"textures",e)]),t=t||globalThis.BASIS,await function(e,t){const r={};t&&(r.wasmBinary=t);return new Promise((t=>{e(r).then((e=>{const{BasisFile:r,KTX2File:n,initializeBasis:a,BasisEncoder:s}=e;a(),t({BasisFile:r,KTX2File:n,BasisEncoder:s})}))}))}(t,r)}(e),await c)}var u=r(41762),E=r(1715),S=r(88642);const f={etc1:{basisFormat:0,compressed:!0,format:u.p.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:u.p.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:u.p.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:u.p.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:u.p.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:u.p.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};async function R(e,t){if("auto"===t.basis.containerFormat){if((0,S.j)(e)){return A((await l(t)).KTX2File,e,t)}const{BasisFile:r}=await _(t);return d(r,e,t)}if("encoder"===t.basis.module){const r=await l(t);return"ktx2"===t.basis.containerFormat?A(r.KTX2File,e,t):d(r.BasisFile,e,t)}{const{BasisFile:r}=await _(t);return d(r,e,t)}}function d(e,t,r){const n=new e(new Uint8Array(t));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");const e=n.getNumImages(),t=[];for(let a=0;a<e;a++){const e=n.getNumLevels(a),s=[];for(let t=0;t<e;t++)s.push(p(n,a,t,r));t.push(s)}return t}finally{n.close(),n.delete()}}function p(e,t,r,n){const a=e.getImageWidth(t,r),s=e.getImageHeight(t,r),o=e.getHasAlpha(),{compressed:i,format:c,basisFormat:_}=C(n,o),l=e.getImageTranscodedSizeInBytes(t,r,_),u=new Uint8Array(l);if(!e.transcodeImage(u,t,r,_,0,0))throw new Error("failed to start Basis transcoding");return{width:a,height:s,data:u,compressed:i,format:c,hasAlpha:o}}function A(e,t,r){const n=new e(new Uint8Array(t));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");const e=n.getLevels(),t=[];for(let a=0;a<e;a++){t.push(m(n,a,r));break}return[t]}finally{n.close(),n.delete()}}function m(e,t,r){const{alphaFlag:n,height:a,width:s}=e.getImageLevelInfo(t,0,0),{compressed:o,format:i,basisFormat:c}=C(r,n),_=e.getImageTranscodedSizeInBytes(t,0,0,c),l=new Uint8Array(_);if(!e.transcodeImage(l,t,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:a,data:l,compressed:o,levelSize:_,hasAlpha:n,format:i}}function C(e,t){let r=e&&e.basis&&e.basis.format;return"auto"===r&&(r=h()),"object"==typeof r&&(r=t?r.alpha:r.noAlpha),r=r.toLowerCase(),f[r]}function h(){const e=(0,E.U)();return e.has("astc")?"astc-4x4":e.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:e.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:e.has("etc1")?"etc1":e.has("etc2")?"etc2":"rgb565"}},88642:(e,t,r)=>{"use strict";r.d(t,{j:()=>c,P:()=>_});var n=r(31029),a=r(33098),s=r(41762);const o={131:s.p.COMPRESSED_RGB_S3TC_DXT1_EXT,132:s.p.COMPRESSED_SRGB_S3TC_DXT1_EXT,133:s.p.COMPRESSED_RGBA_S3TC_DXT1_EXT,134:s.p.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,135:s.p.COMPRESSED_RGBA_S3TC_DXT3_EXT,136:s.p.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,137:s.p.COMPRESSED_RGBA_S3TC_DXT5_EXT,138:s.p.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,139:s.p.COMPRESSED_RED_RGTC1_EXT,140:s.p.COMPRESSED_SIGNED_RED_RGTC1_EXT,141:s.p.COMPRESSED_RED_GREEN_RGTC2_EXT,142:s.p.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT,147:s.p.COMPRESSED_RGB8_ETC2,148:s.p.COMPRESSED_SRGB8_ETC2,149:s.p.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,150:s.p.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,151:s.p.COMPRESSED_RGBA8_ETC2_EAC,152:s.p.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,153:s.p.COMPRESSED_R11_EAC,154:s.p.COMPRESSED_SIGNED_R11_EAC,155:s.p.COMPRESSED_RG11_EAC,156:s.p.COMPRESSED_SIGNED_RG11_EAC,157:s.p.COMPRESSED_RGBA_ASTC_4x4_KHR,158:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,159:s.p.COMPRESSED_RGBA_ASTC_5x4_KHR,160:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR,161:s.p.COMPRESSED_RGBA_ASTC_5x5_KHR,162:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,163:s.p.COMPRESSED_RGBA_ASTC_6x5_KHR,164:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,165:s.p.COMPRESSED_RGBA_ASTC_6x6_KHR,166:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,167:s.p.COMPRESSED_RGBA_ASTC_8x5_KHR,168:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,169:s.p.COMPRESSED_RGBA_ASTC_8x6_KHR,170:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,171:s.p.COMPRESSED_RGBA_ASTC_8x8_KHR,172:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,173:s.p.COMPRESSED_RGBA_ASTC_10x5_KHR,174:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,175:s.p.COMPRESSED_RGBA_ASTC_10x6_KHR,176:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,177:s.p.COMPRESSED_RGBA_ASTC_10x8_KHR,178:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,179:s.p.COMPRESSED_RGBA_ASTC_10x10_KHR,180:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,181:s.p.COMPRESSED_RGBA_ASTC_12x10_KHR,182:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,183:s.p.COMPRESSED_RGBA_ASTC_12x12_KHR,184:s.p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR,1000054e3:s.p.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,1000054001:s.p.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,1000066e3:s.p.COMPRESSED_RGBA_ASTC_4x4_KHR,1000066001:s.p.COMPRESSED_RGBA_ASTC_5x4_KHR,1000066002:s.p.COMPRESSED_RGBA_ASTC_5x5_KHR,1000066003:s.p.COMPRESSED_RGBA_ASTC_6x5_KHR,1000066004:s.p.COMPRESSED_RGBA_ASTC_6x6_KHR,1000066005:s.p.COMPRESSED_RGBA_ASTC_8x5_KHR,1000066006:s.p.COMPRESSED_RGBA_ASTC_8x6_KHR,1000066007:s.p.COMPRESSED_RGBA_ASTC_8x8_KHR,1000066008:s.p.COMPRESSED_RGBA_ASTC_10x5_KHR,1000066009:s.p.COMPRESSED_RGBA_ASTC_10x6_KHR,1000066010:s.p.COMPRESSED_RGBA_ASTC_10x8_KHR,1000066011:s.p.COMPRESSED_RGBA_ASTC_10x10_KHR,1000066012:s.p.COMPRESSED_RGBA_ASTC_12x10_KHR,1000066013:s.p.COMPRESSED_RGBA_ASTC_12x12_KHR};const i=[171,75,84,88,32,50,48,187,13,10,26,10];function c(e){const t=new Uint8Array(e);return!(t.byteLength<i.length||t[0]!==i[0]||t[1]!==i[1]||t[2]!==i[2]||t[3]!==i[3]||t[4]!==i[4]||t[5]!==i[5]||t[6]!==i[6]||t[7]!==i[7]||t[8]!==i[8]||t[9]!==i[9]||t[10]!==i[10]||t[11]!==i[11])}function _(e){const t=new Uint8Array(e),r=(0,n.ij)(t),s=Math.max(1,r.levels.length),i=r.pixelWidth,c=r.pixelHeight,_=(l=r.vkFormat,o[l]);var l;return(0,a.J)(r.levels,{mipMapLevels:s,width:i,height:c,sizeFunction:e=>e.uncompressedByteLength,internalFormat:_})}},33098:(e,t,r)=>{"use strict";function n(e,t){const r=new Array(t.mipMapLevels);let n=t.width,o=t.height,i=0;for(let c=0;c<t.mipMapLevels;++c){const _=s(t,n,o,e,c),l=a(e,c,i,_);r[c]={compressed:!0,format:t.internalFormat,data:l,width:n,height:o,levelSize:_},n=Math.max(1,n>>1),o=Math.max(1,o>>1),i+=_}return r}function a(e,t,r,n){return Array.isArray(e)?e[t].levelData:new Uint8Array(e.buffer,e.byteOffset+r,n)}function s(e,t,r,n,a){return Array.isArray(n)?e.sizeFunction(n[a]):e.sizeFunction(t,r)}r.d(t,{J:()=>n})},1715:(e,t,r)=>{"use strict";r.d(t,{U:()=>o});const n=["","WEBKIT_","MOZ_"],a={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let s=null;function o(e){if(!s){e=e||function(){try{return document.createElement("canvas").getContext("webgl")}catch(e){return null}}()||void 0,s=new Set;for(const t of n)for(const r in a)if(e&&e.getExtension("".concat(t).concat(r))){const e=a[r];s.add(e)}}return s}},480:(e,t,r)=>{"use strict";r.d(t,{q:()=>n});const n="3.4.0-alpha.2"},31029:(e,t,r)=>{"use strict";r.d(t,{ij:()=>R});new Uint8Array([0]);const n=[171,75,84,88,32,50,48,187,13,10,26,10];var a,s,o,i,c,_,l,u;!function(e){e[e.NONE=0]="NONE",e[e.BASISLZ=1]="BASISLZ",e[e.ZSTD=2]="ZSTD",e[e.ZLIB=3]="ZLIB"}(a||(a={})),function(e){e[e.BASICFORMAT=0]="BASICFORMAT"}(s||(s={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ETC1S=163]="ETC1S",e[e.UASTC=166]="UASTC"}(o||(o={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SRGB=1]="SRGB"}(i||(i={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LINEAR=1]="LINEAR",e[e.SRGB=2]="SRGB",e[e.ITU=3]="ITU",e[e.NTSC=4]="NTSC",e[e.SLOG=5]="SLOG",e[e.SLOG2=6]="SLOG2"}(c||(c={})),function(e){e[e.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",e[e.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(_||(_={})),function(e){e[e.RGB=0]="RGB",e[e.RRR=3]="RRR",e[e.GGG=4]="GGG",e[e.AAA=15]="AAA"}(l||(l={})),function(e){e[e.RGB=0]="RGB",e[e.RGBA=3]="RGBA",e[e.RRR=4]="RRR",e[e.RRRG=5]="RRRG"}(u||(u={}));class E{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=a.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:s.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:o.UNSPECIFIED,colorPrimaries:i.SRGB,transferFunction:i.SRGB,flags:_.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null}}class S{constructor(e,t,r,n){this._dataView=new DataView(e.buffer,e.byteOffset+t,r),this._littleEndian=n,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const r=this._offset;let n=0;for(;this._dataView.getUint8(this._offset)!==t&&n<e;)n++,this._offset++;return n<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,n)}}function f(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}function R(e){const t=new Uint8Array(e.buffer,e.byteOffset,n.length);if(t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]||t[4]!==n[4]||t[5]!==n[5]||t[6]!==n[6]||t[7]!==n[7]||t[8]!==n[8]||t[9]!==n[9]||t[10]!==n[10]||t[11]!==n[11])throw new Error("Missing KTX 2.0 identifier.");const r=new E,a=17*Uint32Array.BYTES_PER_ELEMENT,s=new S(e,n.length,a,!0);r.vkFormat=s._nextUint32(),r.typeSize=s._nextUint32(),r.pixelWidth=s._nextUint32(),r.pixelHeight=s._nextUint32(),r.pixelDepth=s._nextUint32(),r.layerCount=s._nextUint32(),r.faceCount=s._nextUint32();const o=s._nextUint32();r.supercompressionScheme=s._nextUint32();const i=s._nextUint32(),c=s._nextUint32(),_=s._nextUint32(),l=s._nextUint32(),u=s._nextUint64(),R=s._nextUint64(),d=new S(e,n.length+a,3*o*8,!0);for(let n=0;n<o;n++)r.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new S(e,i,c,!0),A={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:{x:p._nextUint8()+1,y:p._nextUint8()+1,z:p._nextUint8()+1,w:p._nextUint8()+1},bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},m=(A.descriptorBlockSize/4-6)/4;for(let n=0;n<m;n++)A.samples[n]={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelID:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:p._nextUint32(),sampleUpper:p._nextUint32()};r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(A);const C=new S(e,_,l,!0);for(;C._offset<l;){const e=C._nextUint32(),t=C._scan(e),n=f(t),a=C._scan(e-t.byteLength);r.keyValue[n]=n.match(/^ktx/i)?f(a):a,e%4&&C._skip(4-e%4)}if(R<=0)return r;const h=new S(e,u,R,!0),T=h._nextUint16(),P=h._nextUint16(),D=h._nextUint32(),g=h._nextUint32(),x=h._nextUint32(),y=h._nextUint32(),B=[];for(let n=0;n<o;n++)B.push({imageFlags:h._nextUint32(),rgbSliceByteOffset:h._nextUint32(),rgbSliceByteLength:h._nextUint32(),alphaSliceByteOffset:h._nextUint32(),alphaSliceByteLength:h._nextUint32()});const G=u+h._offset,M=G+D,w=M+g,b=w+x,O=new Uint8Array(e.buffer,e.byteOffset+G,D),H=new Uint8Array(e.buffer,e.byteOffset+M,g),v=new Uint8Array(e.buffer,e.byteOffset+w,x),L=new Uint8Array(e.buffer,e.byteOffset+b,y);return r.globalData={endpointCount:T,selectorCount:P,imageDescs:B,endpointsData:O,selectorsData:H,tablesData:v,extendedData:L},r}},49125:()=>{}}]);