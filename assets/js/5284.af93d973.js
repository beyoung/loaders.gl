/*! For license information please see 5284.af93d973.js.LICENSE.txt */
(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[5284],{81547:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var i=n(81180),o=n(53982),s=n(78918),r=n(80744),a=n(24088),l=n(33648),c=n(27458),h=n(93844),u=n(59965),d=n(1418),p=n(49764),g=n(44522),m=n(66610),f=n(1674);async function v(e){const t=[];return e.scenes.forEach((e=>{e.traverse((e=>{Object.values(e.model.getUniforms()).forEach((e=>{!1===e.loaded&&t.push(e)}))}))})),await async function(e){for(;e();)await new Promise((e=>requestAnimationFrame(e)))}((()=>t.some((e=>!e.loaded))))}var y=n(17805);const _=[255,255,255,255],S={scenegraph:{type:"object",value:null,async:!0},getScene:e=>e&&e.scenes?"object"==typeof e.scene?e.scene:e.scenes[e.scene||0]:e,getAnimator:e=>e&&e.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:_},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[f.E]};class C extends c.Z{constructor(...e){super(...e),(0,i.Z)(this,"state",void 0)}getShaders(){const e=[h.Z,u.Z];return"pbr"===this.props._lighting&&e.push(p.b),super.getShaders({vs:"#version 300 es\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\nout vec4 vColor;\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    geometry.normal = project_normal(normal);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\nuniform float opacity;\nin vec4 vColor;\n\nout vec4 fragmentColor;\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:_,transition:!0},instanceModelMatrix:y.P})}updateState(e){super.updateState(e);const{props:t,oldProps:n}=e;t.scenegraph!==n.scenegraph?this._updateScenegraph():t._animations!==n._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,t._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:t}=this.context;let n=null;if(e.scenegraph instanceof g.Z)n={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const i=e.scenegraph,o=(0,m.Z)(t,i,this._getModelOptions());n={gltf:i,...o},v(o).then((()=>this.setNeedsRedraw()))}else e.scenegraph&&(r.Z.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),n=e.scenegraph);const i={layer:this,gl:t},o=e.getScene(n,i),s=e.getAnimator(n,i);o instanceof g.Z?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):null!==o&&r.Z.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const t=this.getAttributeManager().getAttributes();e.traverse((e=>{this._setModelAttributes(e.model,t)}))}}_applyAnimationsProp(e,t,n){if(!e||!t||!n)return;const i=t.getAnimations();Object.keys(n).sort().forEach((e=>{const t=n[e];if("*"===e)i.forEach((e=>{Object.assign(e,t)}));else if(Number.isFinite(Number(e))){const n=Number(e);n>=0&&n<i.length?Object.assign(i[n],t):r.Z.warn("animation ".concat(e," not found"))()}else{const n=i.find((({name:t})=>t===e));n?Object.assign(n,t):r.Z.warn("animation ".concat(e," not found"))()}}))}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof g.Z&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let t=null;return e&&(t="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:t,modelOptions:{isInstanced:!0,transpileToGLSL100:!(0,d.D0)(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse((t=>{this._setModelAttributes(t.model,e)}))}draw({moduleParameters:e=null,parameters:t={},context:n}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(n.timeline.getTime()),this.setNeedsRedraw());const{viewport:i}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:r,opacity:a,coordinateSystem:l}=this.props,c=this.getNumInstances();this.state.scenegraph.traverse(((n,{worldMatrix:h})=>{n.model.setInstanceCount(c),n.updateModuleSettings(e),n.draw({parameters:t,uniforms:{sizeScale:o,opacity:a,sizeMinPixels:s,sizeMaxPixels:r,composeModelMatrix:(0,y.X)(i,l),sceneModelMatrix:h,u_Camera:n.model.getUniforms().project_uCameraPosition}})}))}}(0,i.Z)(C,"defaultProps",S),(0,i.Z)(C,"layerName","ScenegraphLayer");var M=n(61307),w=n(15462),x=n(65217);class O extends x.Z{getShaders(){const e=super.getShaders();return e.modules.push(p.b),{...e,vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nuniform bool pickFeatureIds;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec4 uvRegions;\nin vec3 featureIdsPickingColors;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvec2 applyUVRegion(vec2 uv) {\n  #ifdef HAS_UV_REGIONS\n    return fract(uv) * (uvRegions.zw - uvRegions.xy) + uvRegions.xy;\n  #else\n    return uv;\n  #endif\n}\n\nvoid main(void) {\n  vec2 uv = applyUVRegion(texCoords);\n  geometry.uv = uv;\n\n  if (pickFeatureIds) {\n    geometry.pickingColor = featureIdsPickingColors;\n  } else {\n    geometry.pickingColor = instancePickingColors;\n  }\n\n  vTexCoord = uv;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale;\n  vec3 projectedPosition = project_position(positions);\n  position_commonspace = vec4(projectedPosition, 1.0);\n  gl_Position = project_common_position_to_clipspace(position_commonspace);\n\n  geometry.position = position_commonspace;\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\n  geometry.normal = normals_commonspace;\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = uv;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  \n#ifdef MODULE_PBR\n\n  fragColor = vColor * pbr_filterColor(vec4(0));\n  geometry.uv = pbr_vUV;\n  fragColor.a *= opacity;\n\n#else\n\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n#endif\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"}}initializeState(){const{featureIds:e}=this.props;super.initializeState();const t=this.getAttributeManager();e&&t.add({featureIdsPickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateFeatureIdsPickingColors}})}updateState(e){super.updateState(e);const{props:t,oldProps:n}=e;t.pbrMaterial!==n.pbrMaterial&&this.updatePbrMaterialUniforms(t.pbrMaterial)}draw(e){const{featureIds:t}=this.props;this.state.model&&(this.state.model.setUniforms({u_Camera:this.state.model.getUniforms().project_uCameraPosition,pickFeatureIds:Boolean(t)}),super.draw(e))}getModel(e){const{id:t,pbrMaterial:n}=this.props,i=this.parseMaterial(n,e);this.setState({materialParser:i});const o=this.getShaders();var s;(s=e.attributes).COLOR_0||s.colors||(s.colors={constant:!0,value:new Float32Array([1,1,1])});return new w.Z(this.context.gl,{...this.getShaders(),id:t,geometry:e,defines:{...o.defines,...null==i?void 0:i.defines,HAS_UV_REGIONS:e.attributes.uvRegions},parameters:null==i?void 0:i.parameters,isInstanced:!0})}updatePbrMaterialUniforms(e){const{model:t}=this.state;if(t){const{mesh:n}=this.props,i=this.parseMaterial(e,n);this.setState({materialParser:i}),t.setUniforms(i.uniforms)}}parseMaterial(e,t){var n;const i=Boolean(e.pbrMetallicRoughness&&e.pbrMetallicRoughness.baseColorTexture);return null===(n=this.state.materialParser)||void 0===n||n.delete(),new M.Z(this.context.gl,{attributes:{NORMAL:t.attributes.normals,TEXCOORD_0:t.attributes.texCoords},material:{unlit:i,...e},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1})}calculateFeatureIdsPickingColors(e){const t=this.props.featureIds,n=new Uint8ClampedArray(t.length*e.size),i=[];for(let o=0;o<t.length;o++)this.encodePickingColor(t[o],i),n[3*o]=i[0],n[3*o+1]=i[1],n[3*o+2]=i[2];e.value=n}finalizeState(e){var t;super.finalizeState(e),null===(t=this.state.materialParser)||void 0===t||t.delete(),this.setState({materialParser:null})}}(0,i.Z)(O,"layerName","MeshLayer"),(0,i.Z)(O,"defaultProps",{pbrMaterial:{type:"object",value:null},featureIds:{type:"array",value:null,optional:!0}});var P=n(35889),b=n(8580),T=n(5860),E=n(41882);const L=[0],A={getPointColor:{type:"accessor",value:[0,0,0,255]},pointSize:1,data:"",loader:E.u,onTilesetLoad:{type:"function",value:e=>{}},onTileLoad:{type:"function",value:e=>{}},onTileUnload:{type:"function",value:e=>{}},onTileError:{type:"function",value:(e,t,n)=>{}},_getMeshColor:{type:"function",value:e=>[255,255,255]}};class R extends s.Z{constructor(...e){super(...e),(0,i.Z)(this,"state",void 0)}initializeState(){"onTileLoadFail"in this.props&&r.Z.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null,activeViewports:{},lastUpdatedViewports:null}}get isLoaded(){const{tileset3d:e}=this.state;return null!==e&&e.isLoaded()}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({props:e,oldProps:t,changeFlags:n}){if(e.data&&e.data!==t.data&&this._loadTileset(e.data),n.viewportChanged){const{activeViewports:e}=this.state;Object.keys(e).length&&(this._updateTileset(e),this.state.lastUpdatedViewports=e,this.state.activeViewports={})}if(n.propsChanged){const{layerMap:e}=this.state;for(const t in e)e[t].needsUpdate=!0}}activateViewport(e){const{activeViewports:t,lastUpdatedViewports:n}=this.state;this.internalState.viewport=e,t[e.id]=e;const i=null==n?void 0:n[e.id];i&&e.equals(i)||(this.setChangeFlags({viewportChanged:!0}),this.setNeedsUpdate())}getPickingInfo({info:e,sourceLayer:t}){const n=t&&t.props.tile;return e.picked&&(e.object=n),e.sourceTile=n,e}filterSubLayer({layer:e,viewport:t}){const{tile:n}=e.props,{id:i}=t;return n.selected&&n.viewportIds.includes(i)}_updateAutoHighlight(e){const t=e.sourceTile,n=this.state.layerMap[null==t?void 0:t.id];n&&n.layer&&n.layer.updateAutoHighlight(e)}async _loadTileset(e){const{loadOptions:t={}}=this.props;let n=this.props.loader||this.props.loaders;Array.isArray(n)&&(n=n[0]);const i={loadOptions:{...t}};let o=e;if(n.preload){const s=await n.preload(e,t);s.url&&(o=s.url),s.headers&&(i.loadOptions.fetch={...i.loadOptions.fetch,headers:s.headers}),Object.assign(i,s)}const s=await(0,P.z)(o,n,i.loadOptions),r=new b.u(s,{onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileError:this.props.onTileError,...i});this.setState({tileset3d:r,layerMap:{}}),this._updateTileset(this.state.activeViewports),this.props.onTilesetLoad(r)}_onTileLoad(e){const{lastUpdatedViewports:t}=this.state;this.props.onTileLoad(e),this._updateTileset(t),this.setNeedsUpdate()}_onTileUnload(e){delete this.state.layerMap[e.id],this.props.onTileUnload(e)}_updateTileset(e){if(!e)return;const{tileset3d:t}=this.state,{timeline:n}=this.context,i=Object.keys(e).length;n&&i&&t&&t.selectTiles(Object.values(e)).then((e=>{this.state.frameNumber!==e&&this.setState({frameNumber:e})}))}_getSubLayer(e,t){if(!e.content)return null;switch(e.type){case T.R7.POINTCLOUD:return this._makePointCloudLayer(e,t);case T.R7.SCENEGRAPH:return this._make3DModelLayer(e);case T.R7.MESH:return this._makeSimpleMeshLayer(e,t);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(e.content.type))}}_makePointCloudLayer(e,t){const{attributes:n,pointCount:i,constantRGBA:o,cartographicOrigin:s,modelMatrix:r}=e.content,{positions:c,normals:h,colors:u}=n;if(!c)return null;const d=t&&t.props.data||{header:{vertexCount:i},attributes:{POSITION:c,NORMAL:h,COLOR_0:u}},{pointSize:p,getPointColor:g}=this.props;return new(this.getSubLayerClass("pointcloud",l.Z))({pointSize:p},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(e.id),tile:e,data:d,coordinateSystem:a.COORDINATE_SYSTEM.METER_OFFSETS,coordinateOrigin:s,modelMatrix:r,getColor:o||g,_offset:0})}_make3DModelLayer(e){const{gltf:t,instances:n,cartographicOrigin:i,modelMatrix:o}=e.content;return new(this.getSubLayerClass("scenegraph",C))({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(e.id),tile:e,data:n||L,scenegraph:t,coordinateSystem:a.COORDINATE_SYSTEM.METER_OFFSETS,coordinateOrigin:i,modelMatrix:o,getTransformMatrix:e=>e.modelMatrix,getPosition:[0,0,0],_offset:0})}_makeSimpleMeshLayer(e,t){const n=e.content,{attributes:i,indices:s,modelMatrix:r,cartographicOrigin:l,coordinateSystem:c=a.COORDINATE_SYSTEM.METER_OFFSETS,material:h,featureIds:u}=n,{_getMeshColor:d}=this.props,p=t&&t.props.mesh||new o.Z({drawMode:4,attributes:I(i),indices:s});return new(this.getSubLayerClass("mesh",O))(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(e.id),tile:e,mesh:p,data:L,getColor:d(e),pbrMaterial:h,modelMatrix:r,coordinateOrigin:l,coordinateSystem:c,featureIds:u,_offset:0})}renderLayers(){const{tileset3d:e,layerMap:t}=this.state;return e?e.tiles.map((e=>{const n=t[e.id]=t[e.id]||{tile:e};let{layer:i}=n;return e.selected&&(i?n.needsUpdate&&(i=this._getSubLayer(e,i),n.needsUpdate=!1):i=this._getSubLayer(e)),n.layer=i,i})).filter(Boolean):null}}function I(e){const t={};return t.positions={...e.positions,value:new Float32Array(e.positions.value)},e.normals&&(t.normals=e.normals),e.texCoords&&(t.texCoords=e.texCoords),e.colors&&(t.colors=e.colors),e.uvRegions&&(t.uvRegions=e.uvRegions),t}(0,i.Z)(R,"defaultProps",A),(0,i.Z)(R,"layerName","Tile3DLayer")},33648:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(81180),o=n(27458),s=n(93844),r=n(8674),a=n(59965),l=n(24088),c=n(15462),h=n(53982);const u=[0,0,0,255],d=[0,0,1],p={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:e=>e.position},getNormal:{type:"accessor",value:d},getColor:{type:"accessor",value:u},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};class g extends o.Z{getShaders(){return super.getShaders({vs:"#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\nuniform int sizeUnits;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.normal = project_normal(instanceNormals);\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n  vColor = vec4(lightColor, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[s.Z,r.N,a.Z]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:d},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:u}})}updateState(e){const{changeFlags:t,props:n}=e;if(super.updateState(e),t.extensionsChanged){var i;const{gl:e}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(e),this.getAttributeManager().invalidateAll()}t.dataChanged&&function(e){const{header:t,attributes:n}=e;t&&n&&(e.length=t.vertexCount,n.POSITION&&(n.instancePositions=n.POSITION),n.NORMAL&&(n.instanceNormals=n.NORMAL),n.COLOR_0&&(n.instanceColors=n.COLOR_0))}(n.data)}draw({uniforms:e}){const{pointSize:t,sizeUnits:n}=this.props;this.state.model.setUniforms(e).setUniforms({sizeUnits:l.iI[n],radiusPixels:t}).draw()}_getModel(e){const t=[];for(let n=0;n<3;n++){const e=n/3*Math.PI*2;t.push(2*Math.cos(e),2*Math.sin(e),0)}return new c.Z(e,{...this.getShaders(),id:this.props.id,geometry:new h.Z({drawMode:4,attributes:{positions:new Float32Array(t)}}),isInstanced:!0})}}(0,i.Z)(g,"layerName","PointCloudLayer"),(0,i.Z)(g,"defaultProps",p)},65217:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var i=n(81180),o=n(80744),s=n(27458),r=n(93844),a=n(8674),l=n(59965),c=n(53982),h=n(1418),u=n(51621),d=n(15462),p=n(44211),g=n(6948),m=n(17805);var f=n(9231);function v(e,t){(e.COLOR_0||e.colors)&&t||(e.colors={constant:!0,value:new Float32Array([1,1,1])}),o.Z.assert(e.positions||e.POSITION,'no "postions" or "POSITION" attribute in mesh')}function y(e,t){if(e.attributes)return v(e.attributes,t),e instanceof c.Z?e:new c.Z(e);if(e.positions||e.POSITION)return v(e,t),new c.Z({attributes:e});throw Error("Invalid mesh")}const _={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}};class S extends s.Z{constructor(...e){super(...e),(0,i.Z)(this,"state",void 0)}getShaders(){const e=!(0,h.D0)(this.context.gl),t={};return(0,p.U6)(this.context.gl,g.h.GLSL_DERIVATIVES)&&(t.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    geometry.worldPosition += pos;\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  DECKGL_FILTER_COLOR(color, geometry);\n\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n}\n",modules:[r.Z,a.s,l.Z],transpileToGLSL100:e,defines:t})}getBounds(){var e;if(this.props._instanced)return super.getBounds();let t=this.state.positionBounds;if(t)return t;const{mesh:n}=this.props;if(!n)return null;if(t=null===(e=n.header)||void 0===e?void 0:e.boundingBox,!t){const{attributes:e}=y(n,this.props._useMeshColors);e.POSITION=e.POSITION||e.positions,t=(0,f.v)(e)}return this.state.positionBounds=t,t}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:m.P}),this.setState({emptyTexture:new u.Z(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:i}=e;if(t.mesh!==n.mesh||i.extensionsChanged){var o;if(this.state.positionBounds=null,null===(o=this.state.model)||void 0===o||o.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const e=t.mesh.attributes||t.mesh;this.setState({hasNormals:Boolean(e.NORMAL||e.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==n.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:t}=this.context,{sizeScale:n,coordinateSystem:i,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:n,composeModelMatrix:!o||(0,m.X)(t,i),flatShading:!this.state.hasNormals}).draw()}getModel(e){const t=new d.Z(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:y(e,this.props._useMeshColors),isInstanced:!0}),{texture:n}=this.props,{emptyTexture:i}=this.state;return t.setUniforms({sampler:n||i,hasTexture:Boolean(n)}),t}setTexture(e){const{emptyTexture:t,model:n}=this.state;n&&n.setUniforms({sampler:e||t,hasTexture:Boolean(e)})}}(0,i.Z)(S,"defaultProps",_),(0,i.Z)(S,"layerName","SimpleMeshLayer")},17805:(e,t,n)=>{"use strict";n.d(t,{P:()=>h,X:()=>u});var i=n(38550),o=n(24088);const s=Math.PI/180,r=new Float32Array(16),a=new Float32Array(12);function l(e,t,n){const i=t[0]*s,o=t[1]*s,r=t[2]*s,a=Math.sin(r),l=Math.sin(i),c=Math.sin(o),h=Math.cos(r),u=Math.cos(i),d=Math.cos(o),p=n[0],g=n[1],m=n[2];e[0]=p*d*u,e[1]=p*c*u,e[2]=p*-l,e[3]=g*(-c*h+d*l*a),e[4]=g*(d*h+c*l*a),e[5]=g*u*a,e[6]=m*(c*a+d*l*h),e[7]=m*(-d*a+c*l*h),e[8]=m*u*h}function c(e){return e[0]=e[0],e[1]=e[1],e[2]=e[2],e[3]=e[4],e[4]=e[5],e[5]=e[6],e[6]=e[8],e[7]=e[9],e[8]=e[10],e[9]=e[12],e[10]=e[13],e[11]=e[14],e.subarray(0,12)}const h={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(e,{startRow:t,endRow:n}){const{data:o,getOrientation:s,getScale:h,getTranslation:u,getTransformMatrix:d}=this.props,p=Array.isArray(d),g=p&&16===d.length,m=Array.isArray(h),f=Array.isArray(s),v=Array.isArray(u),y=g||!p&&Boolean(d(o[0]));e.constant=y?g:f&&m&&v;const _=e.value;if(e.constant){let t;if(y)r.set(d),t=c(r);else{t=a;l(t,s,h),t.set(u,9)}e.value=new Float32Array(t)}else{let p=t*e.size;const{iterable:S,objectInfo:C}=(0,i.jB)(o,t,n);for(const e of S){let t;if(C.index++,y)r.set(g?d:d(e,C)),t=c(r);else{t=a;l(t,f?s:s(e,C),m?h:h(e,C)),t.set(v?u:u(e,C),9)}_[p++]=t[0],_[p++]=t[1],_[p++]=t[2],_[p++]=t[3],_[p++]=t[4],_[p++]=t[5],_[p++]=t[6],_[p++]=t[7],_[p++]=t[8],_[p++]=t[9],_[p++]=t[10],_[p++]=t[11]}}}};function u(e,t){return t===o.COORDINATE_SYSTEM.CARTESIAN||t===o.COORDINATE_SYSTEM.METER_OFFSETS||t===o.COORDINATE_SYSTEM.DEFAULT&&!e.isGeospatial}},37069:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(89521),o=n(14034),s=n(86281),r=n(31437),a=n(1031);class l extends i.Z{constructor(e=0,t=0){super(2),(0,o.kJ)(e)&&1===arguments.length?this.copy(e):(o.vc.debug&&((0,s.u5)(e),(0,s.u5)(t)),this[0]=e,this[1]=t)}set(e,t){return this[0]=e,this[1]=t,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this.check()}fromObject(e){return o.vc.debug&&((0,s.u5)(e.x),(0,s.u5)(e.y)),this[0]=e.x,this[1]=e.y,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return r.fF(this,this,e),this.check()}transformAsVector(e){return(0,a.pb)(this,this,e),this.check()}transformByMatrix3(e){return r.kK(this,this,e),this.check()}transformByMatrix2x3(e){return r.iu(this,this,e),this.check()}transformByMatrix2(e){return r.c(this,this,e),this.check()}}},98759:(e,t,n)=>{"use strict";n.d(t,{H:()=>I});var i=n(81180),o=n(43855),s=n(79057),r=n(50394),a=n(85451),l=n(14034),c=n(77160);const h=6378137,u=6378137,d=6356752.314245179;Math.max(h,u,d);function p(e){return e}new o.Z;function g(e,t=[],n=p){return"longitude"in e?(t[0]=n(e.longitude),t[1]=n(e.latitude),t[2]=e.height):"x"in e?(t[0]=n(e.x),t[1]=n(e.y),t[2]=e.z):(t[0]=n(e[0]),t[1]=n(e[1]),t[2]=e[2]),t}function m(e,t,n=p){return"longitude"in t?(t.longitude=n(e[0]),t.latitude=n(e[1]),t.height=e[2]):"x"in t?(t.x=n(e[0]),t.y=n(e[1]),t.z=e[2]):(t[0]=n(e[0]),t[1]=n(e[1]),t[2]=e[2]),t}const f=new o.Z,v=new o.Z,y=new o.Z;const _=new o.Z,S={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},C={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},M={east:new o.Z,north:new o.Z,up:new o.Z,west:new o.Z,south:new o.Z,down:new o.Z},w=new o.Z,x=new o.Z,O=new o.Z;function P(e,t,n,i,o,s){const a=S[t]&&S[t][n];let c,h,u;(0,r.Z)(a&&(!i||i===a));const d=_.copy(o);if((0,l.fS)(d.x,0,1e-14)&&(0,l.fS)(d.y,0,1e-14)){const e=Math.sign(d.z);c=w.fromArray(C[t]),"east"!==t&&"west"!==t&&c.scale(e),h=x.fromArray(C[n]),"east"!==n&&"west"!==n&&h.scale(e),u=O.fromArray(C[i]),"east"!==i&&"west"!==i&&u.scale(e)}else{const{up:o,east:s,north:r}=M;s.set(-d.y,d.x,0).normalize(),e.geodeticSurfaceNormal(d,o),r.copy(o).cross(s);const{down:a,west:l,south:p}=M;a.copy(o).scale(-1),l.copy(s).scale(-1),p.copy(r).scale(-1),c=M[t],h=M[n],u=M[i]}return s[0]=c.x,s[1]=c.y,s[2]=c.z,s[3]=0,s[4]=h.x,s[5]=h.y,s[6]=h.z,s[7]=0,s[8]=u.x,s[9]=u.y,s[10]=u.z,s[11]=0,s[12]=d.x,s[13]=d.y,s[14]=d.z,s[15]=1,s}const b=new o.Z,T=new o.Z,E=new o.Z,L=new o.Z,A=new o.Z,R=new o.Z;class I{constructor(e=0,t=0,n=0){(0,i.Z)(this,"radii",void 0),(0,i.Z)(this,"radiiSquared",void 0),(0,i.Z)(this,"radiiToTheFourth",void 0),(0,i.Z)(this,"oneOverRadii",void 0),(0,i.Z)(this,"oneOverRadiiSquared",void 0),(0,i.Z)(this,"minimumRadius",void 0),(0,i.Z)(this,"maximumRadius",void 0),(0,i.Z)(this,"centerToleranceSquared",s.Z.EPSILON1),(0,i.Z)(this,"squaredXOverSquaredZ",void 0),(0,r.Z)(e>=0),(0,r.Z)(t>=0),(0,r.Z)(n>=0),this.radii=new o.Z(e,t,n),this.radiiSquared=new o.Z(e*e,t*t,n*n),this.radiiToTheFourth=new o.Z(e*e*e*e,t*t*t*t,n*n*n*n),this.oneOverRadii=new o.Z(0===e?0:1/e,0===t?0:1/t,0===n?0:1/n),this.oneOverRadiiSquared=new o.Z(0===e?0:1/(e*e),0===t?0:1/(t*t),0===n?0:1/(n*n)),this.minimumRadius=Math.min(e,t,n),this.maximumRadius=Math.max(e,t,n),0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}equals(e){return this===e||Boolean(e&&this.radii.equals(e.radii))}toString(){return this.radii.toString()}cartographicToCartesian(e,t=[0,0,0]){const n=T,i=E,[,,o]=e;this.geodeticSurfaceNormalCartographic(e,n),i.copy(this.radiiSquared).scale(n);const s=Math.sqrt(n.dot(i));return i.scale(1/s),n.scale(o),i.add(n),i.to(t)}cartesianToCartographic(e,t=[0,0,0]){R.from(e);const n=this.scaleToGeodeticSurface(R,L);if(!n)return;const i=this.geodeticSurfaceNormal(n,T),o=A;o.copy(R).subtract(n);const s=Math.atan2(i.y,i.x),r=Math.asin(i.z),a=Math.sign(c.AK(o,R))*c.kE(o);return m([s,r,a],t,l.vc._cartographicRadians?p:l.Ux)}eastNorthUpToFixedFrame(e,t=new a.Z){return P(this,"east","north","up",e,t)}localFrameToFixedFrame(e,t,n,i,o=new a.Z){return P(this,e,t,n,i,o)}geocentricSurfaceNormal(e,t=[0,0,0]){return b.from(e).normalize().to(t)}geodeticSurfaceNormalCartographic(e,t=[0,0,0]){const n=function(e,t=[]){return g(e,t,l.vc._cartographicRadians?p:l.Yr)}(e),i=n[0],o=n[1],s=Math.cos(o);return b.set(s*Math.cos(i),s*Math.sin(i),Math.sin(o)).normalize(),b.to(t)}geodeticSurfaceNormal(e,t=[0,0,0]){return b.from(e).scale(this.oneOverRadiiSquared).normalize().to(t)}scaleToGeodeticSurface(e,t){return function(e,t,n=[]){const{oneOverRadii:i,oneOverRadiiSquared:o,centerToleranceSquared:r}=t;f.from(e);const a=f.x,l=f.y,c=f.z,h=i.x,u=i.y,d=i.z,p=a*a*h*h,g=l*l*u*u,m=c*c*d*d,_=p+g+m,S=Math.sqrt(1/_);if(!Number.isFinite(S))return;const C=v;if(C.copy(e).scale(S),_<r)return C.to(n);const M=o.x,w=o.y,x=o.z,O=y;O.set(C.x*M*2,C.y*w*2,C.z*x*2);let P,b,T,E,L=(1-S)*f.len()/(.5*O.len()),A=0;do{L-=A,P=1/(1+L*M),b=1/(1+L*w),T=1/(1+L*x);const e=P*P,t=b*b,n=T*T;E=p*e+g*t+m*n-1,A=E/(-2*(p*(e*P)*M+g*(t*b)*w+m*(n*T)*x))}while(Math.abs(E)>s.Z.EPSILON12);return f.scale([P,b,T]).to(n)}(e,this,t)}scaleToGeocentricSurface(e,t=[0,0,0]){L.from(e);const n=L.x,i=L.y,o=L.z,s=this.oneOverRadiiSquared,r=1/Math.sqrt(n*n*s.x+i*i*s.y+o*o*s.z);return L.multiplyScalar(r).to(t)}transformPositionToScaledSpace(e,t=[0,0,0]){return L.from(e).scale(this.oneOverRadii).to(t)}transformPositionFromScaledSpace(e,t=[0,0,0]){return L.from(e).scale(this.radii).to(t)}getSurfaceNormalIntersectionWithZAxis(e,t=0,n=[0,0,0]){(0,r.Z)((0,l.fS)(this.radii.x,this.radii.y,s.Z.EPSILON15)),(0,r.Z)(this.radii.z>0),L.from(e);const i=L.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(i)>=this.radii.z-t))return L.set(0,0,i).to(n)}}(0,i.Z)(I,"WGS84",new I(h,u,d))},20514:function(e,t){var n,i,o;i=[],void 0===(o="function"==typeof(n=function(){"use strict";function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var n={},i={};function o(e,t){var o,s,a;return t?(a=0<=(e>>>=0)&&e<256)&&(s=i[e])?s:(o=r(e,(0|e)<0?-1:0,!0),a&&(i[e]=o),o):(a=-128<=(e|=0)&&e<128)&&(s=n[e])?s:(o=r(e,e<0?-1:0,!1),a&&(n[e]=o),o)}function s(e,t){if(isNaN(e)||!isFinite(e))return t?f:m;if(t){if(e<0)return f;if(e>=d)return C}else{if(e<=-p)return M;if(e+1>=p)return S}return e<0?s(-e,t).neg():r(e%u|0,e/u|0,t)}function r(t,n,i){return new e(t,n,i)}e.fromInt=o,e.fromNumber=s,e.fromBits=r;var a=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return l(e.substring(1),t,n).neg();for(var o=s(a(n,8)),r=m,c=0;c<e.length;c+=8){var h=Math.min(8,e.length-c),u=parseInt(e.substring(c,c+h),n);if(h<8){var d=s(a(n,h));r=r.mul(d).add(s(u))}else r=(r=r.mul(o)).add(s(u))}return r.unsigned=t,r}function c(t){return t instanceof e?t:"number"==typeof t?s(t):"string"==typeof t?l(t):r(t.low,t.high,t.unsigned)}e.fromString=l,e.fromValue=c;var h=65536,u=h*h,d=u*u,p=d/2,g=o(1<<24),m=o(0);e.ZERO=m;var f=o(0,!0);e.UZERO=f;var v=o(1);e.ONE=v;var y=o(1,!0);e.UONE=y;var _=o(-1);e.NEG_ONE=_;var S=r(-1,2147483647,!1);e.MAX_VALUE=S;var C=r(-1,-1,!0);e.MAX_UNSIGNED_VALUE=C;var M=r(0,-2147483648,!1);e.MIN_VALUE=M;var w=e.prototype;return w.toInt=function(){return this.unsigned?this.low>>>0:this.low},w.toNumber=function(){return this.unsigned?(this.high>>>0)*u+(this.low>>>0):this.high*u+(this.low>>>0)},w.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(M)){var t=s(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=s(a(e,6),this.unsigned),r=this,l="";;){var c=r.div(o),h=(r.sub(c.mul(o)).toInt()>>>0).toString(e);if((r=c).isZero())return h+l;for(;h.length<6;)h="0"+h;l=""+h+l}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBitsUnsigned=function(){return this.low>>>0},w.getNumBitsAbs=function(){if(this.isNegative())return this.eq(M)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},w.isZero=function(){return 0===this.high&&0===this.low},w.isNegative=function(){return!this.unsigned&&this.high<0},w.isPositive=function(){return this.unsigned||this.high>=0},w.isOdd=function(){return 1==(1&this.low)},w.isEven=function(){return 0==(1&this.low)},w.equals=function(e){return t(e)||(e=c(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},w.eq=w.equals,w.notEquals=function(e){return!this.eq(e)},w.neq=w.notEquals,w.lessThan=function(e){return this.comp(e)<0},w.lt=w.lessThan,w.lessThanOrEqual=function(e){return this.comp(e)<=0},w.lte=w.lessThanOrEqual,w.greaterThan=function(e){return this.comp(e)>0},w.gt=w.greaterThan,w.greaterThanOrEqual=function(e){return this.comp(e)>=0},w.gte=w.greaterThanOrEqual,w.compare=function(e){if(t(e)||(e=c(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},w.comp=w.compare,w.negate=function(){return!this.unsigned&&this.eq(M)?M:this.not().add(v)},w.neg=w.negate,w.add=function(e){t(e)||(e=c(e));var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,a=e.high>>>16,l=65535&e.high,h=e.low>>>16,u=0,d=0,p=0,g=0;return p+=(g+=s+(65535&e.low))>>>16,d+=(p+=o+h)>>>16,u+=(d+=i+l)>>>16,u+=n+a,r((p&=65535)<<16|(g&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},w.subtract=function(e){return t(e)||(e=c(e)),this.add(e.neg())},w.sub=w.subtract,w.multiply=function(e){if(this.isZero())return m;if(t(e)||(e=c(e)),e.isZero())return m;if(this.eq(M))return e.isOdd()?M:m;if(e.eq(M))return this.isOdd()?M:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,l=e.high>>>16,h=65535&e.high,u=e.low>>>16,d=65535&e.low,p=0,f=0,v=0,y=0;return v+=(y+=a*d)>>>16,f+=(v+=o*d)>>>16,v&=65535,f+=(v+=a*u)>>>16,p+=(f+=i*d)>>>16,f&=65535,p+=(f+=o*u)>>>16,f&=65535,p+=(f+=a*h)>>>16,p+=n*d+i*u+o*h+a*l,r((v&=65535)<<16|(y&=65535),(p&=65535)<<16|(f&=65535),this.unsigned)},w.mul=w.multiply,w.divide=function(e){if(t(e)||(e=c(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?f:m;var n,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return f;if(e.gt(this.shru(1)))return y;o=f}else{if(this.eq(M))return e.eq(v)||e.eq(_)?M:e.eq(M)?v:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?v:_:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(M))return this.unsigned?f:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var r=Math.ceil(Math.log(n)/Math.LN2),l=r<=48?1:a(2,r-48),h=s(n),u=h.mul(e);u.isNegative()||u.gt(i);)u=(h=s(n-=l,this.unsigned)).mul(e);h.isZero()&&(h=v),o=o.add(h),i=i.sub(u)}return o},w.div=w.divide,w.modulo=function(e){return t(e)||(e=c(e)),this.sub(this.div(e).mul(e))},w.mod=w.modulo,w.not=function(){return r(~this.low,~this.high,this.unsigned)},w.and=function(e){return t(e)||(e=c(e)),r(this.low&e.low,this.high&e.high,this.unsigned)},w.or=function(e){return t(e)||(e=c(e)),r(this.low|e.low,this.high|e.high,this.unsigned)},w.xor=function(e){return t(e)||(e=c(e)),r(this.low^e.low,this.high^e.high,this.unsigned)},w.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):r(0,this.low<<e-32,this.unsigned)},w.shl=w.shiftLeft,w.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):r(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},w.shr=w.shiftRight,w.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0==(e&=63))return this;var n=this.high;return e<32?r(this.low>>>e|n<<32-e,n>>>e,this.unsigned):r(32===e?n:n>>>e-32,0,this.unsigned)},w.shru=w.shiftRightUnsigned,w.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},w.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},w.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},w.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},w.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e})?n.apply(t,i):n)||(e.exports=o)},25811:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>i});const i=new(n(18686).Z)({id:"@probe.gl/log"})}}]);