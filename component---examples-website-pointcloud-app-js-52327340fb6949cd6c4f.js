/*! For license information please see component---examples-website-pointcloud-app-js-52327340fb6949cd6c4f.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{25:function(t,e){},26:function(t,e){},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"7ueG":function(t,e,r){"use strict";var n=r("I+eb"),o=r("WKiH").start,i=r("yNLB")("trimStart"),a=i?function(){return o(this)}:"".trimStart;n({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})},FR1t:function(t,e,r){"use strict";r.d(e,"a",(function(){return j}));var n=r("rePB"),o=r("1OyB"),i=r("vuIU"),a=r("ReuC"),s=r("Ji7U"),c=r("md7G"),u=r("foSv"),l=r("K4gp"),p=r("DAeo"),f=r("BQ9P"),h=r("V3d6"),d=r("K7jV"),v=r("ykdB"),m=r("0i8A");function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(u.a)(t);if(e){var o=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}var O=[0,0,0,255],w=[0,0,1],x={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:function(t){return t.position}},getNormal:{type:"accessor",value:w},getColor:{type:"accessor",value:O},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};var j=function(t){Object(s.a)(r,t);var e=g(r);function r(){return Object(o.a)(this,r),e.apply(this,arguments)}return Object(i.a)(r,[{key:"getShaders",value:function(){return Object(a.a)(Object(u.a)(r.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME point-cloud-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceNormals;\nattribute vec4 instanceColors;\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusPixels;\nuniform int sizeUnits;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.normal = project_normal(instanceNormals);\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\n  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\n  vColor = vec4(lightColor, instanceColors.a * opacity);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME point-cloud-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\nvarying vec2 unitPosition;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition);\n\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  gl_FragColor = vColor;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[l.a,p.a,f.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:w},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:O}})}},{key:"updateState",value:function(t){var e,n,o,i=t.props,s=t.oldProps,c=t.changeFlags;if(Object(a.a)(Object(u.a)(r.prototype),"updateState",this).call(this,{props:i,oldProps:s,changeFlags:c}),c.extensionsChanged){var l,p=this.context.gl;null===(l=this.state.model)||void 0===l||l.delete(),this.state.model=this._getModel(p),this.getAttributeManager().invalidateAll()}c.dataChanged&&(e=i.data,n=e.header,o=e.attributes,n&&o&&(e.length=n.vertexCount,o.POSITION&&(o.instancePositions=o.POSITION),o.NORMAL&&(o.instanceNormals=o.NORMAL),o.COLOR_0&&(o.instanceColors=o.COLOR_0)))}},{key:"draw",value:function(t){var e=t.uniforms,r=this.props,n=r.pointSize,o=r.sizeUnits;this.state.model.setUniforms(e).setUniforms({sizeUnits:h.d[o],radiusPixels:n}).draw()}},{key:"_getModel",value:function(t){for(var e=[],r=0;r<3;r++){var n=r/3*Math.PI*2;e.push(2*Math.cos(n),2*Math.sin(n),0)}return new v.a(t,y(y({},this.getShaders()),{},{id:this.props.id,geometry:new m.a({drawMode:4,attributes:{positions:new Float32Array(e)}}),isInstanced:!0}))}}]),r}(d.a);j.layerName="PointCloudLayer",j.defaultProps=x},K5R3:function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return l}));var n=r("o0o1"),o=r.n(n),i=(r("wcNg"),r("16gb")),a=r("iGi1"),s=r("Zova");function c(t){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(o.a.mark((function t(e,r){var n,a,c,u,l,p,f,h;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===r&&(r={}),n=new TextDecoder(void 0,r),a=!0,c=!1,t.prev=4,l=Object(s.a)(e);case 6:return t.next=8,Object(i.a)(l.next());case 8:return p=t.sent,a=p.done,t.next=12,Object(i.a)(p.value);case 12:if(f=t.sent,a){t.next=20;break}return h=f,t.next=17,"string"==typeof h?h:n.decode(h,{stream:!0});case 17:a=!0,t.next=6;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(4),c=!0,u=t.t0;case 26:if(t.prev=26,t.prev=27,a||null==l.return){t.next=31;break}return t.next=31,Object(i.a)(l.return());case 31:if(t.prev=31,!c){t.next=34;break}throw u;case 34:return t.finish(31);case 35:return t.finish(26);case 36:case"end":return t.stop()}}),t,null,[[4,22,26,36],[27,,31,35]])})))).apply(this,arguments)}function l(t){return p.apply(this,arguments)}function p(){return(p=Object(a.a)(o.a.mark((function t(e){var r,n,a,c,u,l,p,f,h;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r="",n=!0,a=!1,t.prev=3,u=Object(s.a)(e);case 5:return t.next=7,Object(i.a)(u.next());case 7:return l=t.sent,n=l.done,t.next=11,Object(i.a)(l.value);case 11:if(p=t.sent,n){t.next=26;break}r+=p,f=void 0;case 16:if(!((f=r.indexOf("\n"))>=0)){t.next=23;break}return h=r.slice(0,f+1),r=r.slice(f+1),t.next=21,h;case 21:t.next=16;break;case 23:n=!0,t.next=5;break;case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(3),a=!0,c=t.t0;case 32:if(t.prev=32,t.prev=33,n||null==u.return){t.next=37;break}return t.next=37,Object(i.a)(u.return());case 37:if(t.prev=37,!a){t.next=40;break}throw c;case 40:return t.finish(37);case 41:return t.finish(32);case 42:if(!(r.length>0)){t.next=45;break}return t.next=45,r;case 45:case"end":return t.stop()}}),t,null,[[3,28,32,42],[33,,37,41]])})))).apply(this,arguments)}},WJkJ:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},WKiH:function(t,e,r){var n=r("HYAF"),o="["+r("WJkJ")+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(a,"")),r}};t.exports={start:s(1),end:s(2),trim:s(3)}},mVup:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return De})),r.d(e,"renderToDOM",(function(){return Ae}));var n=r("rePB"),o=r("JX7q"),i=r("dI71"),a=r("q1tI"),s=r.n(a),c=r("i8i4"),u=r("yYqN"),l=r("RPaY"),p=r("V3d6"),f=r("ODXe"),h=r("1OyB"),d=r("vuIU"),v=r("Ji7U"),m=r("md7G"),b=r("foSv"),y=r("nICr"),g=r("e/LK"),O=r("Nw31"),w=r("v88f"),x=r("a3TU"),j=r("sxJW"),_=r("rSc4"),S=r("F8bt");function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(b.a)(t);if(e){var o=Object(b.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(m.a)(this,r)}}var I={rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},E=function(t){Object(v.a)(r,t);var e=k(r);function r(t){var n,o=t.makeViewport,i=t.width,a=t.height,s=t.rotationX,c=void 0===s?I.rotationX:s,u=t.rotationOrbit,l=void 0===u?I.rotationOrbit:u,p=t.target,f=void 0===p?I.target:p,d=t.zoom,v=void 0===d?I.zoom:d,m=t.minRotationX,b=void 0===m?I.minRotationX:m,y=t.maxRotationX,g=void 0===y?I.maxRotationX:y,O=t.minZoom,w=void 0===O?I.minZoom:O,x=t.maxZoom,j=void 0===x?I.maxZoom:x,_=t.startPanPosition,S=t.startRotatePos,P=t.startRotationX,C=t.startRotationOrbit,k=t.startZoomPosition,E=t.startZoom;return Object(h.a)(this,r),(n=e.call(this,{width:i,height:a,rotationX:c,rotationOrbit:l,target:f,zoom:v,minRotationX:b,maxRotationX:g,minZoom:w,maxZoom:j}))._state={startPanPosition:_,startRotatePos:S,startRotationX:P,startRotationOrbit:C,startZoomPosition:k,startZoom:E},n.makeViewport=o,n}return Object(d.a)(r,[{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedState({startPanPosition:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,r=t.startPosition,n=this._state.startPanPosition||r;if(!n)return this;var o=this.makeViewport(this._viewportProps).panByPosition(n,e);return this._getUpdatedState(o)}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null})}},{key:"rotateStart",value:function(t){var e=t.pos;return this._getUpdatedState({startRotatePos:e,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(t){var e,r=t.pos,n=t.deltaAngleX,o=void 0===n?0:n,i=t.deltaAngleY,a=void 0===i?0:i,s=this._state,c=s.startRotatePos,u=s.startRotationX,l=s.startRotationOrbit,p=this._viewportProps,f=p.width,h=p.height;if(!c||!Number.isFinite(u)||!Number.isFinite(l))return this;if(r){var d=(r[0]-c[0])/f;(u<-90||u>90)&&(d*=-1),e={rotationX:u+180*((r[1]-c[1])/h),rotationOrbit:l+180*d}}else e={rotationX:u+a,rotationOrbit:l+o};return this._getUpdatedState(e)}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),r=C({},this._viewportProps),n=r.rotationOrbit;return Math.abs(n-e.rotationOrbit)>180&&(r.rotationOrbit=n<0?n+360:n-360),r}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,r=t.startPos,n=t.scale,o=this._viewportProps.zoom,i=this._state,a=i.startZoom,s=i.startZoomPosition;Number.isFinite(a)||(a=o,s=this._unproject(r)||this._unproject(e));var c=this._calculateNewZoom({scale:n,startZoom:a}),u=this.makeViewport(C(C({},this._viewportProps),{},{zoom:c}));return this._getUpdatedState(C({zoom:c},u.panByPosition(s,e)))}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}},{key:"moveLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([-t,0])}},{key:"moveRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([t,0])}},{key:"moveUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,-t])}},{key:"moveDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,t])}},{key:"rotateLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-t})}},{key:"rotateRight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+t})}},{key:"rotateUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX-t})}},{key:"rotateDown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this._viewportProps.rotationX+t})}},{key:"_unproject",value:function(t){var e=this.makeViewport(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,r=t.startZoom,n=this._viewportProps,o=n.maxZoom,i=n.minZoom;Number.isFinite(r)||(r=this._viewportProps.zoom);var a=r+Math.log2(e);return Object(x.a)(a,i,o)}},{key:"_panFromCenter",value:function(t){var e=this._viewportProps,r=e.width,n=e.height,o=e.target;return this.pan({startPosition:o,pos:[r/2+t[0],n/2+t[1]]})}},{key:"_getUpdatedState",value:function(t){return new this.constructor(C(C(C({},this._viewportProps),this._state),t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,r=t.minZoom,n=t.zoom,o=t.maxRotationX,i=t.minRotationX,a=t.rotationOrbit;return t.zoom=Object(x.a)(n,r,e),t.rotationX=Object(x.a)(t.rotationX,i,o),(a<-180||a>180)&&(t.rotationOrbit=Object(S.d)(a+180,360)-180),t}}]),r}(_.a),z=function(t){Object(v.a)(r,t);var e=k(r);function r(t){return Object(h.a)(this,r),e.call(this,E,t)}return Object(d.a)(r,[{key:"linearTransitionProps",get:function(){return["target","zoom","rotationX","rotationOrbit"]}}]),r}(j.a);function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(b.a)(t);if(e){var o=Object(b.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(m.a)(this,r)}}var R=Math.PI/180;function U(t){var e=t.height,r=t.focalDistance,n=t.orbitAxis,o=t.rotationX,i=t.rotationOrbit,a=t.zoom,s="Z"===n?[0,0,1]:[0,1,0],c="Z"===n?[0,-r,0]:[0,0,r],u=(new O.a).lookAt({eye:c,up:s});u.rotateX(o*R),"Z"===n?u.rotateZ(i*R):u.rotateY(i*R);var l=Math.pow(2,a)/(e||1);return u.scale(l),u}var N=function(t){Object(v.a)(r,t);var e=F(r);function r(t){var i;Object(h.a)(this,r);var a=t.height,s=t.projectionMatrix,c=t.fovy,u=void 0===c?50:c,l=t.orbitAxis,p=t.target,f=void 0===p?[0,0,0]:p,d=t.rotationX,v=void 0===d?0:d,m=t.rotationOrbit,b=void 0===m?0:m,y=t.zoom,g=void 0===y?0:y,O=s?s[5]/2:Object(w.e)(u);return i=e.call(this,A(A({},t),{},{longitude:null,viewMatrix:U({height:a,focalDistance:O,orbitAxis:l,rotationX:v,rotationOrbit:b,zoom:g}),fovy:u,focalDistance:O,position:f,zoom:g})),Object(n.a)(Object(o.a)(i),"projectedCenter",void 0),i.projectedCenter=i.project(i.center),i}return Object(d.a)(r,[{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.topLeft,n=void 0===r||r,o=Object(f.a)(t,3),i=o[0],a=o[1],s=o[2],c=void 0===s?this.projectedCenter[2]:s,u=n?a:this.height-a,l=Object(w.n)([i,u,c],this.pixelUnprojectionMatrix),p=Object(f.a)(l,3),h=p[0],d=p[1],v=p[2];return[h,d,v]}},{key:"panByPosition",value:function(t,e){var r=this.project(t),n=[this.width/2+r[0]-e[0],this.height/2+r[1]-e[1],this.projectedCenter[2]];return{target:this.unproject(n)}}}]),r}(g.a);Object(n.a)(N,"displayName","OrbitView");var L=function(t){Object(v.a)(r,t);var e=F(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.a)(this,r);var n=t.orbitAxis,o=void 0===n?"Z":n;return e.call(this,A(A({},t),{},{orbitAxis:o,type:N}))}return Object(d.a)(r,[{key:"controller",get:function(){return this._getControllerProps({type:z})}}]),r}(y.a),T=r("FR1t"),M=r("F2Cy"),V=r("o0o1"),X=r.n(V),Z=(r("wcNg"),r("HaE+")),B={name:"LAS",id:"las",module:"las",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",worker:!0,extensions:["las","laz"],mimeTypes:["application/octet-stream"],text:!0,binary:!0,tests:["LAS"],options:{las:{shape:"mesh",fp64:!1,skip:1,colorDepth:8}}},J=r("KN2Q"),H=r("jQLd"),K=r("sUUH"),G=null,Y={0:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15)}},1:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15)}},2:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15),color:[t.getUint16(20,!0),t.getUint16(22,!0),t.getUint16(24,!0)]}},3:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15),color:[t.getUint16(28,!0),t.getUint16(30,!0),t.getUint16(32,!0)]}}};function W(t,e,r,n){void 0===e&&(e={}),n=void 0===n||0===n?1:n;var o=new e(t.slice(r,r+e.BYTES_PER_ELEMENT*n));if(1===n)return o[0];for(var i=[],a=0;a<n;a++)i.push(o[a]);return i}function q(t){var e=131,r={pointsOffset:W(t,Uint32Array,96),pointsFormatId:W(t,Uint8Array,104),pointsStructSize:W(t,Uint16Array,105),pointsCount:W(t,Uint32Array,107),scale:W(t,Float64Array,e,3)};e+=24,r.offset=W(t,Float64Array,e,3),e+=24;var n=W(t,Float64Array,e,6);return e+=48,r.maxs=[n[0],n[2],n[4]],r.mins=[n[1],n[3],n[5]],r}var $=function(){function t(t){this.readOffset=0,this.header={pointsOffset:0,pointsFormatId:0,pointsStructSize:0,pointsCount:0,scale:[0,0,0],offset:[0,0,0],maxs:[0],mins:[0],totalToRead:0,totalRead:0,versionAsString:"",isCompressed:!0},this.arraybuffer=t}var e=t.prototype;return e.open=function(){return!0},e.getHeader=function(){return this.header=q(this.arraybuffer),this.header},e.readData=function(t,e){var r=this.header,n=this.arraybuffer;if(!r)throw new Error("Cannot start reading data till a header request is issued");var o,i=this.readOffset;if(e<=1){t=Math.min(t,r.pointsCount-i);var a=(o=r.pointsOffset+i*r.pointsStructSize)+t*r.pointsStructSize;return i+=t,this.readOffset=i,{buffer:n.slice(o,a),count:t,hasMoreData:i<r.pointsCount}}for(var s=Math.min(t*e,r.pointsCount-i),c=Math.ceil(s/e),u=0,l=new Uint8Array(c*r.pointsStructSize),p=0;p<s;p++){if(p%e==0){o=r.pointsOffset+i*r.pointsStructSize;var f=new Uint8Array(n,o,r.pointsStructSize);l.set(f,u*r.pointsStructSize),u++}i++}return this.readOffset=i,{buffer:l.buffer,count:u,hasMoreData:i<r.pointsCount}},e.close=function(){return this.arraybuffer=null,!0},t}(),Q=function(){function t(t){this.instance=null,this.header=null,this.arraybuffer=t,G||(G=Object(K.a)())}var e=t.prototype;return e.open=function(){try{var t=this.arraybuffer;this.instance=new G.LASZip;var e=new Uint8Array(t),r=G._malloc(t.byteLength);return this.instance.arraybuffer=t,this.instance.buf=r,G.HEAPU8.set(e,r),this.instance.open(r,t.byteLength),this.instance.readOffset=0,!0}catch(n){throw new Error("Failed to open file: "+n.message)}},e.getHeader=function(){if(!this.instance)throw new Error("You need to open the file before trying to read header");try{var t=q(this.instance.arraybuffer);return t.pointsFormatId&=63,this.header=t,t}catch(e){throw new Error("Failed to get header: "+e.message)}},e.readData=function(t,e,r){if(!this.instance)throw new Error("You need to open the file before trying to read stuff");var n=this.header,o=this.instance;if(!n)throw new Error("You need to query header before reading, I maintain state that way, sorry :(");try{for(var i=Math.min(t*r,n.pointsCount-o.readOffset),a=Math.ceil(i/r),s=0,c=new Uint8Array(a*n.pointsStructSize),u=G._malloc(n.pointsStructSize),l=0;l<i;l++){if(o.getPoint(u),l%r==0){var p=new Uint8Array(G.HEAPU8.buffer,u,n.pointsStructSize);c.set(p,s*n.pointsStructSize),s++}o.readOffset++}return{buffer:c.buffer,count:s,hasMoreData:o.readOffset<n.pointsCount}}catch(f){throw new Error("Failed to read data: "+f.message)}},e.close=function(){try{return null!==this.instance&&(this.instance.delete(),this.instance=null),!0}catch(t){throw new Error("Failed to close file: "+t.message)}},t}(),tt=function(){function t(t,e,r){this.arrayb=t,this.decoder=Y[r.pointsFormatId],this.pointsCount=e,this.pointSize=r.pointsStructSize,this.scale=r.scale,this.offset=r.offset,this.mins=r.mins,this.maxs=r.maxs}return t.prototype.getPoint=function(t){if(t<0||t>=this.pointsCount)throw new Error("Point index out of range");var e=new DataView(this.arrayb,t*this.pointSize,this.pointSize);return this.decoder(e)},t}(),et=function(){function t(t){if(this.formatId=0,this.isCompressed=!0,this.isOpen=!1,this.version=0,this.versionAsString="",this.arraybuffer=t,this.determineVersion()>13)throw new Error("Only file versions <= 1.3 are supported at this time");if(this.determineFormat(),void 0===Y[this.formatId])throw new Error("The point format ID is not supported");this.loader=this.isCompressed?new Q(this.arraybuffer):new $(this.arraybuffer)}var e=t.prototype;return e.determineFormat=function(){var t=W(this.arraybuffer,Uint8Array,104),e=(128&t)>>7,r=(64&t)>>6;if(1===e&&1===r)throw new Error("Old style compression not supported");this.formatId=63&t,this.isCompressed=1===e||1===r},e.determineVersion=function(){var t=new Int8Array(this.arraybuffer,24,2);return this.version=10*t[0]+t[1],this.versionAsString=t[0]+"."+t[1],this.version},e.open=function(){this.loader.open()&&(this.isOpen=!0)},e.getHeader=function(){return this.loader.getHeader()},e.readData=function(t,e,r){return this.loader.readData(t,e,r)},e.close=function(){this.loader.close()&&(this.isOpen=!1)},e.getUnpacker=function(){return tt},t}(),rt=r("h79P");function nt(t,e){var r=function(t){var e=new Map;e.set("las_pointsOffset",t.pointsOffset.toString(10)),e.set("las_pointsFormatId",t.pointsFormatId.toString(10)),e.set("las_pointsStructSize",t.pointsStructSize.toString(10)),e.set("las_pointsCount",t.pointsCount.toString(10)),e.set("las_scale",JSON.stringify(t.scale)),e.set("las_offset",JSON.stringify(t.offset)),void 0!==t.maxs&&e.set("las_maxs",JSON.stringify(t.maxs));void 0!==t.mins&&e.set("las_mins",JSON.stringify(t.mins));e.set("las_totalToRead",t.totalToRead.toString(10)),e.set("las_pointsFortotalReadmatId",t.totalRead.toString(10)),void 0!==t.versionAsString&&e.set("las_versionAsString",t.versionAsString);void 0!==t.isCompressed&&e.set("las_isCompressed",t.isCompressed.toString());return e}(t);return Object(rt.b)(e,r)}function ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function at(t,e){return function(t,e){var r;void 0===e&&(e={});var n,o,i,a,s,c=0,u={loader:"las",loaderData:{},schema:new J.a([]),header:{vertexCount:0,boundingBox:[[0,0,0],[0,0,0]]},attributes:{},topology:"point-list",mode:0};(function(t,e,r){void 0===r&&(r={});var n=new et(t);try{n.open();var o=n.getHeader(),i=n.getUnpacker(),a=Math.ceil(o.pointsCount/Math.max(1,e));o.totalToRead=a;for(var s=0;;){var c=n.readData(1e5,0,e);s+=c.count,o.totalRead=s,o.versionAsString=c.versionAsString,o.isCompressed=c.isCompressed;var u=new i(c.buffer,c.count,o);if(r(u,o),!c.hasMoreData||s>=a)break}}catch(l){throw l}finally{n.close()}})(t,null===(r=e.las)||void 0===r?void 0:r.skip,(function(t,r){var l,p,f;if(void 0===t&&(t={}),!s){var h;s=r;var d=r.totalToRead,v=null!==(h=e.las)&&void 0!==h&&h.fp64?Float64Array:Float32Array;n=new v(3*d),o=r.pointsFormatId>=2?new Uint8Array(4*d):null,i=new Uint16Array(d),a=new Uint8Array(d),u.loaderData=r,u.attributes={POSITION:{value:n,size:3},intensity:{value:i,size:1},classification:{value:a,size:1}},o&&(u.attributes.COLOR_0={value:o,size:4})}for(var m=t.pointsCount,b=r.scale,y=b[0],g=b[1],O=b[2],w=r.offset,x=w[0],j=w[1],_=w[2],S=function(t,e,r){void 0===t&&(t={});var n=!1;switch(r){case 8:n=!1;break;case 16:n=!0;break;case"auto":if(t.getPoint(0).color)for(var o=0;o<e;o++){var i=t.getPoint(o).color;(i[0]>255||i[1]>255||i[2]>255)&&(n=!0)}break;default:console.warn("las: illegal value for options.las.colorDepth")}return n}(t,m,null===(l=e.las)||void 0===l?void 0:l.colorDepth),P=0;P<m;P++){var C=t.getPoint(P),k=C.position,I=C.color,E=C.intensity,z=C.classification;n[3*c]=k[0]*y+x,n[3*c+1]=k[1]*g+j,n[3*c+2]=k[2]*O+_,I&&o&&(S?(o[4*c]=I[0]/256,o[4*c+1]=I[1]/256,o[4*c+2]=I[2]/256):(o[4*c]=I[0],o[4*c+1]=I[1],o[4*c+2]=I[2]),o[4*c+3]=255),i[c]=E,a[c]=z,c++}var D=it(it({},u),{},{header:{vertexCount:r.totalRead},progress:r.totalRead/r.totalToRead});null===(p=e)||void 0===p||null===(f=p.onProgress)||void 0===f||f.call(p,D)})),u.header={vertexCount:s.totalToRead,boundingBox:Object(H.a)((null==u?void 0:u.attributes)||{})},u&&(u.schema=nt(u.loaderData,u.attributes));return u}(t,e)}function st(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ct(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?st(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ut,lt=ct(ct({},B),{},{parse:(ut=Object(Z.a)(X.a.mark((function t(e,r){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",at(e,r));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return ut.apply(this,arguments)}),parseSync:function(t,e){return at(t,e)}}),pt={name:"PLY",id:"ply",module:"ply",shapes:["mesh","gltf","columnar-table"],version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",worker:!0,extensions:["ply"],mimeTypes:["text/plain","application/octet-stream"],text:!0,binary:!0,tests:["ply"],options:{ply:{}}};function ft(t,e){var r=function(t){var e=new Map;e.set("ply_comments",JSON.stringify(t.comments)),e.set("ply_elements",JSON.stringify(t.elements)),void 0!==t.format&&e.set("ply_format",t.format);void 0!==t.version&&e.set("ply_version",t.version);void 0!==t.headerLength&&e.set("ply_headerLength",t.headerLength.toString(10));return e}(t);return Object(rt.b)(e,r)}function ht(t,e,r){var n=function(t){var e={};e.POSITION={value:new Float32Array(t.vertices),size:3},t.normals.length>0&&(e.NORMAL={value:new Float32Array(t.normals),size:3});t.uvs.length>0&&(e.TEXCOORD_0={value:new Float32Array(t.uvs),size:2});t.colors.length>0&&(e.COLOR_0={value:new Uint8Array(t.colors),size:3,normalized:!0});return e}(e),o=Object(H.a)(n),i=e.indices.length||e.vertices.length/3,a=e.indices&&e.indices.length>0,s=a?4:0,c=a?"triangle-list":"point-list",u={loader:"ply",loaderData:t,header:{vertexCount:i,boundingBox:o},schema:ft(t,n),attributes:n,indices:{value:new Uint32Array(0),size:0},mode:s,topology:c};return e.indices.length>0&&(u.indices={value:new Uint32Array(e.indices),size:1}),u}function dt(t,e){var r,n;if(void 0===e&&(e={}),t instanceof ArrayBuffer){var o=(new TextDecoder).decode(t);n="ascii"===(r=vt(o,e)).format?gt(o,r):function(t,e){for(var r,n={indices:[],vertices:[],normals:[],uvs:[],colors:[]},o="binary_little_endian"===e.format,i=new DataView(t,e.headerLength),a=0,s=0;s<e.elements.length;s++)for(var c=e.elements[s].count,u=0;u<c;u++){r=xt(i,a,e.elements[s].properties,o),a+=r[1];var l=r[0];Ot(n,e.elements[s].name,l)}return n}(t,r)}else n=gt(t,r=vt(t,e));return ht(r,n)}function vt(t,e){var r="",n=0,o=/ply([\s\S]*)end_header\s/.exec(t);return null!==o&&(r=o[1],n=o[0].length),function(t,e,r){for(var n,o,i={comments:[],elements:[],headerLength:e},a=null,s=0;s<t.length;s++){var c=t[s];if(""!==(c=c.trim()))switch(o=c.split(/\s+/),n=o.shift(),c=o.join(" "),n){case"format":i.format=o[0],i.version=o[1];break;case"comment":i.comments.push(c);break;case"element":a&&i.elements.push(a),a={name:o[0],count:parseInt(o[1],10),properties:[]};break;case"property":if(!a)break;a.properties.push(mt(o,r.propertyNameMapping));break;default:console.log("unhandled",n,o)}}void 0!==a&&i.elements.push(a);return i}(r.split("\n"),n,e)}function mt(t,e){var r={type:t[0]};return"list"===r.type?(r.name=t[3],r.countType=t[1],r.itemType=t[2]):r.name=t[1],e&&r.name in e&&(r.name=e[r.name]),r}function bt(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t,10);case"float":case"double":case"float32":case"float64":return parseFloat(t);default:throw new Error(e)}}function yt(t,e){for(var r=e.split(/\s+/),n={},o=0;o<t.length;o++)if("list"===t[o].type){for(var i=[],a=bt(r.shift(),t[o].countType),s=0;s<a;s++)i.push(bt(r.shift(),t[o].itemType));n[t[o].name]=i}else n[t[o].name]=bt(r.shift(),t[o].type);return n}function gt(t,e){var r,n={indices:[],vertices:[],normals:[],uvs:[],colors:[]},o="";null!==(r=/end_header\s([\s\S]*)$/.exec(t))&&(o=r[1]);for(var i=o.split("\n"),a=0,s=0,c=0;c<i.length;c++){var u=i[c];if(""!==(u=u.trim())){s>=e.elements[a].count&&(a++,s=0);var l=yt(e.elements[a].properties,u);Ot(n,e.elements[a].name,l),s++}}return n}function Ot(t,e,r){if(void 0===r&&(r={}),"vertex"===e)t.vertices.push(r.x,r.y,r.z),"nx"in r&&"ny"in r&&"nz"in r&&t.normals.push(r.nx,r.ny,r.nz),"s"in r&&"t"in r&&t.uvs.push(r.s,r.t),"red"in r&&"green"in r&&"blue"in r&&t.colors.push(r.red,r.green,r.blue);else if("face"===e){var n=r.vertex_indices||r.vertex_index;3===n.length?t.indices.push(n[0],n[1],n[2]):4===n.length&&(t.indices.push(n[0],n[1],n[3]),t.indices.push(n[1],n[2],n[3]))}}function wt(t,e,r,n){switch(r){case"int8":case"char":return[t.getInt8(e),1];case"uint8":case"uchar":return[t.getUint8(e),1];case"int16":case"short":return[t.getInt16(e,n),2];case"uint16":case"ushort":return[t.getUint16(e,n),2];case"int32":case"int":return[t.getInt32(e,n),4];case"uint32":case"uint":return[t.getUint32(e,n),4];case"float32":case"float":return[t.getFloat32(e,n),4];case"float64":case"double":return[t.getFloat64(e,n),8];default:throw new Error(r)}}function xt(t,e,r,n){for(var o,i={},a=0,s=0;s<r.length;s++)if("list"===r[s].type){var c=[],u=(o=wt(t,e+a,r[s].countType,n))[0];a+=o[1];for(var l=0;l<u;l++)o=wt(t,e+a,r[s].itemType,n),c.push(o[0]),a+=o[1];i[r[s].name]=c}else o=wt(t,e+a,r[s].type,n),i[r[s].name]=o[0],a+=o[1];return[i,a]}var jt,_t=r("Zova"),St=r("16gb"),Pt=r("iGi1"),Ct=r("K5R3"),kt=r("WDzE");function It(){return(It=Object(Pt.a)(X.a.mark((function t(e,r){var n,o,i;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Ct.a)(Object(Ct.b)(e)),t.next=3,Object(St.a)(Et(n,r));case 3:o=t.sent,t.t0=o.format,t.next="ascii"===t.t0?7:11;break;case 7:return t.next=9,Object(St.a)(At(n,o));case 9:return i=t.sent,t.abrupt("break",12);case 11:throw new Error("Binary PLY can not yet be parsed in streaming mode");case 12:return t.next=14,ht(o,i);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Et(t,e){return zt.apply(this,arguments)}function zt(){return(zt=Object(Z.a)(X.a.mark((function t(e,r){var n;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={comments:[],elements:[]},t.next=3,Object(kt.b)(e,(function(t){if("end_header"===(t=t.trim()))return!0;if(""===t)return!1;var e=t.split(/\s+/),o=e.shift();switch(t=e.join(" "),o){case"ply":break;case"format":n.format=e[0],n.version=e[1];break;case"comment":n.comments.push(t);break;case"element":jt&&n.elements.push(jt),jt={name:e[0],count:parseInt(e[1],10),properties:[]};break;case"property":var i=Dt(e,r.propertyNameMapping);jt.properties.push(i);break;default:console.log("unhandled",o,e)}return!1}));case 3:return jt&&n.elements.push(jt),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Dt(t,e){var r={type:t[0]};return"list"===r.type?(r.name=t[3],r.countType=t[1],r.itemType=t[2]):r.name=t[1],e&&r.name in e&&(r.name=e[r.name]),r}function At(t,e){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(Z.a)(X.a.mark((function t(e,r){var n,o,i,a,s,c,u,l,p,f,h;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={indices:[],vertices:[],normals:[],uvs:[],colors:[]},o=0,i=0,a=!0,s=!1,t.prev=5,u=Object(_t.a)(e);case 7:return t.next=9,u.next();case 9:return l=t.sent,a=l.done,t.next=13,l.value;case 13:if(p=t.sent,a){t.next=21;break}""!==(f=(f=p).trim())&&(i>=r.elements[o].count&&(o++,i=0),h=Ut(r.elements[o].properties,f),Nt(n,r.elements[o].name,h),i++);case 18:a=!0,t.next=7;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(5),s=!0,c=t.t0;case 27:if(t.prev=27,t.prev=28,a||null==u.return){t.next=32;break}return t.next=32,u.return();case 32:if(t.prev=32,!s){t.next=35;break}throw c;case 35:return t.finish(32);case 36:return t.finish(27);case 37:return t.abrupt("return",n);case 38:case"end":return t.stop()}}),t,null,[[5,23,27,37],[28,,32,36]])})))).apply(this,arguments)}function Rt(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t,10);case"float":case"double":case"float32":case"float64":return parseFloat(t);default:throw new Error(e)}}function Ut(t,e){for(var r=e.split(/\s+/),n={},o=0;o<t.length;o++)if("list"===t[o].type){for(var i=[],a=Rt(r.shift(),t[o].countType),s=0;s<a;s++)i.push(Rt(r.shift(),t[o].itemType));n[t[o].name]=i}else n[t[o].name]=Rt(r.shift(),t[o].type);return n}function Nt(t,e,r){switch(void 0===r&&(r={}),e){case"vertex":t.vertices.push(r.x,r.y,r.z),"nx"in r&&"ny"in r&&"nz"in r&&t.normals.push(r.nx,r.ny,r.nz),"s"in r&&"t"in r&&t.uvs.push(r.s,r.t),"red"in r&&"green"in r&&"blue"in r&&t.colors.push(r.red/255,r.green/255,r.blue/255);break;case"face":var n=r.vertex_indices||r.vertex_index;3===n.length?t.indices.push(n[0],n[1],n[2]):4===n.length&&(t.indices.push(n[0],n[1],n[3]),t.indices.push(n[1],n[2],n[3]))}}function Lt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Mt=Tt(Tt({},pt),{},{parse:function(){var t=Object(Z.a)(X.a.mark((function t(e,r){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",dt(e,r));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),parseTextSync:dt,parseSync:dt,parseInBatches:function(t,e){return It.apply(this,arguments)}});var Vt=r("3p+V"),Xt=r("2jNN");function Zt(t){var e=(new TextDecoder).decode(t),r=function(t){var e=t.search(/[\r\n]DATA\s(\S*)\s/i),r=/[\r\n]DATA\s(\S*)\s/i.exec(t.substr(e-1)),n={};n.data=r&&r[1],null!==r&&(n.headerLen=(r&&r[0].length)+e);n.str=t.substr(0,n.headerLen),n.str=n.str.replace(/\#.*/gi,""),n.version=/VERSION (.*)/i.exec(n.str),n.fields=/FIELDS (.*)/i.exec(n.str),n.size=/SIZE (.*)/i.exec(n.str),n.type=/TYPE (.*)/i.exec(n.str),n.count=/COUNT (.*)/i.exec(n.str),n.width=/WIDTH (.*)/i.exec(n.str),n.height=/HEIGHT (.*)/i.exec(n.str),n.viewpoint=/VIEWPOINT (.*)/i.exec(n.str),n.points=/POINTS (.*)/i.exec(n.str),null!==n.version&&(n.version=parseFloat(n.version[1]));null!==n.fields&&(n.fields=n.fields[1].split(" "));null!==n.type&&(n.type=n.type[1].split(" "));null!==n.width&&(n.width=parseInt(n.width[1],10));null!==n.height&&(n.height=parseInt(n.height[1],10));null!==n.viewpoint&&(n.viewpoint=n.viewpoint[1]);null!==n.points&&(n.points=parseInt(n.points[1],10));null===n.points&&"number"==typeof n.width&&"number"==typeof n.height&&(n.points=n.width*n.height);null!==n.size&&(n.size=n.size[1].split(" ").map((function(t){return parseInt(t,10)})));if(null!==n.count)n.count=n.count[1].split(" ").map((function(t){return parseInt(t,10)}));else if(n.count=[],null!==n.fields)for(var o=0;o<n.fields.length;o++)n.count.push(1);n.offset={};var i=0;if(null!==n.fields&&null!==n.size)for(var a=0;a<n.fields.length;a++)"ascii"===n.data?n.offset[n.fields[a]]=a:(n.offset[n.fields[a]]=i,i+=n.size[a]);return n.rowSize=i,n}(e),n={};switch(r.data){case"ascii":n=function(t,e){for(var r=[],n=[],o=[],i=t.offset,a=e.substr(t.headerLen).split("\n"),s=0;s<a.length;s++)if(""!==a[s]){var c=a[s].split(" ");if(void 0!==i.x&&(r.push(parseFloat(c[i.x])),r.push(parseFloat(c[i.y])),r.push(parseFloat(c[i.z]))),void 0!==i.rgb){var u=parseFloat(c[i.rgb]),l=new Float32Array([u]),p=new DataView(l.buffer,0);o.push(p.getUint8(0)),o.push(p.getUint8(1)),o.push(p.getUint8(2))}void 0!==i.normal_x&&(n.push(parseFloat(c[i.normal_x])),n.push(parseFloat(c[i.normal_y])),n.push(parseFloat(c[i.normal_z])))}return{position:r,normal:n,color:o}}(r,e);break;case"binary":n=function(t,e){for(var r=[],n=[],o=[],i=new DataView(e,t.headerLen),a=t.offset,s=0,c=0;s<t.points;s++,c+=t.rowSize)void 0!==a.x&&(r.push(i.getFloat32(c+a.x,!0)),r.push(i.getFloat32(c+a.y,!0)),r.push(i.getFloat32(c+a.z,!0))),void 0!==a.rgb&&(o.push(i.getUint8(c+a.rgb+0)),o.push(i.getUint8(c+a.rgb+1)),o.push(i.getUint8(c+a.rgb+2))),void 0!==a.normal_x&&(n.push(i.getFloat32(c+a.normal_x,!0)),n.push(i.getFloat32(c+a.normal_y,!0)),n.push(i.getFloat32(c+a.normal_z,!0)));return{position:r,normal:n,color:o}}(r,t);break;case"binary_compressed":n=function(t,e){for(var r=[],n=[],o=[],i=new Uint32Array(e.slice(t.headerLen,t.headerLen+8)),a=i[0],s=i[1],c=function(t,e){var r,n,o,i=t.length,a=new Uint8Array(e),s=0,c=0;do{if((r=t[s++])<32){if(c+ ++r>e)throw new Error("Output buffer is not large enough");if(s+r>i)throw new Error("Invalid compressed data");do{a[c++]=t[s++]}while(--r)}else{if(n=r>>5,o=c-((31&r)<<8)-1,s>=i)throw new Error("Invalid compressed data");if(7===n&&(n+=t[s++],s>=i))throw new Error("Invalid compressed data");if(o-=t[s++],c+n+2>e)throw new Error("Output buffer is not large enough");if(o<0)throw new Error("Invalid compressed data");if(o>=c)throw new Error("Invalid compressed data");do{a[c++]=a[o++]}while(2+--n)}}while(s<i);return a}(new Uint8Array(e,t.headerLen+8,a),s),u=new DataView(c.buffer),l=t.offset,p=0;p<t.points;p++)void 0!==l.x&&(r.push(u.getFloat32(t.points*l.x+t.size[0]*p,!0)),r.push(u.getFloat32(t.points*l.y+t.size[1]*p,!0)),r.push(u.getFloat32(t.points*l.z+t.size[2]*p,!0))),void 0!==l.rgb&&(o.push(u.getUint8(t.points*l.rgb+t.size[3]*p+0)/255),o.push(u.getUint8(t.points*l.rgb+t.size[3]*p+1)/255),o.push(u.getUint8(t.points*l.rgb+t.size[3]*p+2)/255)),void 0!==l.normal_x&&(n.push(u.getFloat32(t.points*l.normal_x+t.size[4]*p,!0)),n.push(u.getFloat32(t.points*l.normal_y+t.size[5]*p,!0)),n.push(u.getFloat32(t.points*l.normal_z+t.size[6]*p,!0)));return{position:r,normal:n,color:o}}(r,t);break;default:throw new Error("PCD: "+r.data+" files are not supported")}var o=function(t,e){if("number"==typeof t.width&&"number"==typeof t.height){return{vertexCount:t.width*t.height,boundingBox:Object(H.a)(e)}}return t}(r,n=function(t){var e={POSITION:{value:new Float32Array(t.position),size:3}};t.normal&&t.normal.length>0&&(e.NORMAL={value:new Float32Array(t.normal),size:3});t.color&&t.color.length>0&&(e.COLOR_0={value:new Uint8Array(t.color),size:3});return e}(n));return{loaderData:{header:r},header:o,schema:function(t,e){var r=t.offset,n=[];return void 0!==r.x&&n.push(new Vt.a("POSITION",new Xt.c(3,new Vt.a("xyz",new Xt.d)),!1)),void 0!==r.normal_x&&n.push(new Vt.a("NORMAL",new Xt.c(3,new Vt.a("xyz",new Xt.d)),!1)),void 0!==r.rgb&&n.push(new Vt.a("COLOR_0",new Xt.c(3,new Vt.a("rgb",new Xt.l)),!1)),new J.a(n,e)}(r,new Map([["mode","0"],["boundingBox",JSON.stringify(o.boundingBox)]])),mode:0,indices:null,attributes:n}}var Bt={name:"PCD (Point Cloud Data)",id:"pcd",module:"pcd",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",worker:!0,extensions:["pcd"],mimeTypes:["text/plain"],options:{pcd:{}}};function Jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ht(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Kt=Ht(Ht({},Bt),{},{parse:function(){var t=Object(Z.a)(X.a.mark((function t(e){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Zt(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),parseSync:Zt});r("E9XD"),r("7ueG");function Gt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function Yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Wt=/^[og]\s*(.+)?/,qt=/^mtllib /,$t=/^usemtl /,Qt=function(){function t(t){var e=t.index,r=t.name,n=void 0===r?"":r,o=t.mtllib,i=t.smooth,a=t.groupStart;this.index=e,this.name=n,this.mtllib=o,this.smooth=i,this.groupStart=a,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}return t.prototype.clone=function(e){return void 0===e&&(e=this.index),new t({index:e,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})},t}(),te=function(){function t(t){void 0===t&&(t=""),this.name=t,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0,this.fromDeclaration=null}var e=t.prototype;return e.startMaterial=function(t,e){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var n=new Qt({index:this.materials.length,name:t,mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0});return this.materials.push(n),n},e.currentMaterial=function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},e._finalize=function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e},t}(),ee=function(){function t(){this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}var e=t.prototype;return e.startObject=function(t,e){if(void 0===e&&(e=!0),this.object&&!this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=e);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object=new te(t),this.object.fromDeclaration=e,r&&r.name&&"function"==typeof r.clone){var n=r.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},e.finalize=function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},e.parseVertexIndex=function(t,e){var r=parseInt(t);return 3*(r>=0?r-1:r+e/3)},e.parseNormalIndex=function(t,e){var r=parseInt(t);return 3*(r>=0?r-1:r+e/3)},e.parseUVIndex=function(t,e){var r=parseInt(t);return 2*(r>=0?r-1:r+e/2)},e.addVertex=function(t,e,r){var n=this.vertices,o=this.object.geometry.vertices;o.push(n[t+0],n[t+1],n[t+2]),o.push(n[e+0],n[e+1],n[e+2]),o.push(n[r+0],n[r+1],n[r+2])},e.addVertexPoint=function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},e.addVertexLine=function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},e.addNormal=function(t,e,r){var n=this.normals,o=this.object.geometry.normals;o.push(n[t+0],n[t+1],n[t+2]),o.push(n[e+0],n[e+1],n[e+2]),o.push(n[r+0],n[r+1],n[r+2])},e.addColor=function(t,e,r){var n=this.colors,o=this.object.geometry.colors;o.push(n[t+0],n[t+1],n[t+2]),o.push(n[e+0],n[e+1],n[e+2]),o.push(n[r+0],n[r+1],n[r+2])},e.addUV=function(t,e,r){var n=this.uvs,o=this.object.geometry.uvs;o.push(n[t+0],n[t+1]),o.push(n[e+0],n[e+1]),o.push(n[r+0],n[r+1])},e.addUVLine=function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},e.addFace=function(t,e,r,n,o,i,a,s,c){var u=this.vertices.length,l=this.parseVertexIndex(t,u),p=this.parseVertexIndex(e,u),f=this.parseVertexIndex(r,u);if(this.addVertex(l,p,f),void 0!==n&&""!==n){var h=this.uvs.length;l=this.parseUVIndex(n,h),p=this.parseUVIndex(o,h),f=this.parseUVIndex(i,h),this.addUV(l,p,f)}if(void 0!==a&&""!==a){var d=this.normals.length;l=this.parseNormalIndex(a,d),p=a===s?l:this.parseNormalIndex(s,d),f=a===c?l:this.parseNormalIndex(c,d),this.addNormal(l,p,f)}this.colors.length>0&&this.addColor(l,p,f)},e.addPointGeometry=function(t){this.object.geometry.type="Points";for(var e,r=this.vertices.length,n=Gt(t);!(e=n()).done;){var o=e.value;this.addVertexPoint(this.parseVertexIndex(o,r))}},e.addLineGeometry=function(t,e){this.object.geometry.type="Line";for(var r,n=this.vertices.length,o=this.uvs.length,i=Gt(t);!(r=i()).done;){var a=r.value;this.addVertexLine(this.parseVertexIndex(a,n))}for(var s,c=Gt(e);!(s=c()).done;){var u=s.value;this.addUVLine(this.parseUVIndex(u,o))}},t}();var re=r("Lx8K");function ne(t,e){var r=new Map;for(var n in e)"value"!==n&&r.set(n,JSON.stringify(e[n]));var o=Object(re.a)(e.value);return!("size"in e)||1===e.size?new Vt.a(t,o,!1,r):new Vt.a(t,new Xt.c(e.size,new Vt.a("value",o)),!1,r)}function oe(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ie(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ae(t,e){var r=function(t){var e=new ee;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var r=t.split("\n"),n="",o="",i=[],a="function"==typeof"".trimLeft,s=0,c=r.length;s<c;s++)if(n=r[s],0!==(n=a?n.trimLeft():n.trim()).length&&"#"!==(o=n.charAt(0)))if("v"===o){var u=n.split(/\s+/);switch(u[0]){case"v":e.vertices.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])),8===u.length&&e.colors.push(parseFloat(u[4]),parseFloat(u[5]),parseFloat(u[6]));break;case"vn":e.normals.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));break;case"vt":e.uvs.push(parseFloat(u[1]),parseFloat(u[2]))}}else if("f"===o){for(var l=n.substr(1).trim().split(/\s+/),p=[],f=0,h=l.length;f<h;f++){var d=l[f];if(d.length>0){var v=d.split("/");p.push(v)}}for(var m=p[0],b=1,y=p.length-1;b<y;b++){var g=p[b],O=p[b+1];e.addFace(m[0],g[0],O[0],m[1],g[1],O[1],m[2],g[2],O[2])}}else if("l"===o){var w=n.substring(1).trim().split(" "),x=void 0,j=[];if(-1===n.indexOf("/"))x=w;else{x=[];for(var _=0,S=w.length;_<S;_++){var P=w[_].split("/");""!==P[0]&&x.push(P[0]),""!==P[1]&&j.push(P[1])}}e.addLineGeometry(x,j)}else if("p"===o){var C=n.substr(1).trim().split(" ");e.addPointGeometry(C)}else if(null!==(i=Wt.exec(n))){var k=(" "+i[0].substr(1).trim()).substr(1);e.startObject(k)}else if($t.test(n))e.object.startMaterial(n.substring(7).trim(),e.materialLibraries);else if(qt.test(n))e.materialLibraries.push(n.substring(7).trim());else{if("s"!==o){if("\0"===n)continue;throw new Error('Unexpected line: "'+n+'"')}if((i=n.split(" ")).length>1){var I=i[1].trim().toLowerCase();e.object.smooth="0"!==I&&"off"!==I}else e.object.smooth=!0;var E=e.object.currentMaterial();E&&(E.smooth=e.object.smooth)}e.finalize();for(var z,D=[],A=[],F=Gt(e.objects);!(z=F()).done;){var R=z.value,U=R.geometry;if(0!==U.vertices.length){var N={header:{vertexCount:U.vertices.length/3},attributes:{}};switch(U.type){case"Points":N.mode=0;break;case"Line":N.mode=1;break;default:N.mode=4}N.attributes.POSITION={value:new Float32Array(U.vertices),size:3},U.normals.length>0&&(N.attributes.NORMAL={value:new Float32Array(U.normals),size:3}),U.colors.length>0&&(N.attributes.COLOR_0={value:new Float32Array(U.colors),size:3}),U.uvs.length>0&&(N.attributes.TEXCOORD_0={value:new Float32Array(U.uvs),size:2}),N.materials=[];for(var L,T=Gt(R.materials);!(L=T()).done;){var M=L.value,V={name:M.name,flatShading:!M.smooth};N.materials.push(V),A.push(V)}N.name=R.name,D.push(N)}}return{meshes:D,materials:A}}(t).meshes,n=r.reduce((function(t,e){return t+e.header.vertexCount}),0),o=function(t,e){for(var r,n,o,i,a=new Float32Array(3*e),s=0,c=oe(t);!(i=c()).done;){var u=i.value.attributes,l=u.POSITION,p=u.NORMAL,f=u.COLOR_0,h=u.TEXCOORD_0;a.set(l.value,3*s),p&&(r=r||new Float32Array(3*e)).set(p.value,3*s),f&&(n=n||new Float32Array(3*e)).set(f.value,3*s),h&&(o=o||new Float32Array(2*e)).set(h.value,2*s),s+=l.value.length/3}var d={};d.POSITION={value:a,size:3},r&&(d.NORMAL={value:r,size:3});n&&(d.COLOR_0={value:n,size:3});o&&(d.TEXCOORD_0={value:o,size:2});return d}(r,n),i={vertexCount:n,boundingBox:Object(H.a)(o)};return{loaderData:{header:{}},schema:function(t,e){var r;for(var n in void 0===e&&(e={}),e)r=r||new Map,"value"!==n&&r.set(n,JSON.stringify(e[n]));var o=[];for(var i in t){var a=ne(i,t[i]);o.push(a)}return new J.a(o,r)}(o,{mode:4,boundingBox:i.boundingBox}),header:i,mode:4,attributes:o}}function se(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ce(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ue=/\s+/;function le(t,e){for(var r,n=[],o={name:"placeholder"},i=se(t.split("\n"));!(r=i()).done;){var a=r.value;if(0!==(a=a.trim()).length&&"#"!==a.charAt(0)){var s=a.indexOf(" "),c=s>=0?a.substring(0,s):a;c=c.toLowerCase();var u=s>=0?a.substring(s+1):"";switch(u=u.trim(),c){case"newmtl":o={name:u},n.push(o);break;case"ka":o.ambientColor=pe(u);break;case"kd":o.diffuseColor=pe(u);break;case"map_kd":o.diffuseTextureUrl=u;break;case"ks":o.specularColor=pe(u);break;case"map_ks":o.specularTextureUrl=u;break;case"ke":o.emissiveColor=pe(u);break;case"map_ke":o.emissiveTextureUrl=u;break;case"ns":o.shininess=parseFloat(u);break;case"map_ns":break;case"ni":o.refraction=parseFloat(u);break;case"illum":o.illumination=parseFloat(u)}}}return n}function pe(t,e){var r=t.split(ue,3);return[parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2])]}var fe={name:"OBJ",id:"obj",module:"obj",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",worker:!0,extensions:["obj"],mimeTypes:["text/plain"],testText:function(t){return"v"===t[0]},options:{obj:{}}};var he={name:"MTL",id:"mtl",module:"mtl",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",worker:!0,extensions:["mtl"],mimeTypes:["text/plain"],testText:function(t){return t.includes("newmtl")},options:{mtl:{}}};function de(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?de(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var me,be=ve(ve({},fe),{},{parse:function(){var t=Object(Z.a)(X.a.mark((function t(e,r){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ae((new TextDecoder).decode(e)));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),parseTextSync:function(t,e){return ae(t)}}),ye=(ve(ve({},he),{},{parse:(me=Object(Z.a)(X.a.mark((function t(e,r){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",le((new TextDecoder).decode(e),null==r||r.mtl));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return me.apply(this,arguments)}),parseTextSync:function(t,e){return le(t,null==e||e.mtl)}}),r("3/Ur")),ge=r("xszv"),Oe=r("vOnD"),we=Oe.c.div.withConfig({displayName:"control-panel__Container",componentId:"sc-14q5t5u-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;max-width:320px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;"]),xe=Oe.c.select.withConfig({displayName:"control-panel__DropDown",componentId:"sc-14q5t5u-1"})(["margin-bottom:6px;"]),je=function(t){function e(){return t.apply(this,arguments)||this}Object(i.a)(e,t);var r=e.prototype;return r.componentDidMount=function(){var t=this.props,e=t.examples,r=void 0===e?{}:e,n=t.onExampleChange,o=this.props.selectedCategory,i=this.props.selectedExample;(o&&i||this._autoSelected||(o=Object.keys(r)[0],i=Object.keys(r[o])[0],this._autoSelected=!0),o&&i)&&n({selectedCategory:o,selectedExample:i,example:r[o][i]})},r._renderDropDown=function(){var t=this.props,e=t.examples,r=void 0===e?{}:e,n=t.selectedCategory,o=t.selectedExample,i=t.onExampleChange;if(!n||!o)return!1;var a=n+"."+o;return s.a.createElement(xe,{value:a,onChange:function(t){var e=t.target.value.split("."),n=e[0],o=e[1],a=r[n][o];i({selectedCategory:n,selectedExample:o,example:a})}},Object.keys(r).map((function(t,e){var n=r[t];return s.a.createElement("optgroup",{key:e,label:t},Object.keys(n).map((function(e,r){var n=t+"."+e;return s.a.createElement("option",{key:r,value:n},e+" ("+t+")")})))})))},r._renderHeader=function(){var t=this.props,e=t.selectedCategory,r=t.selectedExample;return e&&r?s.a.createElement("div",null,s.a.createElement("h3",null,r," ",s.a.createElement("b",null,e)," ")):null},r._renderDropped=function(){var t=this.props.droppedFile;return t?s.a.createElement("div",null,"Dropped file: ",JSON.stringify(t.name)):null},r._renderStats=function(){var t,e=this.props,r=e.vertexCount,n=e.loadTimeMs;return t=r>=1e7?(r/1e6).toFixed(0)+"M":r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e4?(r/1e3).toFixed(0)+"K":r>=1e3?(r/1e3).toFixed(1)+"K":""+r,s.a.createElement("div",null,s.a.createElement("div",null,Number.isFinite(r)?"Points: "+t:null),s.a.createElement("div",null,Number.isFinite(n)?"Load time: "+(n/1e3).toFixed(1)+"s":null))},r.render=function(){return s.a.createElement(we,null,this._renderHeader(),this._renderDropDown(),this._renderDropped(),this._renderStats())},e}(a.PureComponent);je.defaultProps={examples:{},selectedCategory:null,selectedExample:null,onExampleChange:function(){}};var _e="https://raw.githubusercontent.com/visgl/deck.gl-data/master",Se="https://raw.githubusercontent.com/visgl/loaders.gl/master",Pe={PLY:{"Lucy 800K":{uri:_e+"/examples/point-cloud-ply/lucy800k.ply"},"Lucy 100K":{uri:_e+"/examples/point-cloud-ply/lucy100k.ply"},Bunny:{uri:Se+"/modules/ply/test/data/bunny.ply"},"Bun Zipper (Text)":{uri:Se+"/modules/ply/test/data/bun_zipper.ply"},"Richmond Azaelias":{uri:Se+"/modules/ply/test/data/richmond-azaelias.ply"}},LAZ:{"Indoor Scan 800K":{uri:_e+"/examples/point-cloud-laz/indoor.0.1.laz"}},Draco:{Bunny:{uri:Se+"/modules/draco/test/data/bunny.drc"}},OBJ:{Magnolia:{uri:Se+"/modules/obj/test/data/magnolia.obj"},Bunny:{uri:Se+"/modules/obj/test/data/bunny.obj"}}};function Ce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ke(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ce(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}Object(ye.b)([M.a,lt,Mt,Kt,be]);var Ie={target:[0,0,0],rotationX:0,rotationOrbit:0,orbitAxis:"Y",fov:50,minZoom:0,maxZoom:10,zoom:1},Ee=new l.a(["rotationOrbit"]);function ze(t){var e={getPosition:t.POSITION};return t.COLOR_0&&(e.getColor=t.COLOR_0),{length:t.POSITION.value.length/t.POSITION.size,attributes:e}}var De=function(t){function e(e){var r;return(r=t.call(this,e)||this).state={viewState:Ie,pointData:null,selectedExample:"Richmond Azaelias",selectedCategory:"PLY"},r._onLoad=r._onLoad.bind(Object(o.a)(r)),r._rotateCamera=r._rotateCamera.bind(Object(o.a)(r)),r._onViewStateChange=r._onViewStateChange.bind(Object(o.a)(r)),r._onExampleChange=r._onExampleChange.bind(Object(o.a)(r)),r}Object(i.a)(e,t);var r=e.prototype;return r._onViewStateChange=function(t){var e=t.viewState;this.setState({viewState:e})},r._rotateCamera=function(){var t=this.state.viewState;this.setState({viewState:ke(ke({},t),{},{rotationOrbit:t.rotationOrbit+10,transitionDuration:600,transitionInterpolator:Ee,onTransitionEnd:this._rotateCamera})})},r._onExampleChange=function(t){var e=t.selectedCategory,r=t.selectedExample,n=t.example.uri;this._loadStartMs=Date.now(),this.setState({selectedCategory:e,selectedExample:r,pointData:null,loadTimeMs:void 0}),Object(ge.a)(n).then(this._onLoad.bind(this))},r._onLoad=function(t){t.header;var e,r,n=t.loaderData,o=t.attributes,i=(t.progress,null!==(e=n.header)&&void 0!==e&&e.mins&&null!==(r=n.header)&&void 0!==r&&r.maxs?n.header:function(t){for(var e=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],r=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE],n=t.POSITION.size,o=t.POSITION.value.length/n,i=0;i<o;i+=n){var a=t.POSITION.value[i],s=t.POSITION.value[i+1],c=t.POSITION.value[i+2];a<e[0]?e[0]=a:a>r[0]&&(r[0]=a),s<e[1]?e[1]=s:s>r[1]&&(r[1]=s),c<e[2]?e[2]=c:c>r[2]&&(r[2]=c)}return{mins:e,maxs:r}}(o)),a=i.maxs,s=i.mins,c=this.state.viewState;c=ke(ke({},Ie),{},{target:[(s[0]+a[0])/2,(s[1]+a[1])/2,(s[2]+a[2])/2],zoom:Math.log2(window.innerWidth/(a[0]-s[0]))-1}),this.setState({loadTimeMs:Date.now()-this._loadStartMs,pointData:ze(o),viewState:c},this._rotateCamera)},r._renderLayers=function(){var t=this.state,e=t.pointData,r=t.selectedExample;return[e&&new T.a({id:"point-cloud-layer-"+r,coordinateSystem:p.a.CARTESIAN,data:e,getNormal:[0,1,0],getColor:[255,255,255],opacity:.5,pointSize:.5})]},r._renderControlPanel=function(){var t=this.state,e=t.selectedExample,r=t.pointData,n=t.selectedCategory,o=t.loadTimeMs;return s.a.createElement(je,{examples:Pe,selectedCategory:n,selectedExample:e,onExampleChange:this._onExampleChange,vertexCount:r&&r.length,loadTimeMs:o})},r.render=function(){var t=this.state.viewState,e=this.props.panel,r=void 0===e||e;return s.a.createElement("div",{style:{position:"relative",height:"100%"}},s.a.createElement("div",{style:{visibility:r?"default":"hidden"}},this._renderControlPanel()),s.a.createElement(u.a,{views:new L,viewState:t,controller:{inertia:!0},onViewStateChange:this._onViewStateChange,layers:this._renderLayers(),parameters:{clearColor:[.07,.14,.19,1]}}))},e}(a.PureComponent);function Ae(t){Object(c.render)(s.a.createElement(De,null),t)}},yNLB:function(t,e,r){var n=r("0Dky"),o=r("WJkJ");t.exports=function(t){return n((function(){return!!o[t]()||"​᠎"!="​᠎"[t]()||o[t].name!==t}))}}}]);